<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; " />
<title>Rigidbody.OnCollisionEnter 当碰撞进入</title>
<meta name="Keywords" content="unity,Rigidbody,刚体,OnCollisionEnter,当碰撞进入" />
<meta name="Description" content="当这个collider/rigidbody已经开始接触另一个rigidbody/collider时，OnCollisionEnter被调用。" />
<link href="../Style/CSS/UnityStyle.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../Style/SJ/jquery.min.js"></script>
<script type="text/javascript" src="../Style/SJ/tabs.min.js"></script>
  <script type="text/javascript">
$(function() {
	$("ul.tabs").tabs("> .panes", {initialIndex: 1});
});
</script>

</head>

<body>
<div class="head">
<div class="logo"><a href="/Script"><img src="../Style/Images/unitylogo.png" alt="Unity圣典" width="350" height="80"  title="Unity圣典"/></a></div>
<div class="menu"><a href="/">首页</a><a href="/Script">Unity脚本</a></div>
</div>

<div class="mainbody">
    <div class="leftmain">
    	        <ul class="scriptmenu">
          <li><a href="../index.html">Overview</a> <span class="trans">概述</span></li>
            <li><a href="../Runtime.Classes.html">Runtime Classes</a> <span class="trans">实时运行类</span></li>
            <ul>
                <li><a href="../Attributes/Attributes.html">Attributes</a> <span class="trans">属性</span></li>
                <li><a href="../Enumerations/Enumerations.html">Enumerations</a> <span class="trans">枚举</span></li>
            </ul>
            <li><a href="../Editor.Classes.html">Editor Classes</a> <span class="trans">编辑器类</span></li>
            <ul>
                <li><a href="../Editor_Enumerations/Editor.Enumerations.html">Enumerations</a> <span class="trans">枚举</span></li>
            </ul>
            <li>History <span class="trans">历史</span></li>
            <li><a href="../index.Classes.html">Index</a> <span class="trans">总索引</span></li>
        </ul>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8054246454688368";
/* Unity方 */
google_ad_slot = "5047319569";
google_ad_width = 200;
google_ad_height = 200;
//-->
</script>
<script type="text/javascript"
src="">
</script>
        <div class="subclass"><a href="Rigidbody.html">Rigidbody</a><span class="transer">翻译：U_鹰 </span>
                <ul>
                    <li><a href="Rigidbody.AddExplosionForce.html">AddExplosionForce</a></li>
                    <li><a href="Rigidbody.AddForceAtPosition.html">AddForceAtPosition</a></li>
                    <li><a href="Rigidbody.AddForce.html">AddForce</a></li>
                    <li><a href="Rigidbody.AddRelativeForce.html">AddRelativeForce</a></li>
                    <li><a href="Rigidbody.AddRelativeTorque.html">AddRelativeTorque</a></li>
                    <li><a href="Rigidbody.AddTorque.html">AddTorque</a></li>
                    <li><a href="Rigidbody.angularDrag.html">angularDrag</a></li>
                    <li><a href="Rigidbody.angularVelocity.html">angularVelocity</a></li>
                    <li><a href="Rigidbody.centerOfMass.html">centerOfMass</a></li>
                    <li><a href="Rigidbody.ClosestPointOnBounds.html">ClosestPointOnBounds</a></li>
                    <li><a href="Rigidbody.collisionDetectionMode.html">collisionDetectionMode</a></li>
                    <li><a href="Rigidbody.detectCollisions.html">detectCollisions</a></li>
                    <li><a href="Rigidbody.drag.html">drag</a></li>
                    <li><a href="Rigidbody.freezeRotation.html">freezeRotation</a></li>
                    <li><a href="Rigidbody.GetPointVelocity.html">GetPointVelocity</a></li>
                    <li><a href="Rigidbody.GetRelativePointVelocity.html">GetRelativePointVelocity</a></li>
                    <li><a href="Rigidbody.inertiaTensorRotation.html">inertiaTensorRotation</a></li>
                    <li><a href="Rigidbody.inertiaTensor.html">inertiaTensor</a></li>
                    <li><a href="Rigidbody.interpolation.html">interpolation</a></li>
                    <li><a href="Rigidbody.isKinematic.html">isKinematic</a></li>
                    <li><a href="Rigidbody.IsSleeping.html">IsSleeping</a></li>
                    <li><a href="Rigidbody.mass.html">mass</a></li>
                    <li><a href="Rigidbody.maxAngularVelocity.html">maxAngularVelocity</a></li>
                    <li><a href="Rigidbody.MovePosition.html">MovePosition</a></li>
                    <li><a href="Rigidbody.MoveRotation.html">MoveRotation</a></li>
                    <li><a href="Rigidbody.OnCollisionEnter.html">OnCollisionEnter</a></li>
                    <li><a href="Rigidbody.OnCollisionExit.html">OnCollisionExit</a></li>
                    <li><a href="Rigidbody.OnCollisionStay.html">OnCollisionStay</a></li>
                    <li><a href="Rigidbody.position.html">position</a></li>
                    <li><a href="Rigidbody.rotation.html">rotation</a></li>
                    <li><a href="Rigidbody.SetDensity.html">SetDensity</a></li>
                    <li><a href="Rigidbody.sleepAngularVelocity.html">sleepAngularVelocity</a></li>
                    <li><a href="Rigidbody.sleepVelocity.html">sleepVelocity</a></li>
                    <li><a href="Rigidbody.Sleep.html">Sleep</a></li>
                    <li><a href="Rigidbody.solverIterationCount.html">solverIterationCount</a></li>
                    <li><a href="Rigidbody.SweepTestAll.html">SweepTestAll</a></li>
                    <li><a href="Rigidbody.SweepTest.html">SweepTest</a></li>
                    <li><a href="Rigidbody.useConeFriction.html">useConeFriction</a></li>
                    <li><a href="Rigidbody.useGravity.html">useGravity</a></li>
                    <li><a href="Rigidbody.velocity.html">velocity</a></li>
                    <li><a href="Rigidbody.WakeUp.html">WakeUp</a></li>
                    <li><a href="Rigidbody.worldCenterOfMass.html">worldCenterOfMass</a></li>
                </ul>
</div>
    </div>
    <div class="rightmain"><!--right start--><script type="text/javascript"><!--
google_ad_client = "ca-pub-8054246454688368";
/* Unity横 */
google_ad_slot = "2374072180";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="">
</script>
<h1><a href="Rigidbody.html">Rigidbody</a>.OnCollisionEnter 当碰撞进入</h1>
<p class="h1inherit"></p>
<p>function <em>OnCollisionEnter</em> (<em>collisionInfo</em> : <a href="../Collision/Collision.html">Collision</a>) : void </p>
<p><em>Description</em><span class="trans">描述</span></p>
<p> OnCollisionEnter is called when this collider/rigidbody has begun touching another rigidbody/collider.</p>
<p>当这个collider/rigidbody已经开始接触另一个rigidbody/collider时，OnCollisionEnter被调用。</p>
<p> In contrast to OnTriggerEnter, OnCollisionEnter is passed the <a href="../Collision/Collision.html">Collision</a> class and not a Collider.  The <a href="../Collision/Collision.html">Collision</a> class contains information about contact points, impact velocity etc.  If you don't use collisionInfo in the function, leave out the collisionInfo parameter as this avoids unneccessary calculations.  Note that collision events are only sent if one of the colliders also has a non-kinematic rigidbody attached. </p>
<p>相对于OnTriggerEnter，OnCollisionEnter传递Collision类而不是Collider。Collision类包含接触点，碰撞速度等细节。如果在函数中不使用collisionInfo，省略collisionInfo参数以避免不必要的计算。请注意如果一个碰撞器附加了一个非动力刚体，也只发送碰撞事件。</p>
<div class="wrap">
	<ul class="tabs">
		<li><a href="#">C#</a></li>
		<li><a href="#">JavaScript</a></li>
	</ul>
    <div class="panes">
      <pre><code>using UnityEngine;
using System.Collections;

public class example : <a href="../MonoBehaviour/MonoBehaviour.html">MonoBehaviour</a> {
	void OnCollisionEnter(<a href="../Collision/Collision.html">Collision</a> collision) {
		foreach (<a href="../ContactPoint/ContactPoint.html">ContactPoint</a> contact in collision.contacts) {
		<a href="../Debug/Debug.DrawRay.html">Debug.DrawRay</a>(contact.point, contact.normal, Color.white);
	}
	if (collision.relativeVelocity.magnitude > 2)
		audio.Play();

	}
}</code></pre></div>
    <div class="panes">
      <pre><code>function OnCollisionEnter(collision : <a href="../Collision/Collision.html">Collision</a>) {
	<span class="notes">// Debug-draw all contact points and normals
	//调试绘制所有的接触点和法线</span>
	for (var contact : <a href="../ContactPoint/ContactPoint.html">ContactPoint</a> in collision.contacts) {
		<a href="../Debug/Debug.DrawRay.html">Debug.DrawRay</a>(contact.point, contact.normal, Color.white);
	}

	<span class="notes">// Play a sound if the coliding objects had a big impact.
	//如果碰撞物体有一个较大的冲撞，播放一个声音</span>
	if (collision.relativeVelocity.magnitude > 2)
		audio.Play();
}</code></pre></div>
</div>
<p>另一个例子：</p>
<div class="wrap">
	<ul class="tabs">
		<li><a href="#">C#</a></li>
		<li><a href="#">JavaScript</a></li>
	</ul>
    <div class="panes">
      <pre><code>using UnityEngine;
using System.Collections;

public class example : <a href="../MonoBehaviour/MonoBehaviour.html">MonoBehaviour</a> {
	public <a href="../Transform/Transform.html">Transform</a> explosionPrefab;
	void OnCollisionEnter(<a href="../Collision/Collision.html">Collision</a> collision) {
		<a href="../ContactPoint/ContactPoint.html">ContactPoint</a> contact = collision.contacts[0];
		<a href="../Quaternion/Quaternion.html">Quaternion</a> rot = <a href="../Quaternion/Quaternion.FromToRotation.html">Quaternion.FromToRotation</a>(<a href="../Vector3/Vector3.up.html">Vector3.up</a>, contact.normal);
		<a href="../Vector3/Vector3.html">Vector3</a> pos = contact.point;
		Instantiate(explosionPrefab, pos, rot);
		Destroy(gameObject);
	}
}</code></pre></div>
    <div class="panes">
      <pre><code><span class="notes">// A grenade 
// - instantiates a explosion prefab when hitting a surface
// - then destroys itself
//一枚手榴弹，在击中一个表面时初始化一个爆炸预设，然后销毁</span>
var explosionPrefab : <a href="../Transform/Transform.html">Transform</a>;
function OnCollisionEnter(collision : <a href="../Collision/Collision.html">Collision</a>) {
	<span class="notes">// Rotate the object so that the y-axis faces along the normal of the surface
	//旋转这个物体使y轴面向沿着表面法线的方向</span>
	var contact = collision.contacts[0];
	var rot = <a href="../Quaternion/Quaternion.FromToRotation.html">Quaternion.FromToRotation</a>(<a href="../Vector3/Vector3.up.html">Vector3.up</a>, contact.normal);
	var pos = contact.point;
	Instantiate(explosionPrefab, pos, rot);
	<span class="notes">// Destroy the projectile
	//销毁这个物体</span>
	Destroy (gameObject);
}</code></pre></div>
</div>
<div class="date"><span>最后修改：<!-- #BeginDate format:wfcCh2m -->2011年2月10日 Thursday  21:46<!-- #EndDate --></span></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-8054246454688368";
/* Unity横 */
google_ad_slot = "2374072180";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="">
</script>
<!--right end--></div>
    <div class="clear"></div>
</div>

<div style="padding: 30px; text-align: center; clear:both"><p>本脚本参考基于Unity 3.30f4</p>英文部分版权属&copy;<a href="http://unity3d.com/">Unity</a>公司所有，中文部分&copy;
<a href="http://3d.ceeger.com/">Unity圣典</a> 版权所有，未经许可，严禁转载 。</div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fce93455bb2ae8f76d8b4a8d07db27a24' type='text/javascript'%3E%3C/script%3E"));
</script>
</body>
</html>
