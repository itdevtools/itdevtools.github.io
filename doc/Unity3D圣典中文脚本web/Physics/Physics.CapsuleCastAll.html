<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; " />
<title>Physics.CapsuleCastAll 所有胶囊投射</title>
<meta name="Keywords" content="unity,Physics,CapsuleCastAll,所有胶囊投射" />
<meta name="Description" content="和Physics.CapsuleCast?不同的是这个函数返回所有交互的碰撞体信息。" />
<link href="../Style/CSS/UnityStyle.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../Style/SJ/jquery.min.js"></script>
<script type="text/javascript" src="../Style/SJ/tabs.min.js"></script>
  <script type="text/javascript">
$(function() {
	$("ul.tabs").tabs("> .panes", {initialIndex: 1});
});
</script>

</head>

<body>
<div class="head">
<div class="logo"><a href="/Script"><img src="../Style/Images/unitylogo.png" alt="Unity圣典" width="350" height="80"  title="Unity圣典"/></a></div>
<div class="menu"><a href="/">首页</a><a href="/Script">Unity脚本</a></div>
</div>

<div class="mainbody">
<div class="leftmain">
    	        <ul class="scriptmenu">
          <li><a href="../index.html">Overview</a> <span class="trans">概述</span></li>
            <li><a href="../Runtime.Classes.html">Runtime Classes</a> <span class="trans">实时运行类</span></li>
            <ul>
                <li><a href="../Attributes/Attributes.html">Attributes</a> <span class="trans">属性</span></li>
                <li><a href="../Enumerations/Enumerations.html">Enumerations</a> <span class="trans">枚举</span></li>
            </ul>
            <li><a href="../Editor.Classes.html">Editor Classes</a> <span class="trans">编辑器类</span></li>
            <ul>
                <li><a href="../Editor_Enumerations/Editor.Enumerations.html">Enumerations</a> <span class="trans">枚举</span></li>
            </ul>
            <li>History <span class="trans">历史</span></li>
            <li><a href="../index.Classes.html">Index</a> <span class="trans">总索引</span></li>
        </ul>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8054246454688368";
/* Unity方 */
google_ad_slot = "5047319569";
google_ad_width = 200;
google_ad_height = 200;
//-->
</script>
<script type="text/javascript"
src="">
</script>
        <div class="subclass"><a href="Physics.html">Physics</a><span class="trans">物理学</span><span class="transer">翻译：詹姆斯卡梅隆</span>
                <ul>
                    <li><a href="Physics.bounceThreshold.html">bounceThreshold</a></li>
                    <li><a href="Physics.CapsuleCastAll.html">CapsuleCastAll</a></li>
                    <li><a href="Physics.CapsuleCast.html">CapsuleCast</a></li>
                    <li><a href="Physics.CheckCapsule.html">CheckCapsule</a></li>
                    <li><a href="Physics.CheckSphere.html">CheckSphere</a></li>
                    <li><a href="Physics.GetIgnoreLayerCollision.html">GetIgnoreLayerCollision</a></li>
                    <li><a href="Physics.gravity.html">gravity</a></li>
                    <li><a href="Physics.IgnoreCollision.html">IgnoreCollision</a></li>
                    <li><a href="Physics.IgnoreLayerCollision.html">IgnoreLayerCollision</a></li>
                    <li><a href="Physics.Linecast.html">Linecast</a></li>
                    <li><a href="Physics.maxAngularVelocity.html">maxAngularVelocity</a></li>
                    <li><a href="Physics.minPenetrationForPenalty.html">minPenetrationForPenalty</a></li>
                    <li><a href="Physics.OverlapSphere.html">OverlapSphere</a></li>
                    <li><a href="Physics.RaycastAll.html">RaycastAll</a></li>
                    <li><a href="Physics.Raycast.html">Raycast</a></li>
                    <li><a href="Physics.sleepAngularVelocity.html">sleepAngularVelocity</a></li>
                    <li><a href="Physics.sleepVelocity.html">sleepVelocity</a></li>
                    <li><a href="Physics.solverIterationCount.html">solverIterationCount</a></li>
                    <li><a href="Physics.SphereCastAll.html">SphereCastAll</a></li>
                    <li><a href="Physics.SphereCast.html">SphereCast</a></li>
                </ul>
</div>
    </div>
    <div class="rightmain"><!--right start--><script type="text/javascript"><!--
google_ad_client = "ca-pub-8054246454688368";
/* Unity横 */
google_ad_slot = "2374072180";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="">
</script>
<h1><a href="Physics.html">Physics</a>.CapsuleCastAll 所有胶囊投射</h1>
<p class="h1inherit"></p>
<p>static function <em>CapsuleCastAll</em> (<em>point1</em> : <a href="../Vector3/Vector3.html">Vector3</a>, <em>point2</em> : <a href="../Vector3/Vector3.html">Vector3</a>, <em>radius</em> : float, <em>direction</em> : <a href="../Vector3/Vector3.html">Vector3</a>, <em>distance</em> : float = <a href="../Mathf/Mathf.Infinity.html">Mathf.Infinity,</a> <em>layermask</em> : int = kDefaultRaycastLayers) : RaycastHit[] </p>
<h3>Parameters<span class="trans">参数</span></h3>
<ul class="tableli">
    <li>
      <div class="lititle"><em>point1</em></div>
    	<div class="licontent">The start of the capsule.<br />
    	胶囊的起点</div>
    </li>
    <li>
      <div class="lititle"><em>point2</em></div>
    	<div class="licontent">The end of the capsule.<br />
    	胶囊的结束点</div>
    </li>
    <li>
      <div class="lititle"><em>radius</em></div>
    	<div class="licontent">The radius of the capsule.<br />
    	胶囊的半径</div>
    </li>
    <li>
      <div class="lititle"><em>direction</em></div>
    	<div class="licontent">The direction into which to sweep the capsule.<br />
    	胶囊扫描的方向</div>
    </li>
    <li>
      <div class="lititle"><em>distance</em></div>
    	<div class="licontent">The length of the sweep<br />
    	扫描的长度</div>
    </li>
    <li>
      <div class="lititle"><em>layerMask</em></div>
    	<div class="licontent">A Layer mask that is used to selectively ignore colliders when casting a capsule. <br />根据Layer mask层的不同来忽略碰撞体。
    	</div>
    </li>
</ul>
	
<em>Returns</em>
<p><a href="file:///E:/Program%20Files/Unity/Editor/Data/Documentation/Documentation/ScriptReference/RaycastHit.html">RaycastHit</a>[] - an array of all colliders hit in the sweep.</p>
<p>返回交互碰撞体信息的数组。</p>
<p><em>Description</em><span class="trans">描述</span></p>
<p> Like <a href="Physics.CapsuleCast.html">Physics.CapsuleCast</a>, but this function will return all hits the capsule sweep intersects.</p>
<p>和<a href="Physics.CapsuleCast.html" >Physics.CapsuleCast</a>&nbsp;不同的是这个函数返回所有交互的碰撞体信息。</p>
<p> Casts a capsule against all colliders in the scene and returns detailed information on each collider which was hit.  The capsule is defined by the two spheres with radius around point1 and point2, which form the two ends of the capsule.  Hits are returned all colliders which would collide against this capsule if the capsule was moved along direction.  This is useful when a Raycast does not give enough precision, because you want to find out if an object of a specific size,  such as a character, will be able to move somewhere without colliding with anything on the way. </p>
<p>做一个胶囊物体的投射，对于场景中的所有物体。返回每一个碰撞体的信息。胶囊物体的描述：point1&nbsp;，point2为上下两个结束点，radius为半径。对胶囊物体做投射时，如果和碰撞体碰撞，raycasthit&nbsp;结构返回碰撞信息。这可以用在光线投射无法满足要求时的情况下。例如要判断角色（有空间大小尺寸）是否和一个物体发生碰撞。</p>
<p> 参见： <a href="Physics.SphereCast.html">Physics.SphereCast</a>, <a href="Physics.CapsuleCast.html">Physics.CapsuleCast</a>, <a href="Physics.Raycast.html">Physics.Raycast</a>, <a href="../Rigidbody/Rigidbody.SweepTest.html">Rigidbody.SweepTest</a></p>
<div class="wrap">
	<ul class="tabs">
		<li><a href="#">C#</a></li>
		<li><a href="#">JavaScript</a></li>
	</ul>
    <div class="panes"><pre><code>using UnityEngine;
using System.Collections;

public class example : <a href="../MonoBehaviour/MonoBehaviour.html">MonoBehaviour</a> {
	void Update() {
		RaycastHit[] hits;
		<a href="../CharacterController/CharacterController.html">CharacterController</a> charCtrl = GetComponent&lt;<a href="../CharacterController/CharacterController.html">CharacterController</a>&gt;();
		<a href="../Vector3/Vector3.html">Vector3</a> p1 = transform.position + charCtrl.center + <a href="../Vector3/Vector3.up.html">Vector3.up</a> * -charCtrl.height * 0.5F;
		<a href="../Vector3/Vector3.html">Vector3</a> p2 = p1 + Vector3.up * charCtrl.height;
		hits = Physics.CapsuleCastAll(p1, p2, charCtrl.radius, transform.forward, 10);
		int i = 0;
		while (i &lt; hits.Length) {
			<a href="../RaycastHit/RaycastHit.html">RaycastHit</a> hit = hits[i];
			System.Object renderer = hit.collider.renderer;
			if (renderer) {
				renderer.material.shader = <a href="../Shader/Shader.Find.html">Shader.Find</a>(&quot;Transparent/Diffuse&quot;);
				renderer.material.color.a = 0.3F;
			}
			i++;
		}
	}
}</code></pre></div>
    <div class="panes"><pre><code>function Update () {
	var hits : <a href="../RaycastHit/RaycastHit.html">RaycastHit</a>[];
	var charCtrl : <a href="../CharacterController/CharacterController.html">CharacterController</a> = GetComponent(<a href="../CharacterController/CharacterController.html">CharacterController</a>);
	var p1 : <a href="../Vector3/Vector3.html">Vector3</a> = transform.position + charCtrl.center +
	Vector3.up * (-charCtrl.height*0.5);
	var p2 : <a href="../Vector3/Vector3.html">Vector3</a> = p1 + <a href="../Vector3/Vector3.up.html">Vector3.up</a> * charCtrl.height;
	<span class="notes">// Cast character controller shape 10 meters forward, to see if it is about to hit anything
	//向前投射角色物体10米，是否与其他物体碰撞</span>
	hits = Physics.CapsuleCastAll (p1, p2, charCtrl.radius, transform.forward, 10);

	<span class="notes">// Change the material of all hit colliders
	// to use a transparent Shader
	//改变每一个碰撞体的着色器为透明</span>
	for (var i = 0;i &lt; hits.Length;i++) {
		var hit : <a href="../RaycastHit/RaycastHit.html">RaycastHit</a> = hits[i];
		var renderer = hit.collider.renderer;
		if (renderer) {
			renderer.material.shader = <a href="../Shader/Shader.Find.html">Shader.Find</a>(&quot;Transparent/Diffuse&quot;);
			renderer.material.color.a = 0.3;
		}
	}
}</code></pre></div>
</div>
<div class="date"><span>最后修改：<!-- #BeginDate format:wfcCh2m -->2011年4月9日 Saturday  12:22<!-- #EndDate --></span></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-8054246454688368";
/* Unity横 */
google_ad_slot = "2374072180";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="">
</script>
<!--right end--></div>
    <div class="clear"></div>
</div>

<div style="padding: 30px; text-align: center; clear:both"><p>本脚本参考基于Unity 3.30f4</p>英文部分版权属&copy;<a href="http://unity3d.com/">Unity</a>公司所有，中文部分&copy;
<a href="http://3d.ceeger.com/">Unity圣典</a> 版权所有，未经许可，严禁转载 。</div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fce93455bb2ae8f76d8b4a8d07db27a24' type='text/javascript'%3E%3C/script%3E"));
</script>

</body>
</html>
