<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; " />
<title>MaterialPropertyBlock.AddMatrix 添加矩阵</title>
<meta name="Keywords" content="unity,MaterialPropertyBlock,AddMatrix,添加矩阵" />
<meta name="Description" content="添加一个矩阵材质属性。" />
<link href="../Style/CSS/UnityStyle.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../Style/SJ/jquery.min.js"></script>
<script type="text/javascript" src="../Style/SJ/tabs.min.js"></script>
  <script type="text/javascript">
$(function() {
	$("ul.tabs").tabs("> .panes", {initialIndex: 1});
});
</script>

</head>

<body>
<div class="head">
<div class="logo"><a href="/Script"><img src="../Style/Images/unitylogo.png" alt="Unity圣典" width="350" height="80"  title="Unity圣典"/></a></div>
<div class="menu"><a href="/">首页</a><a href="/Script">Unity脚本</a></div>
</div>

<div class="mainbody">
<div class="leftmain">
    	        <ul class="scriptmenu">
          <li><a href="../index.html">Overview</a> <span class="trans">概述</span></li>
            <li><a href="../Runtime.Classes.html">Runtime Classes</a> <span class="trans">实时运行类</span></li>
            <ul>
                <li><a href="../Attributes/Attributes.html">Attributes</a> <span class="trans">属性</span></li>
                <li><a href="../Enumerations/Enumerations.html">Enumerations</a> <span class="trans">枚举</span></li>
            </ul>
            <li><a href="../Editor.Classes.html">Editor Classes</a> <span class="trans">编辑器类</span></li>
            <ul>
                <li><a href="../Editor_Enumerations/Editor.Enumerations.html">Enumerations</a> <span class="trans">枚举</span></li>
            </ul>
            <li>History <span class="trans">历史</span></li>
            <li><a href="../index.Classes.html">Index</a> <span class="trans">总索引</span></li>
        </ul>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8054246454688368";
/* Unity方 */
google_ad_slot = "5047319569";
google_ad_width = 200;
google_ad_height = 200;
//-->
</script>
<script type="text/javascript"
src="">
</script>
        <div class="subclass"><a href="MaterialPropertyBlock.html">MaterialPropertyBlock</a><span class="transer">翻译：U_鹰 </span>
                <ul>
                    <li><a href="MaterialPropertyBlock.AddColor.html">AddColor</a></li>
                    <li><a href="MaterialPropertyBlock.AddFloat.html">AddFloat</a></li>
                    <li><a href="MaterialPropertyBlock.AddMatrix.html">AddMatrix</a></li>
                    <li><a href="MaterialPropertyBlock.AddVector.html">AddVector</a></li>
                    <li><a href="MaterialPropertyBlock.Clear.html">Clear</a></li>
                </ul>
</div>
    </div>
    <div class="rightmain"><!--right start--><script type="text/javascript"><!--
google_ad_client = "ca-pub-8054246454688368";
/* Unity横 */
google_ad_slot = "2374072180";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="">
</script>
<h1><a href="MaterialPropertyBlock.html">MaterialPropertyBlock</a>.AddMatrix 添加矩阵</h1>
<p class="h1inherit"></p>
<p>function <em>AddMatrix</em> (<em>name</em> : string, <em>value</em> : <a href="../Matrix4x4/Matrix4x4.html">Matrix4x4</a>) : void<br />
function <em>AddMatrix</em> (<em>nameID</em> : int, <em>value</em> : <a href="../Matrix4x4/Matrix4x4.html">Matrix4x4</a>) : void </p>
<p><em>Description</em><span class="trans">描述</span></p>
<p> Add a matrix material property.</p>
<p>添加一个矩阵材质属性。</p>
<p> For performance reasons, the property block can contain only a limited number of property values.  Two 4x4 matrices, six vectors/colors or 12 floats can be stored in the block. Storage space for the values  is shared, so storing one matrix leaves twice less space to store vectors and floats. When block's  storage is filled up, additional Add calls will be ignored. </p>
<p>出于性能原因，属性块只能包含属性值的有限数量。两个4x4矩形，六个向量/颜色或存12个浮点数可以存储在这个块中，存储空间的值被共享，所以存储一个矩阵留下两倍少的空间来存储向量和浮点数。当块的存储空间填满后，额外的Add调用将被忽略。</p>
<p> Function variant that takes nameID is faster. If you are adding properties with the same name repeatedly,  use <a href="../Shader/Shader.PropertyToID.html">Shader.PropertyToID</a> to get unique identifier for the name, and pass the identifier to AddMatrix. </p>
<p>使用nameID的函数变量更快，如果你重复添加相同名称的属性，使用Shader.PropertyToID得到唯一的名称标识，并传递这个标示到AddColor。</p>
<div class="note"><pre><code>var rotateSpeed = 30;
var texture : <a href="../Texture/Texture.html">Texture</a>;
var aMesh : <a href="../Mesh/Mesh.html">Mesh</a>;

<span class="notes">// Create a new material with a shader
// that rotates the texture. Texture rotation
// is performed with a _Rotation matrix.
//创建一个新的材质带有一个旋转纹理shader。纹理选择由一个_Rotation矩阵执行</span>
var m : <a href="../Material/Material.html">Material</a> = new <a href="../Material/Material.html">Material</a> (
	&quot;<a href="../Shader/Shader.html">Shader</a> \&quot;Rotating <a href="../Texture/Texture.html">Texture</a>\&quot; {&quot; +
	&quot;	Properties { _MainTex (\&quot;Base\&quot;, 2D) = \&quot;white\&quot; {} }&quot; +
	&quot;	SubShader {&quot; +
	&quot; 		Pass {&quot; +
	&quot; 			<a href="../Material/Material.html">Material</a> { Diffuse (1,1,1,0) Ambient (1,1,1,0) }&quot; +
	&quot; 			Lighting On&quot; +
	&quot; 			SetTexture [_MainTex] {&quot; +
	&quot; 				matrix [_Rotation]&quot; +
	&quot; 				combine texture * primary double, texture&quot; +
	&quot; 			}&quot; +
	&quot; 		}&quot; +
	&quot;	}&quot; +
	&quot;}&quot;
);
m.mainTexture = texture;


function Update() {
	var materialProperty : MaterialPropertyBlock = new MaterialPropertyBlock();
	<span class="notes">// Construct a rotation matrix and set it for the shader
	//构造一个旋转矩阵并设置它</span>
	var rot : <a href="../Quaternion/Quaternion.html">Quaternion</a> = <a href="../Quaternion/Quaternion.Euler.html">Quaternion.Euler</a> (0, 0, <a href="../Time/Time.time.html">Time.time</a> * rotateSpeed);
	var mtrx : <a href="../Matrix4x4/Matrix4x4.html">Matrix4x4</a> = <a href="../Matrix4x4/Matrix4x4.TRS.html">Matrix4x4.TRS</a> (<a href="../Vector3/Vector3.zero.html">Vector3.zero</a>, rot, <a href="../Vector3/Vector3.html">Vector3</a>(1,1,1) );

	<span class="notes">// Update the rotation matrix.
	//更新这个旋转矩阵</span>
	materialProperty.AddMatrix (&quot;_Rotation&quot;, mtrx);
	<a href="../Graphics/Graphics.DrawMesh.html">Graphics.DrawMesh</a>(aMesh, <a href="../Vector3/Vector3.html">Vector3</a>(-5,0,0), <a href="../Quaternion/Quaternion.identity.html">Quaternion.identity</a>,
	m, 0, null, 0, materialProperty);
}</code></pre></div>

<div class="date"><span>最后修改：<!-- #BeginDate format:wfcCh2m -->2011年3月1日 Tuesday  22:22<!-- #EndDate --></span></div><script type="text/javascript"><!--
google_ad_client = "ca-pub-8054246454688368";
/* Unity横 */
google_ad_slot = "2374072180";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="">
</script>
<!--right end--></div>
    <div class="clear"></div>
</div>

<div style="padding: 30px; text-align: center; clear:both"><p>本脚本参考基于Unity 3.30f4</p>英文部分版权属&copy;<a href="http://unity3d.com/">Unity</a>公司所有，中文部分&copy;
<a href="http://3d.ceeger.com/">Unity圣典</a> 版权所有，未经许可，严禁转载 。</div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fce93455bb2ae8f76d8b4a8d07db27a24' type='text/javascript'%3E%3C/script%3E"));
</script>

</body>
</html>
