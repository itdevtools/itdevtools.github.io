{"version":3,"file":"bundle.js","sources":["../../src/ui/layaMaxUI.ts","../../src/cfg/ConfigAll.ts","../../src/utils/UI.ts","../../src/utils/Msg.ts","../../src/platform/PlatformBase.ts","../../src/utils/DebugTools.ts","../../src/utils/Utils.ts","../../src/controller/sound/SoundCtrl.ts","../../src/game/UserDataEvent.ts","../../src/platform/PlatformUserData.ts","../../src/com.sky1231/Analytics.ts","../../src/com.sky1231/AnaEvent.ts","../../src/game/UserDataCtrl.ts","../../src/platform/WXPlatform.ts","../../src/platform/PlatformFactory.ts","../../src/ads/wx/RewardAD.ts","../../src/ads/wx/BannerAD.ts","../../src/ads/wx/InterstitialAD.ts","../../src/encourage/Encourage.ts","../../src/MainLogic.ts","../../src/view/FriendRankScene.ts","../../src/event/EventCenter.ts","../../src/event/EventType.ts","../../src/game/EnemyGroupCtrl.ts","../../src/utils/Vector3Util.ts","../../src/controller/sound/SoundHelp.ts","../../src/game/PlayerCtrl.ts","../../src/view/RecoverScene.ts","../../src/view/LevelUpScene.ts","../../src/game/GameCtrl.ts","../../src/model/parameters/level/ChildLevelUnit.ts","../../src/model/parameters/level/Levels.ts","../../src/game/LevelCtrl.ts","../../src/view/GameScene.ts","../../src/view/StartScene.ts","../../src/GameConfig.ts","../../src/utils/JsPatch.ts","../../src/Main.ts"],"sourcesContent":["/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport View=Laya.View;\r\nimport Dialog=Laya.Dialog;\r\nimport Scene=Laya.Scene;\nvar REG: Function = Laya.ClassUtils.regClass;\nexport module ui {\r\n    export class FriendRankItemViewUI extends Laya.View {\r\n\t\tpublic imgHead:Laya.Image;\n\t\tpublic txtName:Laya.Label;\n\t\tpublic txtCountLevel:Laya.Label;\n\t\tpublic txtTotalScore:Laya.Label;\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"FriendRankItemView\");\r\n        }\r\n    }\r\n    REG(\"ui.FriendRankItemViewUI\",FriendRankItemViewUI);\r\n    export class FriendRankSceneUI extends Laya.View {\r\n\t\tpublic btnBack:Laya.Button;\n\t\tpublic openDataCanvas:laya.ui.WXOpenDataViewer;\n\t\tpublic boxData:Laya.Box;\n\t\tpublic list:Laya.List;\n\t\tpublic imgNoRank:Laya.Image;\n\t\tpublic myRank:ui.FriendRankItemViewUI;\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"FriendRankScene\");\r\n        }\r\n    }\r\n    REG(\"ui.FriendRankSceneUI\",FriendRankSceneUI);\r\n    export class GameSceneUI extends Laya.View {\r\n\t\tpublic txtScore:Laya.Label;\n\t\tpublic txtLevel:Laya.Label;\n\t\tpublic txtChildLevel:Laya.Label;\n\t\tpublic boxBall:Laya.Box;\n\t\tpublic boxScoreAdd:Laya.Box;\n\t\tpublic boxHandAni:Laya.Box;\n\t\tpublic boxGem:Laya.Box;\n\t\tpublic txtGemNum:Laya.Label;\n\t\tpublic imgGem:Laya.Image;\n\t\tpublic boxGemAdd:Laya.Box;\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"GameScene\");\r\n        }\r\n    }\r\n    REG(\"ui.GameSceneUI\",GameSceneUI);\r\n    export class LevelUpSceneUI extends Laya.View {\r\n\t\tpublic btnNextLvl:Laya.Image;\n\t\tpublic txtScore:Laya.Label;\n\t\tpublic txtTotalScore:Laya.Label;\n\t\tpublic btnRank:Laya.Button;\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"LevelUpScene\");\r\n        }\r\n    }\r\n    REG(\"ui.LevelUpSceneUI\",LevelUpSceneUI);\r\n    export class RecoverSceneUI extends Laya.View {\r\n\t\tpublic btnRecover:Laya.Image;\n\t\tpublic imgGem:Laya.Image;\n\t\tpublic imgShare:Laya.Image;\n\t\tpublic imgVideo:Laya.Image;\n\t\tpublic btnRestart:Laya.Image;\n\t\tpublic btnRank:Laya.Button;\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"RecoverScene\");\r\n        }\r\n    }\r\n    REG(\"ui.RecoverSceneUI\",RecoverSceneUI);\r\n    export class StartSceneUI extends Laya.View {\r\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"StartScene\");\r\n        }\r\n    }\r\n    REG(\"ui.StartSceneUI\",StartSceneUI);\r\n}\r","/**\n* 所有配置\n*/\nexport class ConfigAll {\n    /**版本号 */\n    public static readonly VERSION: string = \"1.0.0\";\n    /**激励相关云控地址 */\n    public static readonly URL_ENCOURAGE_CFG: string = \"https://itdevtools.gitee.io/games/paint_hit/encourage_cfg.json\";\n    /**cpa地址 */\n    public static readonly URL_CPA: string = \"\";\n    /**更多游戏 */\n    public static readonly URL_MORE_GAME: string = \"\";\n    /**更多悬浮窗 */\n    public static readonly URL_FLOAT_GAME: string = \"\";\n    /**激励视频id */\n    public static readonly REWARDED_VIDEOAD_ID: string = \"\";\n    public static readonly BANNER_IDS: Array<string> = [];\n\n    // 资源配置\n    /**场景资源 */\n    public static readonly URL_3D_SCENE: string = \"res/scenes3D/LayaScene_Scene/Conventional/Scene.ls\";\n    public static readonly URL_3D_MAT: string = \"res/scenes3D/LayaScene_Mat/Conventional/Mat.lh\";\n    public static readonly URL_3D_Cylinder: string = \"res/scenes3D/LayaScene_Cylinder/Conventional/Cylinder.lh\";\n    public static readonly URL_3D_Sector: string = \"res/scenes3D/LayaScene_Sector/Conventional/Sector.lh\";\n    public static readonly URL_3D_Ball: string = \"res/scenes3D/LayaScene_Ball/Conventional/Ball.lh\";\n\n    /**音频资源 */\n    public static readonly AUDIO_BGM: string = \"res/audio/bgm.mp3\";\n    public static readonly AUDIO_HITDIE: string = \"res/audio/se_ballhitdie.mp3\";\n    public static readonly AUDIO_LEVELUP_DIE: string = \"res/audio/se_levelup.mp3\";\n    public static readonly AUDIO_STAGEFINISH: string = \"res/audio/se_stagefinish.mp3\";\n\n    // public static readonly URL_LEVELS: Array<any> = [\n    //     { url: \"res/level/lvl1-1.json\", type: Laya.Loader.JSON }\n    // ]\n    public static readonly URL_LEVEL: string = \"res/json/level.json\";\n\n    public static readonly URL_BG0: string = \"bg/0.png\";\n    public static readonly URL_BGS: Array<string> = [ConfigAll.URL_BG0];\n\n    public static readonly URL_COMP: string = \"res/atlas/comp.atlas\";\n\n    /* ---------------------------游戏逻辑配置------------------- */\n    /** 复活需要的宝石数量 */\n    public static readonly RECOVER_REQ_GEM_NUM: number = 5;\n\n    /** 每层圆柱完成得分最大值*/\n    public static readonly CYINLINDER_ADD_SCORE_LIMIT: number = 10;\n    /**撞击到宝石所获的分数翻倍 */\n    public static readonly HIT_GEM_DOUBLE_SCORE: number = 2;\n\n    /** */\n    public static PLAT_SWITCH: PlatSwitch =\n        {\n            \"IS_CREATE_USERINFO_BUTTON\": 0,\n\n            \"SHOW_BANNER_AD_HOMESCENE\": 0,\n            \"SHOW_BANNER_AD_GAMESCENE\": 0,\n            \"SHOW_BANNER_AD_RECOVERSCENE\": 0,\n            \"SHOW_BANNER_AD_GAMESCENE_RATE\": 0,\n            \"SHOW_BANNER_AD_LEVEL_UP_SCENESCENE\": 0,\n            \"SHOW_BANNER_AD_FRIEND_RANKSCENE\": 0,\n            \"SHOW_INS_AD_LEVEL_UPSCENE\": 0,\n            \"SHOW_INS_AD_LEVEL_UPSCENE_RATE\": 0,\n            \"SHOW_REWARD_VIDEO_AD\": 0,\n\n            \"USE_SHARE_TO_REVIVE\": 0,\n            \"USE_VIDEO_TO_REVIVE\": 0\n        }\n\n}\n\n\nexport enum PlatformType {\n\n    DEV = \"dev\",\n    WEB = \"web\",\n    WX = \"wx\",\n    QQ = \"qq\",\n\n}\nexport class LanguagePrefix {\n\n    public static EN_US: string = 'en';\n    public static CN: string = 'cn';\n    public static JP: string = 'jp';\n}\nexport class ControllCenter {\n\n    // ********Debug********\n    public static IS_DEBUG: boolean = false;\n    public static SHOW_LOG: boolean = true;\n    public static SHOW_LOG_TO_SCREEN: boolean = false;\n\n    public static PLATFORM_TYPE: PlatformType = PlatformType.DEV;\n\n    //*********Config********\n    // public static LANGUAGE: string = LanguagePrefix.CN;//这个值在初始化平台后会赋值\n    public static LANGUAGE: string = LanguagePrefix.EN_US;//这个值在初始化平台后会赋值\n\n    public static PVP_ANS_ANI_COST_TIME: number = 2500;\n    public static PVP_ANS_TYPE_ANI_COST_TIME: number = 2100;\n\n    public static KNOCKOUT_ANS_ANI_COST_TIME: number = 2500;\n    public static rewardedVideoAdId: string = \"\";\n\n    /**分享信息 */\n    public static ShareInfo: wx.ShareData = {\n        title: \"球球向上\",\n        imageUrl: \"share_img.png\",\n    }\n}\n\n// ---- 平台开关（分享 广告 。。。）\ninterface PlatSwitch {\n    IS_CREATE_USERINFO_BUTTON: number;// 本游戏暂不需要授权\n    SHOW_BANNER_AD_HOMESCENE: number;\n    SHOW_BANNER_AD_GAMESCENE: number;\n    SHOW_BANNER_AD_GAMESCENE_RATE: number;\n    SHOW_BANNER_AD_RECOVERSCENE: number;\n    SHOW_BANNER_AD_LEVEL_UP_SCENESCENE: number;\n    SHOW_BANNER_AD_FRIEND_RANKSCENE: number;\n    SHOW_INS_AD_LEVEL_UPSCENE: number;\n    SHOW_INS_AD_LEVEL_UPSCENE_RATE: number;\n    SHOW_REWARD_VIDEO_AD: number;\n\n    USE_SHARE_TO_REVIVE: number;\n    USE_VIDEO_TO_REVIVE: number;\n}","/**\n * BKToast.ts\n */\n\n// module utils.ui {\n\nexport class Toast {\n\n    public static debugMsgArray: Array<Laya.Label> = new Array<Laya.Label>();\n\n    public static show(txt: string) {\n\n        let bgRes = \"comp/img_tixing.png\";\n\n        let bg = new Laya.Image(bgRes);\n        bg.zOrder = 1000;\n        bg.sizeGrid = \"0,125,0,125\";\n        Laya.stage.addChild(bg);\n\n        let toastMsg = new Laya.Label(txt);\n        toastMsg.fontSize = 40;\n        toastMsg.color = \"#ffffff\";\n        toastMsg.stroke = 5;\n        toastMsg.strokeColor = \"#000000\";\n        bg.addChild(toastMsg);\n        let offsetX = 50;\n        let offsetY = 10;\n        toastMsg.centerX = 0;\n        toastMsg.centerY = 0;\n        bg.width = Math.max(toastMsg.width + offsetX * 2, 600);\n        bg.height = toastMsg.height + offsetY * 2;\n        bg.centerX = 0;\n        bg.y = Laya.stage.height / 2;\n        let tween = new Laya.Tween();\n        tween.to(bg, { y: bg.y - 500, alpha: 0.2 }, 2000, null, Laya.Handler.create(this, () => {\n            bg.destroy();\n            bg = null;\n\n            toastMsg.destroy();\n            toastMsg = null;\n        }));\n    }\n\n\n\n    public static fixedDisplay(txt: string) {\n\n        let bgRes = \"comp/img_tixing.png\";\n\n        let bg = new Laya.Image(bgRes);\n        bg.alpha = 0.85;\n        bg.zOrder = 1000;\n        bg.sizeGrid = \"0,125,0,125\";\n        Laya.stage.addChild(bg);\n\n        let toastMsg = new Laya.Label(txt);\n        toastMsg.fontSize = 40;\n        toastMsg.color = \"#ffffff\";\n        toastMsg.stroke = 5;\n        toastMsg.strokeColor = \"#000000\";\n        bg.addChild(toastMsg);\n\n        let offsetX = 50;\n        let offsetY = 10;\n        toastMsg.centerX = 0;\n        toastMsg.centerY = 0;\n        bg.width = Math.max(toastMsg.width + offsetX * 2, 600);\n        bg.height = toastMsg.height + offsetY * 2;\n        bg.centerX = 0;\n        bg.y = Laya.stage.height / 2;\n        let tween = new Laya.Tween();\n        tween.to(bg, {}, 2000, null, Laya.Handler.create(this, () => {\n            bg.destroy();\n            bg = null;\n\n            toastMsg.destroy();\n            toastMsg = null;\n        }));\n\n    }\n\n    public static debugShow(txt: string) {\n        let msg = new Laya.Label(txt);\n        msg.width = Laya.stage.width;\n        msg.wordWrap = true;\n        msg.fontSize = 20;\n        msg.color = \"#000000\"\n        let latest = Toast.debugMsgArray[Toast.debugMsgArray.length - 1]\n        Toast.debugMsgArray.push(msg);\n        if (latest) {\n            msg.y = latest.y + latest.height + 18;\n        } else {\n            msg.y = 100;\n        }\n\n        msg.zOrder = 1000;\n        Laya.stage.addChild(msg);\n    }\n\n\n\n}\n\nexport enum MessageBoxType {\n    NONE,\n    SINGLE,\n    ALL,\n}\n\nexport class ButtonAniMaker {\n\n    public static addButtonAni(btn: Laya.Sprite[]): void {\n        btn.forEach(element => {\n            element.on(Laya.Event.MOUSE_DOWN, this, this.ButtonAniHandler, [element]);\n        });\n        // btn.on(Laya.Event.CLICK,this,this.ButtonAniHandler,[btn]);\n    }\n\n    private static ButtonAniHandler(btn: Laya.Button): void {\n        if (!btn[\"mTween\"]) {\n            btn[\"mTween\"] = new Laya.Tween();\n            btn[\"initScaleX\"] = btn.scaleX;\n            btn[\"initScaleY\"] = btn.scaleY;\n        }\n        let initScaleX = Number(btn[\"initScaleX\"]);\n        let initScaleY = Number(btn[\"initScaleY\"]);\n        if (btn.scaleX != initScaleX || btn.scaleY != initScaleY) {\n            return;\n        }\n        btn[\"mTween\"].to(btn, { scaleX: initScaleX - 0.2, scaleY: initScaleY + 0.2 }, 100, Laya.Ease.circIn, new Laya.Handler(this, () => {\n            btn[\"mTween\"].to(btn, { scaleX: initScaleX, scaleY: initScaleY }, 100, Laya.Ease.bounceOut);\n        }))\n    }\n}\n// }\n","interface String {\n    format(...params: any[]): string;\n\n    format(params: { [index: string]: string }): string;\n}\n\n// namespace app {\n// 每个消息中，变量可以使用{0},{1}的方式，或者{param1},{param2}的方式\n// 通过扩展的String.format进行格式化\n// 示例:\n// var t = {\n//     SAMPLE1: '{0} {1}', // t.SAMPLE1.format('hello', 'world')\n//     SAMPLE2: '{h} {w}', // t.SAMPLE2.format({h: 'hello', w: 'world'})\n// }\n\nexport var t = {\n    VERSION: 'v{0}',\n    COMMON_NETWORK_ERROR: '网络连接不正常,请稍后重试',\n    NETWORK_ERROR_CLICK_RELOGIN: '连接异常, 点击重新登录',\n    COMMON_NOT_YET: '暂未开放',\n    CUR_PLATFORM_NOT_SUPPORT: '此平台不支持',\n    UNLAWFUL_NAME: \"请输入6位以内字符\",\n    LOGIN_FAILED: \"登录失败\",\n    GET_USERINFO_FAILD: \"获取用户信息失败\",\n    ACCOUNT_ERROR: \"账号不存在,请注册\",\n    REGISTER_SUCCESS: \"注册成功\",\n    REGISTER_FAILED: \"注册失败\",\n    BUY_SUCCESS: \"购买成功\",\n    SIGN_SUCCESS: \"签到成功\",\n    DAY_INDEX: '第{0}天',\n    NO_REWARD: '暂无奖励',\n    TOKEN_OVERDUE: \"验签过期\",\n    EMPTY_POSITION: \"等待加入\",\n    INVITE_SEND_SUCCESS: \"邀请已发出\",\n    INVITE_INFO: \"来自{0}的游戏邀请\",\n    INPUT_PLAYER_NAME: \"请输入玩家昵称\",\n    ANSWERING: \"答题中\",\n    LOCKED: \"尚未解锁\",\n    UNLOCKED: \"已解锁\",\n    NOT_ADD_SELF: \"不可以添加自己哦\",\n    APPLY_SENDED: \"申请已发送\",\n    APPLY_SENDED_WAIT_ANS: \"申请已发送\",\n    WHO_BE_FRIENDS_SUCCEE: \"{0}已经成为您的好友\",\n    WHO_BE_FRIENDS_FAIL: \"{0}拒绝成为您的好友\",\n    CHAT_CONTENT_IS_EMPTY: \"消息不能为空哦!\",\n    CHAT_CONTENT_LIMIT: \"消息不能超过{0}个字哦!\",\n    COPY_SUCCESS: \"复制成功\",\n    REDEEMCODE_IS_EMPTY: \"请输入兑换码\",\n    GET_SUCCESS: \"领取成功\",\n    NO_GOLD: \"金币不足\",\n    CAN_NOT_GET_GOLD_BY_WATCH_VIDEO: \"还没到领取时间哦!\",\n    HAVE_SIGNED_TODAY: \"今日已签到\",\n    HAVE_GOTTEN_TODAY: \"今日已领取\",\n    TEMPORARILY_UNAVAILABLE: \"暂时不可领取哦\",\n    HAVE_WAIT_TOGET: \"前面还有未领取的奖励哦\",\n    SAVE_TO_PHONE: \"已保存至相册\",\n    // NO_LEADERBOARD_DATA:\"暂无该排行榜数据\",\n    WATCH_ADVIDEO_REWARD_DESC: \"观看广告可获得{0}倍奖励，是否观看？\",\n    ADVTISEMENT_NUM_GET: \"观看广告{0}/{1}次获得\",\n    HAVE_GOTTEN: \"已经领过了哦！\",\n    CUR_LOGIN_DAYS: \"当前累计登录：{0} 天\",\n    UNLOCK_PET_SKILL: \"恭喜解锁技能 {0}\",\n}\n// }\n","import Utils from \"../utils/Utils\";\nimport { Toast } from \"../utils/UI\";\nimport { t } from \"../utils/Msg\";\nimport { IPlatform } from \"./IPlatform\";\nimport { PlatformUserData } from \"./PlatformUserData\";\n\nexport class PlatformBase implements IPlatform {\n\n    protected mNeedUpdateData: boolean = false;\n    protected mIsFailedUpdate: boolean = false;\n\n    public constructor() {\n\n    }\n\n    public init(callback: () => void = null): void {\n\n        if (callback) {\n\n            callback();\n        }\n    }\n\n    protected _enterChannel: string = \"UN-KNOW\";\n    public getEnterChannel(): string {\n        return this._enterChannel;\n    }\n\n    public login(callback?: () => void): void {\n        if (callback) callback();\n    }\n\n    public setLoadingProgress(percent: number): void {\n\n    }\n\n    public startGame(callback: () => void = null): void {\n\n        if (callback) {\n\n            callback();\n        }\n    }\n\n    public downloadGameData(callback: () => void = null): void {\n\n        if (callback) {\n\n            callback();\n        }\n    }\n\n    public updateGameData(refresh: boolean = false, callback: () => void = null): void {\n\n        Laya.timer.once(1000, this, () => {\n\n            if (refresh) {\n\n                this.downloadGameData(() => {\n\n                    if (callback) {\n\n                        callback();\n                    }\n                });\n            } else {\n\n                if (callback) {\n\n                    callback();\n                }\n            }\n        })\n\n    }\n\n    public getRankList(type?: any): Array<PlatformUserData> {\n\n        return null;\n    }\n\n    public refreshRankData(type: string, callback: () => void = null) {\n\n        if (callback) {\n\n            callback();\n        }\n    }\n\n    public onShare(cb: () => { title?: string, imageUrl?: string, query?: string, imageUrlId?: string }) {\n        // Toast.show(t.CUR_PLATFORM_NOT_SUPPORT);\n    }\n\n    public appShare(mTitle?: string, mImageUrl?: string, mQuery?: string, mImageUrlId?: string): void {\n        Toast.show(t.CUR_PLATFORM_NOT_SUPPORT);\n    }\n\n\n    public getSelfData(): PlatformUserData {\n\n        return null;\n    }\n\n    public fetchRewardedAd(callback: () => void = null) {\n\n        if (callback) {\n\n            callback();\n        }\n    }\n\n    public playAd(videoType: number, callback?: (handle) => void) {\n\n        // Laya.timer.once(3000,this,()=>{\n\n        if (callback) {\n\n            callback(0);\n        }\n        // })\n    }\n\n    public fetchBannerAd(callback?: (handle) => void) {\n\n        if (callback) {\n\n            callback(null);\n        }\n    }\n\n    public enterPubAccountCard(pubAccountId: string): void {\n    }\n\n    public openWebView(url: string): void {\n    }\n\n    public share(callback?: (retCode, shareDest, isFirstShare) => void): void {\n\n        if (callback) {\n\n            callback(1, 0, 1);\n        }\n    }\n\n    public createShortcut(callback: (success: boolean) => void) {\n\n        if (callback) {\n\n            callback(false);\n        }\n    }\n\n    public chooseAsync(option: Object = null, callback: () => void = null): void {\n\n        if (callback) {\n\n            callback();\n        }\n    }\n\n    public createAsync(playerID: string, callback: () => void = null): void {\n\n        if (callback) {\n\n            callback();\n        }\n    }\n\n    public setPauseFun(fun: Function): void {\n\n    }\n\n    public registerListener(listener: IPlatformEventListener): void {\n    }\n\n    public unregisterListener(listener: IPlatformEventListener): void {\n    }\n\n    public openServiceConversation(param?: any): void {\n\n        Laya.Browser.window.location.href = \"https://qm.qq.com/cgi-bin/qm/qr?k=DYF4aItR37M1UbmwMgLkI0Y7LBoxsL0R#\";\n    }\n\n    public getMenuButtonBoundingClientRect(): any {\n        // return { \"top\": 27, \"bottom\": 94.5, \"left\": 513, \"right\": 693, \"width\": 180, \"height\": 67.5 };\n        return null;\n    }\n\n    public setClipboardData(data: string, cb: () => void): void {\n        Toast.show(t.CUR_PLATFORM_NOT_SUPPORT);\n    }\n\n    public getClipboardData(cb: (data: string) => void): void {\n        Toast.show(t.CUR_PLATFORM_NOT_SUPPORT);\n    }\n\n    public shareScreenshot(img: any, title: string): void {\n        Toast.show(t.CUR_PLATFORM_NOT_SUPPORT);\n    }\n\n    public saveImgToPhotoAlbum(img: any, cb: () => void): void {\n        Toast.show(t.CUR_PLATFORM_NOT_SUPPORT);\n    }\n    public setUserCloudStorage(data: any): void {\n\n    }\n\n    public getUserInfo(cb: (userInfo: wx.UserInfo) => void): void {\n        return null;\n    }\n\n}","import { ControllCenter } from \"../cfg/ConfigAll\";\r\n\r\nexport class DebugTools {\r\n    private static mInst: DebugTools;\r\n    private static mLogMax: number = 50;\r\n\r\n    private mLogText: Laya.Label\r\n    private mLog: Array<string>;\r\n\r\n    private constructor() {\r\n\r\n        if (ControllCenter.SHOW_LOG_TO_SCREEN) {\r\n\r\n            this.mLogText = new Laya.Label();\r\n            this.mLogText.text = \"\";\r\n            this.mLogText.color = \"#00ff00\"\r\n            this.mLogText.strokeColor = \"#000000\"\r\n            this.mLogText.stroke = 2;\r\n            this.mLogText.fontSize = 24;\r\n            this.mLogText.width = 400;\r\n            this.mLogText.left = 10;\r\n            this.mLogText.top = 0;\r\n            this.mLogText.align = \"left\";\r\n            this.mLogText.zOrder = 10;\r\n            this.mLogText.wordWrap = true;\r\n            Laya.stage.addChild(this.mLogText);\r\n            this.mLog = new Array<string>();\r\n        }\r\n    }\r\n\r\n    public static get inst(): DebugTools {\r\n\r\n        if (DebugTools.mInst == null) {\r\n\r\n            DebugTools.mInst = new DebugTools();\r\n        }\r\n        return DebugTools.mInst;\r\n    }\r\n\r\n    public log(...arg): void {\r\n\r\n        let log = \"\";\r\n        for (let i = 0; i < arg.length; i++) {\r\n\r\n            log += arg[i] + \" \";\r\n        }\r\n\r\n        if (ControllCenter.SHOW_LOG) {\r\n\r\n            console.log(...arg);\r\n        }\r\n        if (ControllCenter.SHOW_LOG && ControllCenter.SHOW_LOG_TO_SCREEN) {\r\n\r\n            this.mLog.unshift(log);\r\n            if (this.mLog.length > DebugTools.mLogMax) {\r\n\r\n                this.mLog.pop();\r\n            }\r\n            let text: string = this.mLog[0];\r\n            for (let i: number = 1; i < this.mLog.length; i++) {\r\n\r\n                text += \"\\n\" + this.mLog[i];\r\n            }\r\n            this.mLogText.text = text;\r\n        }\r\n\r\n    }\r\n}","import { ControllCenter, PlatformType } from \"../cfg/ConfigAll\";\nexport enum SystemType {\n    DEVTOOLS = 'devtools',\n    IOS = \"ios\",\n    ANDROID = 'android',\n    OTHER = 'other'\n}\n\n\nexport interface SystemInfo {\n    Type?: SystemType,\n    model?: string,//手机型号 iPhoneX\n    wxSDKVersion?: string,\n    screenWidth?: number,\n    screenHeight?: number\n}\n\n/**\n * Utils 工具类\n */\n\nexport default class Utils {\n\n    public static goToURL(url: string) {\n        window.location.href = url;\n    }\n\n    public static agentContain(strlowercase: string): boolean {\n\n        var agent = navigator.userAgent.toLowerCase();\n        return agent.indexOf(strlowercase) == -1 ? false : true;\n    }\n\n    public static getSiteURL(): string {\n        return window.location.href;\n    }\n\n    // 获得URL参数\n    public static getURLParameter(name: string, url?: string): string {\n        if (!url) url = Utils.getSiteURL();\n        name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n        var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n            results = regex.exec(url);\n        if (!results) return null;\n        if (!results[2]) return '';\n        return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n    }\n\n    // 获得URL参数\n    public static get(name: string, url?: string): string {\n        if (!url) url = Utils.getSiteURL();\n        name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n        var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n            results = regex.exec(url);\n        if (!results) return null;\n        if (!results[2]) return '';\n        return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n    }\n\n    public static compareVer(ver1: string, ver2: string) {\n        if (ver1 && ver2) {\n            var arr1 = ver1.split('.'),\n                arr2 = ver2.split('.');\n            var minLength = Math.min(arr1.length, arr2.length),\n                position = 0,\n                diff = 0;\n            while (position < minLength && ((diff = parseInt(arr1[position]) - parseInt(arr2[position])) == 0)) {\n                position++;\n            }\n            diff = (diff != 0) ? diff : (arr1.length - arr2.length);\n            return diff > 0;\n        } else {\n            return false;\n        }\n    }\n\n\n\n\n    // 获得URL参数\n    private static systemInfo: SystemInfo;\n    public static getSystemInfo(): SystemInfo {\n        if (Utils.systemInfo) {\n            return Utils.systemInfo;\n        }\n        Utils.systemInfo = {};\n        let res: any;\n        let version: any;\n        switch (ControllCenter.PLATFORM_TYPE) {\n            case PlatformType.DEV:\n            case PlatformType.WEB:\n                let u = navigator.userAgent;\n                var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端\n                let isiOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\n                if (isAndroid) {\n                    Utils.systemInfo.Type = SystemType.ANDROID;\n                } else if (isiOS) {\n                    Utils.systemInfo.Type = SystemType.IOS;\n                } else {\n                    Utils.systemInfo.Type = SystemType.OTHER;\n                }\n\n                Utils.systemInfo.screenWidth = Laya.Browser.clientWidth;\n                Utils.systemInfo.screenHeight = Laya.Browser.clientHeight;\n\n                break;\n            case PlatformType.WX:\n                res = wx.getSystemInfoSync();\n                if (res.platform == \"devtools\") {\n\n                } else if (res.platform == \"ios\") {\n                    Utils.systemInfo.Type = SystemType.IOS;\n                } else if (res.platform == \"android\") {\n                    Utils.systemInfo.Type = SystemType.ANDROID;\n                }\n\n                version = res.SDKVersion;\n                // version = version.replace(/\\./g, \"\");\n                Utils.systemInfo.wxSDKVersion = version;\n                Utils.systemInfo.screenWidth = res.screenWidth;\n                Utils.systemInfo.screenHeight = res.screenHeight;\n\n                Utils.systemInfo.model = res.model;\n\n                break;\n            case PlatformType.QQ:\n                res = wx.getSystemInfoSync();\n                if (res.platform == \"devtools\") {\n                    Utils.systemInfo.Type = SystemType.DEVTOOLS;\n                } else if (res.platform == \"ios\") {\n                    Utils.systemInfo.Type = SystemType.IOS;\n                } else if (res.platform == \"android\") {\n                    Utils.systemInfo.Type = SystemType.ANDROID;\n                }\n\n                version = res.SDKVersion;\n                // version = version.replace(/\\./g, \"\");\n                Utils.systemInfo.wxSDKVersion = version;\n                Utils.systemInfo.screenWidth = res.screenWidth;\n                Utils.systemInfo.screenHeight = res.screenHeight;\n\n                Utils.systemInfo.model = res.model;\n\n                break;\n        }\n\n        // Utils.ui.Toast.debugShow(\"systemInfo:\" + JSON.stringify(systemInfo));\n        // Utils.ui.Toast.debugShow(\"res:\" + JSON.stringify(res));\n        return Utils.systemInfo;\n\n\n    }\n\n    // 格式化秒到 type 1: 00:00:00 2:00小时00分00秒\n    public static formatSeconds(value: number, type: number = 1): string {\n        let theTime: number = Math.floor(value);// 秒\n        let theTime1: number = 0;// 分\n        let theTime2: number = 0;// 小时\n        if (theTime >= 60) {\n            theTime1 = Math.floor(theTime / 60);\n            theTime = theTime % 60;\n            if (theTime1 >= 60) {\n                theTime2 = Math.floor(theTime1 / 60);\n                theTime1 = theTime1 % 60;\n            }\n        }\n        let ret: string = \"\";\n        if (type == 3) {\n            if (theTime2 > 0) {\n                ret = theTime2 + \"小时\";\n                if (theTime1 > 0)\n                    ret += theTime1 + \"分钟\";\n            }\n            else if (theTime1 > 0) {\n                ret = theTime1 + \"分钟\";\n                if (theTime > 0)\n                    ret += theTime + \"秒\";\n            }\n            else {\n                ret = theTime + \"秒\";\n            }\n        }\n        else if (type == 2) {\n            if (theTime2 > 0)\n                ret = theTime2 + \"小时\" + theTime1 + \"分\" + theTime + \"秒\";\n            else if (theTime1 > 0)\n                ret = theTime1 + \"分\" + theTime + \"秒\";\n            else\n                ret = theTime + \"秒\";\n\n        } else {\n            if (theTime < 10)\n                ret = \"0\" + theTime;\n            else\n                ret = theTime + \"\";\n\n            if (theTime1 < 10)\n                ret = \"0\" + theTime1 + \":\" + ret;\n            else\n                ret = theTime1 + \":\" + ret;\n\n            if (theTime2 < 10)\n                ret = \"0\" + theTime2 + \":\" + ret;\n            else\n                ret = theTime2 + \":\" + ret;\n        }\n        return ret;\n    }\n\n    private static chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    public static toBase64(buffer: ArrayBuffer): string {\n        let bytes: Uint8Array = new Uint8Array(buffer);\n        let len: number = bytes.length;\n        let base64: string = \"\";\n\n        for (let i: number = 0; i < len; i += 3) {\n            base64 += Utils.chars[bytes[i] >> 2];\n            base64 += Utils.chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n            base64 += Utils.chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n            base64 += Utils.chars[bytes[i + 2] & 63];\n        }\n\n        if ((len % 3) === 2) {\n            base64 = base64.substring(0, base64.length - 1) + \"=\";\n        } else if (len % 3 === 1) {\n            base64 = base64.substring(0, base64.length - 2) + \"==\";\n        }\n        return base64;\n    }\n\n    public static getRatio(): number {\n        return Utils.getSystemInfo().screenWidth / Laya.stage.width;\n    }\n\n    /**\n     * 数组中随机取几个元素\n     * @param arr \n     * @param count \n     */\n    public static getRandomArrayElements(arr: Array<any>, count: number): Array<any> {\n        var shuffled = arr.slice(0), i = arr.length, min = i - count, temp, index;\n        while (i-- > min) {\n            index = Math.floor((i + 1) * Math.random());\n            temp = shuffled[index];\n            shuffled[index] = shuffled[i];\n            shuffled[i] = temp;\n        }\n        return shuffled.slice(min);\n    }\n\n    private static storageName: string = \"\";\n    /**是否是微信小游戏环境 */\n    public static get isWXMiniGame(): boolean {\n        return Laya.Browser.onMiniGame;\n    }\n    /**\n\t\t * 获取本地存储数据 \n\t\t * @param key \n\t\t * @param type 默认string，如果要返回number，传number\n\t\t * @param defaultNumber 返回number情况下，默认0\n\t\t */\n    public static getStorageData(key: string, type: string = \"string\", defaultNumber: number = 0, needPre: boolean = true): any {\n        var data: string;\n        var pre: string = needPre ? Utils.storageName : \"\";\n        if (Utils.isWXMiniGame) {\n            data = Laya.Browser.window.wx.getStorageSync(pre + key);\n        }\n        else {\n            data = Laya.LocalStorage.getItem(pre + key);\n        }\n        if (type == \"number\") {\n            if (data)\n                return Number(data);\n            else\n                return defaultNumber;\n        }\n        return data;\n    }\n\n    /**存储本地数据 */\n    public static setStorageData(key: string, value: string | number, needPre: boolean = true) {\n        var pre: string = needPre ? Utils.storageName : \"\";\n        if (Utils.isWXMiniGame) {\n            Laya.Browser.window.wx.setStorageSync(pre + key, value + \"\");\n        }\n        else {\n            Laya.LocalStorage.setItem(pre + key, value + \"\");\n        }\n    }\n\n    /**获取当前时间 */\n    public static get now(): number {\n        return Laya.Browser.now();\n    }\n\n    /**是否是今天 */\n    public static isToday(time: number, now: number = 0): boolean {\n        now = now ? now : Utils.now;\n        var t: Date = new Date(time);\n        var n: Date = new Date(now);\n        if (t.getFullYear() == n.getFullYear() && t.getMonth() == n.getMonth() && t.getDate() == n.getDate())\n            return true;\n        else\n            return false;\n    }\n\n}\n","import Utils from \"../../utils/Utils\";\r\nexport class SoundCtrl {\r\n    private static _instance: SoundCtrl;\r\n    public static get instance(): SoundCtrl {\r\n        if (!this._instance) {\r\n            this._instance = new SoundCtrl();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    private sounds: any = {};\r\n    /**播放音效 */\r\n    public playSound(url: string, loop: number = 1, startTime: number = 0): void {\r\n        if (Utils.isWXMiniGame) {\r\n            var audio;\r\n            if (this.sounds[url])\r\n                audio = this.sounds[url];\r\n            else {\r\n                audio = wx.createInnerAudioContext()\r\n                audio.src = url // src 可以设置 http(s) 的路径，本地文件路径或者代码包文件路径\r\n                audio.loop = loop == 0;\r\n                // audio.volume = 0.5;\r\n                this.sounds[url] = audio;\r\n            }\r\n            audio.startTime = startTime;\r\n            audio.play();\r\n        }\r\n        else\r\n            Laya.SoundManager.playSound(url, loop);\r\n    }\r\n\r\n    public stopSound(url: string): void {\r\n        if (Utils.isWXMiniGame) {\r\n            if (this.sounds[url]) {\r\n                var audio = this.sounds[url];\r\n                audio.stop();\r\n            }\r\n        }\r\n        else {\r\n            Laya.SoundManager.stopSound(url);\r\n        }\r\n    }\r\n\r\n    private _currentBg: string;\r\n    private _musicAudio: any;\r\n    /**播放背景音乐 */\r\n    public playMusic(url: string, loop: number = 0): void {\r\n        if (url)\r\n            this._currentBg = url;\r\n        if (this._currentBg) {\r\n            // if (tools.Utils.isWXMiniGame) {\r\n            //     if (!this._musicAudio)\r\n            //         this._musicAudio = Laya.Browser.window.wx.createInnerAudioContext()\r\n            //     this._musicAudio.src = weixin.WXAPI.basePath + this._currentBg; // src 可以设置 http(s) 的路径，本地文件路径或者代码包文件路径\r\n            //     this._musicAudio.loop = loop == 0;\r\n            //     this._musicAudio.play()\r\n            // }\r\n            // else\r\n            Laya.SoundManager.playMusic(this._currentBg, loop);\r\n        }\r\n    }\r\n    /**停止音乐 */\r\n    public stopMusic(): void {\r\n        this._currentBg = null;\r\n        // if (tools.Utils.isWXMiniGame) {\r\n        //     if (this._musicAudio)\r\n        //         this._musicAudio.stop();\r\n        // }\r\n        // else\r\n        Laya.SoundManager.stopMusic();\r\n    }\r\n\r\n    public playCurrentMusic(): void {\r\n        this.playMusic(this._currentBg);\r\n    }\r\n}","export class UserDataEvent {\r\n\tpublic static IS_FIRST_PLAY: string = \"IS_FIRST_PLAY\";\r\n\tpublic static LEVEL_INDEX: string = \"LEVEL_INDEX\";\r\n\tpublic static GEM_NUM: string = \"GEM_NUM\";\r\n\tpublic static SCORE: string = \"SCORE\";\r\n\tpublic static VIBRATE: string = \"VIBRATE\";\r\n\tpublic static SOUND: string = \"SOUND\";\r\n\tpublic static MUSIC: string = \"MUSIC\";\r\n\tpublic static MAX_SCORE: string = \"MAX_SCORE\";\r\n\tpublic static GAME_TODAY: string = \"GAME_TODAY\";\r\n\tpublic static LEFT_SCORE: string = \"LEFT_SCORE\";\r\n\tpublic static MAX_RELAY_SCORE: string = \"MAX_RELAY_SCORE\";\r\n\tpublic static UNLOCK_SKIN: string = \"UNLOCK_SKIN_\";\r\n\tpublic static USED_SKIN: string = \"USED_SKIN\";\r\n\tpublic static BLACK_COUNT: string = \"BLACK_COUNT\";\r\n\tpublic static LOGIN_COUNT: string = \"LOGIN_COUNT\";\r\n\tpublic static LAST_LOGIN: string = \"LAST_LOGIN\";\r\n\tpublic static INVITE_COUNT: string = \"INVITE_COUNT\";\r\n\tpublic static DOUBLE_DATA: string = \"DOUBLE_DATA\";\r\n\tpublic static GOLD: string = \"GOLD\";\r\n\tpublic static COMBO_WIN: string = \"COMBO_WIN\";\r\n\tpublic static REVIVE_COUNT: string = \"REVIVE_COUNT\";\r\n}","export class PlatformUserData {\r\n\r\n    public contextID: string;\r\n    public avatarUrl: string;\r\n    public nickName: string;\r\n    public score: number;\r\n    public rank: number;\r\n    public isSelf: boolean;\r\n}","import Utils from \"../utils/Utils\";\n\nexport class Analytics {\n    // private static _instance: Analytics;\n    // public static get instance(): Analytics {\n    //     if (!Analytics._instance)\n    //         Analytics._instance = new Analytics();\n    //     return Analytics._instance;\n    // }\n\n    /**\n     * 事件功能\n     * @param eventName\n     * @param value\n     *\n     *  */\n    public static sendEvent(eventName: string | number, value?: Object): void {\n        if (!Utils.isWXMiniGame) return;\n        wx.aldSendEvent(String(eventName), value);\n    }\n\n    /**\n    * 上报openID\n    * @param openId \n    */\n    public static sendOpenid(openId: string): void {\n        wx.aldSendOpenid(openId);\n    }\n\n}","/**\r\n* 分析（埋点）事件\r\n*/\r\nexport class AnaEvent {\r\n\t/**游戏版本号 */\r\n\tpublic static readonly GAME_VER: number = 100001;\r\n\t/**代码主逻辑开始 */\r\n\tpublic static readonly CODE_START: number = 100002;\r\n\t/**初始化完毕 */\r\n\tpublic static readonly INIT_FINISH: number = 100003;\r\n\r\n\t/**--------------------------------------------插屏广告事件 begin ----------------------------------------*/\r\n\r\n\t/**插屏加载完成 */\r\n\tpublic static readonly INTERSTITIALAD_LOAD_SUCCESS: number = 200001;\r\n\t/**插屏加载失败 */\r\n\tpublic static readonly INTERSTITIALAD_LOAD_ERROR: number = 200002;\r\n\t/**去除插屏 */\r\n\tpublic static readonly CLOSE_INTER: number = 200003;\r\n\t/**去除banner */\r\n\tpublic static readonly CLOSE_BANNER: number = 200004;\r\n\t/**插屏加载失败 */\r\n\tpublic static readonly INTERSTITIALAD_CATCH_ERROR: number = 200005;\r\n\t/**去除插屏 */\r\n\tpublic static readonly CLOSE_INTER_SUCC: number = 200006;\r\n\t/**去除banner */\r\n\tpublic static readonly CLOSE_BANNER_SUCC: number = 200007;\r\n\r\n\t/**-------------------------------------------- 分享 begin----------------------------------------*/\r\n\t/**用户自主分享 */\r\n\tpublic static readonly SHARE_FOR_NONE: number = 300001;\r\n\t/**复活分享 */\r\n\tpublic static readonly SHARE_FOR_REVIVE: number = 300002;\r\n\r\n\t/**-------------------------------------------- 视频 begin----------------------------------------*/\r\n\t/**用户自主观看视频 */\r\n\tpublic static readonly VIDEO_FOR_NONE: number = 400001;\r\n\t/**复活视频 */\r\n\tpublic static readonly VIDEO_FOR_REVIVE: number = 400002;\r\n\r\n\r\n\t/**-------------------------------------------- 用户数据变化 begin----------------------------------------*/\r\n\r\n\t/**破纪录 */\r\n\tpublic static readonly GET_MAX_SCORE: number = 600001;\r\n\r\n\t/**达到关卡 */\r\n\tpublic static readonly LEVEL: number = 600002;\r\n\r\n\t/**宝石数 */\r\n\tpublic static readonly GEM_NUM: number = 600003;\r\n\r\n\t/**-------------------------------------------- 用户行为 begin----------------------------------------*/\r\n\r\n\t/**空白复活按钮（只有开发阶段有） */\r\n\tpublic static readonly BTN_REVIVE_NONE: number = 800001;\r\n\t/**按钮-宝石复活 */\r\n\tpublic static readonly BTN_REVIVE_GEM: number = 800002;\r\n\t/**按钮-分享复活 */\r\n\tpublic static readonly BTN_REVIVE_SHARE: number = 800003;\r\n\t/**按钮-视频复活 */\r\n\tpublic static readonly BTN_REVIVE_VIDEO: number = 800004;\r\n\t/**成功复活-宝石 */\r\n\tpublic static readonly REVIVE_FROM_GEM: number = 800005;\r\n\t/**成功复活-分享 */\r\n\tpublic static readonly REVIVE_FROM_SHARE: number = 800006;\r\n\t/**成功复活-视频 */\r\n\tpublic static readonly REVIVE_FROM_VIDEO: number = 800007;\r\n\r\n\t/**按钮-重新开始 */\r\n\tpublic static readonly BTN_RESTART: number = 800101;\r\n\t/**按钮—复活界面的排行榜按钮 */\r\n\tpublic static readonly BTN_RANK_OF_RECOVER_SCENE: number = 800102;\r\n\r\n\t/**按钮-过关界面的下一关 */\r\n\tpublic static readonly BTN_NEXTLVL: number = 800201;\r\n\t/**按钮—过关界面的排行榜按钮 */\r\n\tpublic static readonly BTN_RANK_OF_LEVL_UP_SCENE: number = 800202;\r\n\r\n\r\n}","import Utils from \"../utils/Utils\";\r\nimport { UserDataEvent } from \"./UserDataEvent\";\r\nimport { SoundCtrl } from \"../controller/sound/SoundCtrl\";\r\nimport { PlatformUserData } from \"../platform/PlatformUserData\";\r\nimport { MainLogic } from \"../MainLogic\";\r\nimport { Analytics } from \"../com.sky1231/Analytics\";\r\nimport { AnaEvent } from \"../com.sky1231/AnaEvent\";\r\n\r\nexport class NoSaveData {\r\n\tpublic readyAddScore: number;\r\n}\r\n\r\nexport class UserDataCtrl {\r\n\tprivate static _instance: UserDataCtrl;\r\n\tpublic static get instance(): UserDataCtrl {\r\n\t\tif (!UserDataCtrl._instance)\r\n\t\t\tUserDataCtrl._instance = new UserDataCtrl();\r\n\t\treturn UserDataCtrl._instance;\r\n\t}\r\n\r\n\tprivate _userData: PlatformUserData;\r\n\tpublic get userData(): PlatformUserData {\r\n\t\tif (!this._userData) this._userData = new PlatformUserData();\r\n\t\treturn this._userData;\r\n\t}\r\n\tpublic set userData(value: PlatformUserData) {\r\n\t\tif (!this._userData) this._userData = new PlatformUserData();\r\n\t\tthis._userData = value;\r\n\t}\r\n\r\n\tpublic noCacheData: NoSaveData = new NoSaveData();\r\n\r\n\tprivate _isFirstPlay: number;\r\n\tprivate _levelIndex: number;\r\n\tprivate _gemNum: number;\r\n\tprivate _score: number;\r\n\tprivate _maxScore: number;\r\n\tprivate _maxRelayScore: number;\r\n\tprivate _currentScore: number;\r\n\tprivate _dayInviteScore: number;\r\n\tprivate _historyInviteScore: number;\r\n\tprivate _gameCountToday: number;\r\n\tprivate _gameCountCurrent: number;\r\n\tprivate _blackCount: number;\r\n\tprivate _loginCount: number;\r\n\tprivate _inviteCount: number;\r\n\tprivate _isTodayDouble: boolean;\r\n\tprivate _gold: number;\r\n\tprivate _comboWinCount: number;\r\n\tprivate _reviveCount: number;\r\n\tprivate _customGold: number;\r\n\tprivate _crazyLevel: number;\r\n\tprivate _crazyPro: number;\r\n\tprivate _crazyFrame: number;\r\n\r\n\t/**初始化 */\r\n\tpublic init(): void {\r\n\t\tthis._isFirstPlay = this.getStorageData(UserDataEvent.IS_FIRST_PLAY, \"number\", 1);\r\n\t\tthis._levelIndex = this.getStorageData(UserDataEvent.LEVEL_INDEX, \"number\", 1);\r\n\t\tthis._gemNum = this.getStorageData(UserDataEvent.GEM_NUM, \"number\", 0);\r\n\t\tthis._score = this.getStorageData(UserDataEvent.SCORE, \"number\", 0);\r\n\t\tthis._maxScore = this.getStorageData(UserDataEvent.MAX_SCORE, \"number\");\r\n\t\tthis._maxRelayScore = this.getStorageData(UserDataEvent.MAX_RELAY_SCORE, \"number\");\r\n\t\tthis._inviteCount = this.getStorageData(UserDataEvent.INVITE_COUNT, \"number\");\r\n\t\tthis._gold = this.getStorageData(UserDataEvent.GOLD, \"number\");\r\n\t\t// this._gold = 100000;\r\n\t\tthis._comboWinCount = this.getStorageData(UserDataEvent.COMBO_WIN, \"number\");\r\n\t\tthis._reviveCount = this.getStorageData(UserDataEvent.REVIVE_COUNT, \"number\");\r\n\t\tif (this._inviteCount > 80)\r\n\t\t\tthis._inviteCount = 80;\r\n\t\tvar doubleData: number = this.getStorageData(UserDataEvent.DOUBLE_DATA, \"number\");\r\n\t\tif (doubleData && Utils.isToday(doubleData)) {\r\n\t\t\tthis._isTodayDouble = true;\r\n\t\t}\r\n\t\t// this._inviteCount = 1;\r\n\t\t// this._isTodayDouble = true;\r\n\r\n\t\tthis.uploadScoreAndLevels(this.score, this.levelIndex - 1);\r\n\t\tthis._gameCountToday = this.getStorageData(UserDataEvent.GAME_TODAY, \"number\");\r\n\t\tthis._gameCountCurrent = 0;\r\n\t\tthis._currentScore = this.getStorageData(UserDataEvent.LEFT_SCORE, \"number\");\r\n\t\tthis._blackCount = this.getStorageData(UserDataEvent.BLACK_COUNT, \"number\");\r\n\r\n\r\n\t\tvar lastLogin: number = this.getStorageData(UserDataEvent.LAST_LOGIN, \"number\");\r\n\t\tif (lastLogin) {\r\n\t\t\tthis._loginCount = this.getStorageData(UserDataEvent.LOGIN_COUNT, \"number\");\r\n\t\t\tif (!Utils.isToday(lastLogin)) {\r\n\t\t\t\tthis._loginCount++;\r\n\t\t\t\tthis.setStorageData(UserDataEvent.LAST_LOGIN, Utils.now);\r\n\t\t\t\tthis.setStorageData(UserDataEvent.LOGIN_COUNT, this._loginCount);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._loginCount = 1;\r\n\t\t\tthis.setStorageData(UserDataEvent.LAST_LOGIN, Utils.now);\r\n\t\t\tthis.setStorageData(UserDataEvent.LOGIN_COUNT, this._loginCount);\r\n\t\t}\r\n\r\n\t\tvar vibrate: string = this.getStorageData(UserDataEvent.VIBRATE);\r\n\t\tif (vibrate)\r\n\t\t\tthis._vibrate = vibrate == \"1\";\r\n\t\telse\r\n\t\t\tthis._vibrate = true;\r\n\r\n\t\tvar sound: string = this.getStorageData(UserDataEvent.SOUND);\r\n\t\tif (sound)\r\n\t\t\tthis._sound = sound == \"1\";\r\n\t\telse\r\n\t\t\tthis._sound = true;\r\n\r\n\t\tvar music: string = this.getStorageData(UserDataEvent.MUSIC);\r\n\t\tif (music)\r\n\t\t\tthis._music = music == \"1\";\r\n\t\telse\r\n\t\t\tthis._music = true;\r\n\r\n\t\t// this.resetScore();\r\n\t\t// this.setColors();\r\n\t}\r\n\r\n\t/**是否开启震动 */\r\n\tprivate _vibrate: boolean;\r\n\t/**设置震动是否开启 */\r\n\tpublic set vibrate(value: boolean) {\r\n\t\tthis._vibrate = value;\r\n\t\tthis.setStorageData(UserDataEvent.VIBRATE, value ? 1 : 0);\r\n\t}\r\n\t/**是否开启震动 */\r\n\tpublic get vibrate(): boolean {\r\n\t\treturn this._vibrate;\r\n\t}\r\n\r\n\t/**是否开启音效 */\r\n\tprivate _sound: boolean;\r\n\t/**设置音效是否开启 */\r\n\tpublic set sound(value: boolean) {\r\n\t\tthis._sound = value;\r\n\t\tthis.setStorageData(UserDataEvent.SOUND, value ? 1 : 0);\r\n\t}\r\n\t/**是否开启音效 */\r\n\tpublic get sound(): boolean {\r\n\t\treturn this._sound;\r\n\t}\r\n\r\n\t/**是否开启音效 */\r\n\tprivate _music: boolean;\r\n\t/**设置音效是否开启 */\r\n\tpublic set music(value: boolean) {\r\n\t\tthis._music = value;\r\n\t\tthis.setStorageData(UserDataEvent.MUSIC, value ? 1 : 0);\r\n\t\tif (!this._music)\r\n\t\t\tSoundCtrl.instance.stopMusic();\r\n\t}\r\n\t/**是否开启音效 */\r\n\tpublic get music(): boolean {\r\n\t\treturn this._music;\r\n\t}\r\n\r\n\tpublic set inviteCount(v: number) {\r\n\t\tthis._inviteCount = v;\r\n\t\tthis.setStorageData(UserDataEvent.INVITE_COUNT, this._inviteCount);\r\n\t}\r\n\r\n\tpublic get inviteCount(): number {\r\n\t\treturn this._inviteCount;\r\n\t}\r\n\r\n\tpublic set isTodayDouble(v: boolean) {\r\n\t\tif (!this._isTodayDouble) {\r\n\t\t\tthis._isTodayDouble = true;\r\n\t\t\tthis.setStorageData(UserDataEvent.DOUBLE_DATA, Utils.now);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic get isTodayDouble(): boolean {\r\n\t\treturn this._isTodayDouble;\r\n\t}\r\n\r\n\tpublic get gold(): number {\r\n\t\treturn this._gold;\r\n\t}\r\n\r\n\tpublic addGold(value: number): void {\r\n\t\tthis._gold += value;\r\n\t\tif (this._gold < 0)\r\n\t\t\tthis._gold = 0;\r\n\t\t// wlf.tools.Dispatcher.dispatch(config.DispatcherEvent.UPDATE_GOLD);\r\n\t\tthis.setStorageData(UserDataEvent.GOLD, this._gold);\r\n\t}\r\n\r\n\tpublic get customGold(): number {\r\n\t\treturn this._customGold;\r\n\t}\r\n\r\n\tpublic addCustomGold(per: number): void {\r\n\t\t/**(1+连胜关卡/10)*（10+关卡序号） */\r\n\t\tthis.addGold(per * this._customGold);\r\n\t}\r\n\r\n\tprivate _tmpAllScore: number;\r\n\tprivate checkMaxScore(): void {\r\n\t\tthis._tmpAllScore = this.allScore;\r\n\t\tif (this._tmpAllScore > this._maxScore) {\r\n\t\t\tthis._maxScore = this._tmpAllScore;\r\n\t\t\tMainLogic.instance.platform.setUserCloudStorage([{ \"key\": \"friend\", \"value\": JSON.stringify({ score: this._maxScore }) }]);\r\n\t\t\tthis.setStorageData(UserDataEvent.MAX_SCORE, this._maxScore);\r\n\t\t\tAnalytics.sendEvent(AnaEvent.GET_MAX_SCORE, { maxScore: this._maxScore });\r\n\t\t\tif (this._maxScore >= 500) {\r\n\t\t\t\t// netLocal.LoginManager.instance.submitMaxScore(this._maxScore);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setStorageData(UserDataEvent.BLACK_COUNT, this._blackCount);\r\n\t}\r\n\r\n\tpublic recordLevelIndex(levelIndex: number): void {\r\n\t\tthis._levelIndex = levelIndex;\r\n\t\tthis.setStorageData(UserDataEvent.LEVEL_INDEX, levelIndex);\r\n\t\tAnalytics.sendEvent(AnaEvent.LEVEL, { levelIndex: levelIndex });\r\n\t}\r\n\tpublic get levelIndex(): number {\r\n\t\treturn this._levelIndex;\r\n\t}\r\n\r\n\tpublic setIsirstPlay2False(): void {\r\n\t\tthis._isFirstPlay = 0;\r\n\t\tthis.setStorageData(UserDataEvent.IS_FIRST_PLAY, 0);\r\n\t}\r\n\tpublic get isFirstPlay(): boolean {\r\n\t\treturn this._isFirstPlay == 1;\r\n\t}\r\n\r\n\tpublic recordGemNum(gemNum: number): void {\r\n\t\tthis.setStorageData(UserDataEvent.GEM_NUM, gemNum);\r\n\t\tthis._gemNum = gemNum;\r\n\t\tAnalytics.sendEvent(AnaEvent.GEM_NUM, { gemNum: gemNum });\r\n\t}\r\n\tpublic get gemNum(): number {\r\n\t\treturn this._gemNum;\r\n\t}\r\n\r\n\tpublic recordScore2(score: number): void {\r\n\t\tif (this.score != score) {\r\n\t\t\tthis._score = score;\r\n\t\t\tthis.setStorageData(UserDataEvent.SCORE, score);\r\n\t\t\tMainLogic.instance.platform.setUserCloudStorage([{ \"key\": \"friend\", \"value\": JSON.stringify({ score: this._score }) }]);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic recordScoreAndLevels(score: number, countClearLvls): void {\r\n\t\tif (this.score != score) {\r\n\t\t\tthis._score = score;\r\n\t\t\tthis.setStorageData(UserDataEvent.SCORE, score);\r\n\t\t\tthis.uploadScoreAndLevels(score, countClearLvls)\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * 上报数据\r\n\t * @param score \r\n\t * @param countClearLvls \r\n\t */\r\n\tprivate uploadScoreAndLevels(score: number, countClearLvls): void {\r\n\t\tMainLogic.instance.platform.setUserCloudStorage([{\r\n\t\t\t\"key\": \"friend\", \"value\": JSON.stringify(\r\n\t\t\t\t{\r\n\t\t\t\t\twxgame: {\r\n\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\tcountClearLvls: countClearLvls\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t\t]);\r\n\t}\r\n\r\n\tpublic get score(): number {\r\n\t\treturn this._score;\r\n\t}\r\n\r\n\t// public get comboWinCount(): number {\r\n\t// \treturn this._comboWinCount;\r\n\t// }\r\n\r\n\tprivate _customBallColor: Laya.Vector4;\r\n\tprivate _customBallTexture: string;\r\n\tprivate _tmpNormal: number;\r\n\r\n\tprivate _customLayerColorBegin: Laya.Vector4;\r\n\tprivate _customLayerColorEnd: Laya.Vector4;\r\n\r\n\tpublic get bgIndex(): number {\r\n\t\treturn this.levelIndex % 6;\r\n\t}\r\n\r\n\tprivate _tmpShapeIndex: number;\r\n\t// public get shapeIndex(): number {\r\n\t// \tif (wlf.weixin.WXAPI.isLowPhone) {\r\n\t// \t\tthis._tmpShapeIndex = this.customLevel % 6;\r\n\t// \t\tif (this._tmpShapeIndex % 2 == 0)\r\n\t// \t\t\treturn this._tmpShapeIndex;\r\n\t// \t\telse\r\n\t// \t\t\treturn this._tmpShapeIndex - 1;\r\n\t// \t}\r\n\t// \telse\r\n\t// \t\treturn this.customLevel % 6;\r\n\t// }\r\n\r\n\tpublic get ballColor(): Laya.Vector4 {\r\n\t\treturn this._customBallColor;\r\n\t}\r\n\r\n\tpublic get ballTexture(): string {\r\n\t\treturn this._customBallTexture;\r\n\t}\r\n\r\n\tprivate _tmpLayerColor: Laya.Vector4 = new Laya.Vector4(0, 0, 0, 1);\r\n\tprivate _tmpPer: number;\r\n\tpublic getCustomLayerColor(index: number, max: number): Laya.Vector4 {\r\n\t\tthis._tmpPer = index / (max - 1);\r\n\t\tthis._tmpLayerColor.x = this._customLayerColorBegin.x + this._tmpPer * (this._customLayerColorEnd.x - this._customLayerColorBegin.x);\r\n\t\tthis._tmpLayerColor.y = this._customLayerColorBegin.y + this._tmpPer * (this._customLayerColorEnd.y - this._customLayerColorBegin.y);\r\n\t\tthis._tmpLayerColor.z = this._customLayerColorBegin.z + this._tmpPer * (this._customLayerColorEnd.z - this._customLayerColorBegin.z);\r\n\t\treturn this._tmpLayerColor;\r\n\t}\r\n\r\n\tpublic resetScore(value: number = 0): void {\r\n\t\t// if (value == 0)\r\n\t\t// \tthis._currentScore = this.getStorageData(UserDataEvent.LEFT_SCORE, \"number\");\r\n\t\t// else\r\n\t\tthis._currentScore = value;\r\n\t}\r\n\r\n\tprivate _lastAddScoreTime: number;\r\n\tpublic addScore(isBlack: boolean, value: number = 1): void {\r\n\t\tthis._currentScore += value;\r\n\t\tif (isBlack)\r\n\t\t\tthis._blackCount++;\r\n\t\tif (!this._lastAddScoreTime || (Utils.now - this._lastAddScoreTime) > 1900) {\r\n\t\t\tthis._lastAddScoreTime = Utils.now;\r\n\t\t\t// uiRuntime.Open.instance.show(\"pass\", 420, wlf.tools.Utils.stageHeight * 0.5 - 100);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic get currentScore(): number {\r\n\t\treturn this._currentScore;\r\n\t}\r\n\r\n\tpublic get inviteDaySocre(): number {\r\n\t\tif (this._isTodayDouble)\r\n\t\t\treturn this._currentScore;\r\n\t\telse\r\n\t\t\treturn 0;\r\n\t}\r\n\r\n\tpublic get inviteHistoryScore(): number {\r\n\t\treturn this._currentScore * this._inviteCount * 0.1\r\n\t}\r\n\r\n\tpublic get maxScore(): number {\r\n\t\treturn this._maxScore;\r\n\t}\r\n\r\n\tpublic get allScore(): number {\r\n\t\treturn Math.floor(this._currentScore + this.inviteDaySocre + this.inviteHistoryScore);\r\n\t}\r\n\r\n\tpublic get doubleMult(): number {\r\n\t\treturn 100 + (this._isTodayDouble ? 100 : 0) + this._inviteCount * 10;\r\n\t}\r\n\r\n\tpublic get maxRelayScore(): number {\r\n\t\treturn this._maxRelayScore;\r\n\t}\r\n\r\n\tpublic get blackCount(): number {\r\n\t\treturn this._blackCount;\r\n\t}\r\n\r\n\tpublic get loginCount(): number {\r\n\t\treturn this._loginCount;\r\n\t}\r\n\r\n\tpublic resetGame(): void {\r\n\t\tthis._levelIndex = 1;\r\n\t\tthis.recordLevelIndex(1);\r\n\t}\r\n\r\n\tpublic addGameCount(): void {\r\n\t\tthis._gameCountCurrent++;\r\n\t\tthis._gameCountToday++;\r\n\t\tthis.setStorageData(UserDataEvent.GAME_TODAY, this._gameCountToday);\r\n\t}\r\n\r\n\tpublic addReviveCount(): void {\r\n\t\tthis._reviveCount++;\r\n\t\tthis.setStorageData(UserDataEvent.REVIVE_COUNT, this._reviveCount);\r\n\t}\r\n\r\n\tpublic get reviveCount(): number {\r\n\t\treturn this._reviveCount;\r\n\t}\r\n\r\n\r\n\tpublic get gameCountCurrent(): number {\r\n\t\treturn this._gameCountCurrent;\r\n\t}\r\n\r\n\tpublic get gameCountToday(): number {\r\n\t\treturn this._gameCountToday;\r\n\t}\r\n\r\n\tpublic get crazyLevel(): number {\r\n\t\treturn this._crazyLevel;\r\n\t}\r\n\r\n\tpublic get crazyPro(): number {\r\n\t\treturn this._crazyPro;\r\n\t}\r\n\r\n\tpublic get crazyFrame(): number {\r\n\t\treturn this._crazyFrame;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 获取本地存储数据 \r\n\t * @param key \r\n\t * @param type 默认string，如果要返回number，传number\r\n\t * @param defaultNumber 返回number情况下，默认0\r\n\t */\r\n\tprotected getStorageData(key: string, type: string = \"string\", defaultNumber: number = 0): any {\r\n\t\treturn Utils.getStorageData(key, type, defaultNumber);\r\n\t}\r\n\r\n\t/**存储本地数据 */\r\n\tprotected setStorageData(key: string, value: string | number) {\r\n\t\tUtils.setStorageData(key, value);\r\n\t}\r\n\r\n}","import { PlatformBase } from \"./PlatformBase\";\nimport { DebugTools } from \"../utils/DebugTools\";\nimport { EventCenter } from \"../event/EventCenter\";\nimport { PlatformUserData } from \"./PlatformUserData\";\nimport { SoundCtrl } from \"../controller/sound/SoundCtrl\";\nimport { UserDataCtrl } from \"../game/UserDataCtrl\";\nimport Utils from \"../utils/Utils\";\n\nexport class WXPlatform extends PlatformBase {\n\n    protected _enterChannel: string = \"UN-KNOW\";\n    public getEnterChannel(): string {\n        return this._enterChannel;\n    }\n\n    private wxLoginCB: () => void;\n\n    private isNeedcreateUserInfoButton: boolean;\n    public constructor() {\n        super();\n\n        // 处理安卓qq环境头像目录\n        let fs = wx[\"getFileSystemManager\"]();\n        let path = `${wx[\"env\"][\"USER_DATA_PATH\"]}/` + \"head\";\n        try {\n            fs.rmdirSync(path, true);\n        } catch (error) {\n\n        }\n        fs.mkdirSync(path, false);\n\n        // 保持常亮状态\n        wx.setKeepScreenOn({\n            keepScreenOn: true, success: (res: any) => {\n                DebugTools.inst.log(\"setKeepScreenOn success\");\n            },\n            fail: () => {\n                DebugTools.inst.log(\"setKeepScreenOn fail\");\n            },\n            complete: () => {\n                DebugTools.inst.log(\"setKeepScreenOn complete\");\n            }\n        })\n    }\n\n    public login(callback?: () => void): void {\n        let self = this;\n        this.wxLoginCB = callback;\n        wx.login({\n            success(res: any) {\n                if (res.code) {\n\n                    // 存储启动信息\n                    // self.saveLaunchInfo();\n\n                    //发起网络请求\n                    // wx.request({\n                    //     url: 'https://test.com/onLogin',\n                    //     data: {\n                    //         code: res.code\n                    //     }\n                    // })\n                    DebugTools.inst.log(\"code:\" + res.code);\n                    // code: 用户登录凭证（有效期五分钟）。\n                    // 开发者需要在开发者服务器后台调用 code2Session，使用 code 换取 openid 和 session_key 等信息\n\n                    // dataController.player.loginTicket = res.code;\n                    self.getSetting((authSetting: wx.AuthSetting) => {\n                        // if (authSetting[\"scope.userInfo\"]) {\n                        if (authSetting[\"scope.userInfo\"]) {\n                            self.getWXUserInfo((userInfo: wx.UserInfo) => {\n                                self.initWXUserInfo(userInfo, () => {\n                                    //\n                                    if (callback) callback();\n                                });\n\n                            })\n                            self.isNeedcreateUserInfoButton = false;\n                        } else {\n                            self.isNeedcreateUserInfoButton = true;\n                            if (callback) callback();\n                        }\n                    });\n\n                    self.handleForwardBack();\n                    // callback();\n\n                } else {\n                    DebugTools.inst.log('登录失败！' + res.errMsg);\n                    self.handleForwardBack();\n                    // utils.ui.MessageBox.showMessageBox('登录失败！' + res.errMsg);\n                }\n\n            }\n        } as any)\n    }\n\n    public appShare(mTitle?: string, mImageUrl?: string, mQuery?: string, mImageUrlId?: string): void {\n        wx.shareAppMessage({\n            title: mTitle,\n            imageUrl: mImageUrl,\n            query: mQuery,\n            imageUrlId: mImageUrlId\n        });\n    }\n\n    public onShare(cb: () => { title?: string, imageUrl?: string, query?: string, imageUrlId?: string }): void {\n        this.showShare(true);\n        // wx.onShareAppMessage(cb);\n        wx.aldOnShareAppMessage(cb as any);\n    }\n\n    private showShare(isWithShareTicket?: boolean, successCB?: () => void, failCB?: () => void, completeCB?: () => void): void {\n        wx.showShareMenu({\n            withShareTicket: isWithShareTicket,\n            success: successCB,\n            fail: failCB,\n            complete: completeCB\n        });\n    }\n\n    public startGame(callback: () => void = null): void {\n\n        if (callback) {\n\n            callback();\n        }\n    }\n\n    public downloadGameData(callback: () => void = null): void {\n    }\n\n    public updateGameData(refresh: boolean = false, callback: () => void = null): void {\n    }\n\n\n    public getRankList(): Array<PlatformUserData> {\n\n        return [];\n    }\n\n    public getSelfData(): PlatformUserData {\n        return null;\n    }\n\n    public fetchVideoAd(videoType: number, callback?: (handle) => void) {\n    }\n\n    public fetchBannerAd(callback?: (handle) => void) {\n    }\n\n    public enterPubAccountCard(pubAccountId: string): void {\n    }\n\n    public openWebView(url: string): void {\n    }\n\n    public share(callback?: (retCode, shareDest, isFirstShare) => void): void {\n\n    }\n\n    private newShare(callback?: (retCode, shareDest, isFirstShare) => void): void {\n    }\n\n    private shareComplete(retCode: number, shareDest: number, isFirstShare: boolean, callback?: (retCode, shareDest, isFirstShare) => void): void {\n\n    }\n\n    public registerListener(listener: IPlatformEventListener): void {\n    }\n\n    public unregisterListener(listener: IPlatformEventListener): void {\n    }\n\n    private onLoad(): void {\n    }\n\n    private onMaximize(): void {\n    }\n\n    private onMinimize(): void {\n    }\n\n    private onEnterBackground(cb: () => void): void {\n        wx.onHide(cb);\n    }\n\n    private onEnterForward(cb: (res: wx.onShowRes) => void): void {\n        DebugTools.inst.log(\" call wx.onShow\");\n        wx.onShow(cb);\n    }\n\n    private onClose(): void {\n    }\n\n    public getUserInfo(cb: (userInfo: wx.UserInfo) => void): void {\n        this.getSetting((authSetting: wx.AuthSetting) => {\n            if (authSetting[\"scope.userInfo\"]) {\n                this.getWXUserInfo((userInfo: wx.UserInfo) => {\n                    cb(userInfo)\n                })\n            } else {\n                this.createUserInfoButton(cb)\n            }\n        });\n    }\n\n    private createUserInfoButton(cb: (userInfo: wx.UserInfo) => void) {\n        DebugTools.inst.log(\"start createUserInfoButton\")\n        let systemInfo = wx[\"getSystemInfoSync\"]();\n        let scale = systemInfo.screenWidth / Laya.stage.width;\n        let width = 525 * scale;\n        let height = 141 * scale;\n        let centerY = 290 * scale;\n        let left = (systemInfo.screenWidth - width) / 2;\n        let top = (systemInfo.screenHeight - height) / 2 + centerY;\n        let userInfoBtn = wx.createUserInfoButton({\n            type: \"image\",\n            // image: \"btn_annd.png\",\n            image: \"btn_annd_trans.png\",\n            style: { left: left, top: top, width: width, height: height },\n            withCredentials: false\n        });\n        userInfoBtn.show();\n        userInfoBtn.onTap((res: any) => {\n            DebugTools.inst.log(\"getWXUserInfo-userInfoBtn -res:\", res);\n            if (res.errMsg == \"getUserInfo:ok\") {\n                DebugTools.inst.log(\"授权成功\");\n                //获取到用户信息\n                let userInfo = res.userInfo as wx.UserInfo;\n\n                cb(userInfo);\n\n                // 清除微信授权按钮\n                userInfoBtn.destroy();\n            }\n            else {\n                DebugTools.inst.log(\"授权失败\");\n                cb(null);\n                // 清除微信授权按钮\n                userInfoBtn.destroy();\n                // wx.openSetting({\n                //     success: (res: any) => {\n                //         DebugTools.inst.log(\"success:\" + JSON.stringify(res));\n                //     },\n                //     fail: (err: any) => {\n                //         DebugTools.inst.log(\"fail:\" + JSON.stringify(err));\n                //     },\n                //     complete: () => {\n                //         DebugTools.inst.log(\"complete:\");\n                //     }\n                // })\n            }\n        })\n\n    }\n\n    private getSetting(cb: (authSetting: wx.AuthSetting) => void) {\n        wx.getSetting({\n            success(res: any) {\n                DebugTools.inst.log(\"res.authSetting-success\", res.authSetting);\n                cb(res.authSetting)\n            },\n            fail(res: any) {\n                DebugTools.inst.log(\"res.authSetting-fail\", res.authSetting);\n            },\n            complete(res: any) {\n                DebugTools.inst.log(\"res.authSetting-complete\", res.authSetting);\n            }\n        } as any)\n    }\n\n    private getWXUserInfo(cb: (userInfo: wx.UserInfo) => void) {\n        let self = this;\n        wx.getUserInfo({\n            success: (res: any) => {\n                let userInfo = res.userInfo as wx.UserInfo;\n                DebugTools.inst.log(\"getWXUserInfo -res:\", res);\n                cb(userInfo);\n            }\n        } as any)\n    }\n\n    private initWXUserInfo(userInfo: wx.UserInfo, cb?: () => void) {\n        UserDataCtrl.instance.userData.nickName = userInfo.nickName;\n        UserDataCtrl.instance.userData.avatarUrl = userInfo.avatarUrl;\n        if (cb) cb();\n    }\n\n    public openServiceConversation(param?: any): void {\n        wx.openCustomerServiceConversation({\n            sessionFrom: \"\",\n            showMessageCard: true,\n            sendMessageTitle: \"Hello\",\n            // sendMessagePath: \"\",\n            sendMessageImg: \"xuebaGroup1.png\",\n            success: (res?: any) => {\n                DebugTools.inst.log(\"openCustomerServiceConversation success\");\n            },\n            fail: (res?: any) => {\n                DebugTools.inst.log(\"openCustomerServiceConversation fail\");\n            },\n            complete: (res?: any) => {\n                DebugTools.inst.log(\"openCustomerServiceConversation complete\");\n            }\n        })\n    }\n\n    private handleForwardBack(): void {\n        this.onEnterBackground(() => {\n            SoundCtrl.instance.stopMusic();\n        });\n        this.onEnterForward((res: wx.onShowRes) => {\n            SoundCtrl.instance.playCurrentMusic();\n        });\n    }\n\n    // 存储启动信息\n    private saveLaunchInfo() {\n        let launchOptions = wx.getLaunchOptionsSync();\n        let query = launchOptions.query;\n        DebugTools.inst.log(\"launchOptions--\" + JSON.stringify(launchOptions));\n\n        if (typeof (query) == \"string\") {\n            let queryStrArray = query.split(\"?\")\n            let str1 = queryStrArray[0];\n            if (str1) {\n                // app.dataController.player.launchInfo.inviteCode = str1.split(\"=\")[1];\n            }\n            let str2 = queryStrArray[1];\n            if (str2) {\n                // app.dataController.player.launchInfo.inviter = str2.split(\"=\")[1];\n            }\n\n        } else {\n            // app.dataController.player.launchInfo.inviteCode = query.inviteCode;\n            // app.dataController.player.launchInfo.inviter = query.inviter;\n            // app.dataController.player.launchInfo.inviterOpenID = query.inviterOpenID;\n        }\n    }\n\n    // 菜单按钮的布局位置信息\n    public getMenuButtonBoundingClientRect(): any {\n        let rect = wx.getMenuButtonBoundingClientRect();\n        let systemInfo = wx.getSystemInfoSync();\n        let rate = Laya.stage.width / systemInfo.screenWidth;\n        rect.width *= rate;\n        rect.height *= rate;\n        rect.top *= rate;\n        rect.right *= rate;\n        rect.bottom *= rate;\n        rect.left *= rate;\n        return rect;\n    }\n\n    public setClipboardData(data: string, cb: () => void): void {\n        wx.setClipboardData({\n            data: data,\n            success(res) {\n                cb();\n            }\n        })\n    }\n\n    public getClipboardData(cb: (data: string) => void): void {\n        wx.getClipboardData({\n            success(res) {\n                cb(res.data);\n            }\n        })\n    }\n\n    // 截屏分享\n    public shareScreenshot(img: any, title: string, isNeedDestroy: boolean = true): void {\n        let width = img.width;\n        let height = img.height;\n        let htmlC = img.drawToCanvas(width, height, 0, 0);\n        let canvas = htmlC.getCanvas();\n        canvas.toTempFilePath({\n            x: 0,\n            y: 0,\n            width: width,\n            height: height,\n            destWidth: width,\n            destHeight: height,\n            success: function (res) {\n                if (isNeedDestroy) {\n                    img.destroy(true);\n                }\n                wx.shareAppMessage({\n                    imageUrl: res.tempFilePath,\n                    title: title\n                })\n            }\n        });\n    }\n\n    public saveImgToPhotoAlbum(img: any, cb: () => void): void {\n        let width = img.width;\n        let height = img.height;\n        let htmlC = img.drawToCanvas(width, height, 0, 0);\n        let canvas = htmlC.getCanvas();\n        canvas.toTempFilePath({\n            x: 0,\n            y: 0,\n            width: width,\n            height: height,\n            destWidth: width,\n            destHeight: height,\n            success: function (res) {\n                wx.saveImageToPhotosAlbum({\n                    filePath: res.tempFilePath,\n                    complete: cb\n                })\n            }\n        });\n    }\n    /**\n * 使手机发生较短时间的振动（15 ms）\n * @param caller \n * @param callback \n */\n    public vibrateShort(caller?: any, callback?: Function): void {\n        if (Utils.isWXMiniGame) {\n            // WXAPI.log(\"wx.vibrateShort send\");\n            wx.vibrateShort({\n                success: function (response: any) {\n                    // WXAPI.log(\"wx.vibrateShort success\");\n                    if (caller && callback)\n                        callback.call(caller, { code: 0 });\n                },\n                fail: function () {\n                    // WXAPI.log(\"wx.vibrateShort fail\");\n                    if (caller && callback)\n                        callback.call(caller, { code: 1 });\n                },\n                complete: function () {\n                    // WXAPI.log(\"wx.vibrateShort complete\");\n                    if (caller && callback)\n                        callback.call(caller, { code: 2 });\n                },\n            } as any)\n        }\n    }\n\n    /**\n     * 使手机发生较短时间的振动（400 ms）\n     * @param caller \n     * @param callback \n     */\n    public vibrateLong(caller?: any, callback?: Function): void {\n        if (Utils.isWXMiniGame) {\n            DebugTools.inst.log(\"wx.vibrateLong send\");\n            wx.vibrateLong({\n                success: function (response) {\n                    DebugTools.inst.log(\"wx.vibrateLong success\");\n                    if (caller && callback)\n                        callback.call(caller, { code: 0 });\n                },\n                fail: function () {\n                    DebugTools.inst.log(\"wx.vibrateLong fail\");\n                    if (caller && callback)\n                        callback.call(caller, { code: 1 });\n                },\n                complete: function () {\n                    DebugTools.inst.log(\"wx.vibrateLong complete\");\n                    if (caller && callback)\n                        callback.call(caller, { code: 2 });\n                },\n            } as any)\n        }\n    }\n\n    /**设置用户排行榜信息 */\n    public setUserCloudStorage(data): void {\n        if (wx.setUserCloudStorage) {\n            wx.setUserCloudStorage({\n                KVDataList: data,\n                success: res => {\n                    console.log(\"setUserCloudStorage- success res: \", res)\n                },\n                fail: err => {\n                    console.log(\"setUserCloudStorage- fall res: \", err)\n                },\n                complete: res => {\n                    console.log(\"setUserCloudStorage- complete res: \", res)\n                }\n            });\n        }\n    }\n\n    /**--------------------------------------------------------------------------------------------------- */\n    /**--------------------------------------------------------------------------------------------------- */\n    /**---------------------------------------------追加 platformBase中不存在--------------------------------------- */\n    /**--------------------------------------------------------------------------------------------------- */\n    /**--------------------------------------------------------------------------------------------------- */\n}","import { IPlatform } from \"./IPlatform\";\nimport { PlatformBase } from \"./PlatformBase\";\nimport { WXPlatform } from \"./WXPlatform\";\nimport { PlatformType } from \"../cfg/ConfigAll\";\ninterface Creator {\n    new(): IPlatform\n};\n\nexport class PlatformFactory {\n\n    private static mInst: PlatformFactory;\n\n\n    private mClasses: { [index: string]: Creator };\n\n    public constructor() {\n\n        this.mClasses = {};\n        this.mClasses[\"dev\"] = PlatformBase;\n        this.mClasses[\"web\"] = PlatformBase;\n        this.mClasses[\"wx\"] = WXPlatform;\n        this.mClasses[\"qq\"] = WXPlatform;// TODO 因为目前qq小游戏和微信一样故直接使用WXPlatform\n\n    }\n\n    public static get inst(): PlatformFactory {\n        if (PlatformFactory.mInst == null) {\n            PlatformFactory.mInst = new PlatformFactory();\n        }\n        return PlatformFactory.mInst;\n    }\n\n    public getPlatform(name: PlatformType): IPlatform {\n        let cls: Creator = this.mClasses[name];\n        if (cls == null) {\n\n            console.log(\"当前平台不存在！！！将切换至Dummy环境！！！\");\n\n            cls = this.mClasses[\"Dummy\"];\n        }\n        return new cls();\n    }\n}","import Utils from \"../../utils/Utils\";\r\nimport { Encourage } from \"../../encourage/Encourage\";\r\n\r\n/**\r\n* 激励视频\r\n*/\r\nexport class RewardAD {\r\n    private static rewardedVideoAd: any;\r\n\r\n\r\n\t/**\r\n\t * 创建激励广告\r\n\t * code 0播放结束发放奖励1中途退出不给奖励\r\n\t * @param caller \r\n\t * @param callback \r\n\t */\r\n    public static createRewardedVideoAd(rewardedVideoAdId: string, successCB?: () => void): void {\r\n        if (Utils.isWXMiniGame) {\r\n            console.log(\"wx.createRewardedVideoAd send\");\r\n            if (!RewardAD.rewardedVideoAd) {\r\n                //兼容老版本没有这个接口\r\n                if (Laya.Browser.window.wx.createRewardedVideoAd) {\r\n                    console.log(\"激励视频 创建:\" + rewardedVideoAdId);\r\n                    RewardAD.rewardedVideoAd = Laya.Browser.window.wx.createRewardedVideoAd({ adUnitId: rewardedVideoAdId });\r\n                    RewardAD.rewardedVideoAd.onError(err => {\r\n                        console.log(\"rewardedVideoAd.onError, \", err)\r\n                    })\r\n                    RewardAD.rewardedVideoAd.onLoad(() => {\r\n                        console.log('激励视频 广告加载成功')\r\n                        successCB && successCB();\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\t/**\r\n\t * 显示激励广告\r\n\t */\r\n    public static showRewardedVideoAd(caller?: any, callback?: Function): void {\r\n        if (Utils.isWXMiniGame) {\r\n            if (RewardAD.rewardedVideoAd) {\r\n                console.log('激励视频 show')\r\n                RewardAD.rewardedVideoAd.show()\r\n                    .catch(err => {\r\n                        Encourage.isNoAds = true;\r\n                        console.log(err);\r\n                        if (caller && callback)\r\n                            callback.call(caller, { code: 0 });\r\n                    })\r\n\r\n                var fun: Function = function (res) {\r\n                    // 用户点击了【关闭广告】按钮\r\n                    // 小于 2.1.0 的基础库版本，res 是一个 undefined\r\n                    if (res && res.isEnded || res === undefined) {\r\n                        // 正常播放结束，可以下发游戏奖励\r\n                        if (caller && callback)\r\n                            callback.call(caller, { code: 0 });\r\n                    }\r\n                    else {\r\n                        // 播放中途退出，不下发游戏奖励\r\n                        if (caller && callback)\r\n                            callback.call(caller, { code: 1 });\r\n                    }\r\n                    RewardAD.rewardedVideoAd.offClose(fun);\r\n                }\r\n                RewardAD.rewardedVideoAd.onClose(fun);\r\n            }\r\n            else {\r\n                console.log('激励视频 未创建')\r\n                if (caller && callback)\r\n                    callback.call(caller, { code: 0 });\r\n            }\r\n        }\r\n    }\r\n}","import Utils from \"../../utils/Utils\";\r\nimport { Analytics } from \"../../com.sky1231/Analytics\";\r\n\r\n/**\r\n* 微信banner相关\r\n* BANNER策略：初始化时先加载一个，喂授权按钮。后续陆续加载9个。如果加载成功个数<至少要保留的个数(配置,一般为3)，每20秒尝试重新加载。每次拉取没有被点击过且展示次数最少的banner给用户。\r\n根据曝光次数销毁banner(配置,一般为1),并尝试加载新的banner,一旦有加载失败的，60秒内不再销毁。如果库里剩余banner个数<至少要保留的个数，不再销毁\r\n*/\r\nexport class BannerAD {\r\n\t/**加载成功 */\r\n\tprivate static readonly BANNER_LOAD_SUCCESS: number = 720000;\r\n\t/**加载失败 */\r\n\tprivate static readonly BANNER_LOAD_FAIL: number = 720001;\r\n\t/**展示成功 */\r\n\tprivate static readonly BANNER_SHOW_SUCCESS: number = 720002;\r\n\t/**展示失败 */\r\n\tprivate static readonly BANNER_SHOW_FAIL: number = 720003;\r\n\t/**一个都没有加载成功 */\r\n\tprivate static readonly BANNER_NONE: number = 720004;\r\n\t/**没有这个API */\r\n\tprivate static readonly BANNER_NO_API: number = 720005;\r\n\t/**一个都没有加载成功后，加载成功了 */\r\n\tprivate static readonly BANNER_RELOAD_SUCCESS: number = 720006;\r\n\t/**至少有一个加载成功了 */\r\n\tprivate static readonly BANNER_LOAD_ONE: number = 720007;\r\n\t/**第一次加载成功了几个 */\r\n\tprivate static readonly BANNER_FIRSTLOAD: number = 730000;\r\n\r\n\t/**所有的bannerID */\r\n\tprivate static _ids: Array<string>;\r\n\t/**已经加载好的banner */\r\n\tprivate static _banners: Array<BannerData> = [];\r\n\t/**是否有banner加载失败 */\r\n\tprivate static _hasBannerLoadError: boolean;\r\n\t/**至少保留几个banner */\r\n\tprivate static _atLeastLength: number = 3;\r\n\t/**展示几次后销毁 */\r\n\tprivate static _showTimes: number = 1;\r\n\t/**没有广告了 */\r\n\tpublic static isNoBanners: boolean = true;\r\n\t/**是否重新加载了 */\r\n\tprivate static _isReloaded: boolean;\r\n\t/**是否是第一次加载 */\r\n\tprivate static _isFirstLoad: boolean;\r\n\t/**没有广告，是否已经抛送 */\r\n\tprivate static _isNoAdsSend: boolean;\r\n\t/**全都被点击了 */\r\n\tpublic static isAllTouched: boolean = false;\r\n\r\n\t/**初始化，并且先创建一个banner */\r\n\tpublic static init(ids: Array<string>): void {\r\n\t\tconsole.warn('banner init:');\r\n\t\tBannerAD._ids = [];\r\n\t\twhile (ids.length) {\r\n\t\t\tvar ran: number = Math.floor(Math.random() * ids.length);\r\n\t\t\tBannerAD._ids.push(ids[ran]);\r\n\t\t\tids.splice(ran, 1);\r\n\t\t}\r\n\t\tBannerAD._banners = [];\r\n\t\tBannerAD.isNoBanners = true;\r\n\t\tBannerAD._isFirstLoad = true;\r\n\t\tif (BannerAD._ids.length)\r\n\t\t\tBannerAD.createBannerAd(BannerAD._ids[0]);\r\n\t\tLaya.timer.loop(20000, this, BannerAD.checkIsLoaded);\r\n\t}\r\n\r\n\tprivate static checkIsLoaded(): void {\r\n\t\tif (BannerAD._isFirstLoad) {\r\n\t\t\tBannerAD._isFirstLoad = false;\r\n\t\t\tAnalytics.sendEvent(BannerAD.BANNER_FIRSTLOAD + BannerAD._banners.length);\r\n\t\t}\r\n\r\n\t\tif (BannerAD.isNoBanners) {\r\n\t\t\tBannerAD._isReloaded = true;\r\n\t\t\tAnalytics.sendEvent(BannerAD.BANNER_NONE);\r\n\t\t}\r\n\r\n\t\tif (BannerAD._banners.length < BannerAD._atLeastLength) {\r\n\t\t\tBannerAD.start(0);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tLaya.timer.clear(this, BannerAD.checkIsLoaded);\r\n\t\t}\r\n\t}\r\n\r\n\t/**初始化参数 */\r\n\tpublic static initParam(atLeastLength: number, showTimes: number): void {\r\n\t\tBannerAD._atLeastLength = atLeastLength;\r\n\t\tBannerAD._showTimes = showTimes;\r\n\t}\r\n\r\n\t/**开始加载banner,从x个开始 */\r\n\tpublic static start(index: number): void {\r\n\t\tvar timeIdx: number = -1;\r\n\t\tfor (let i: number = index; i < BannerAD._ids.length; i++) {\r\n\t\t\tif (!BannerAD.isPushed(BannerAD._ids[i])) {\r\n\t\t\t\ttimeIdx++;\r\n\t\t\t\tLaya.timer.once(1000 * timeIdx, this, () => {\r\n\t\t\t\t\tBannerAD.createBannerAd(BannerAD._ids[i]);\r\n\t\t\t\t}, null, false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**是否已经在队列里 */\r\n\tprivate static isPushed(id: string): boolean {\r\n\t\tfor (var i: number = 0; i < BannerAD._banners.length; i++) {\r\n\t\t\tif (BannerAD._banners[i].id == id)\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**获取展示次数最少的banner */\r\n\tprivate static getBannerData(): BannerData {\r\n\t\tif (BannerAD._banners.length) {\r\n\t\t\tvar flag: boolean;\r\n\t\t\tfor (var i: number = 0; i < BannerAD._banners.length; i++) {\r\n\t\t\t\tvar bannerData: BannerData = BannerAD._banners[i];\r\n\t\t\t\tif (bannerData.isShow)\r\n\t\t\t\t\treturn bannerData;\r\n\t\t\t}\r\n\t\t\tvar minShowTimes: number = 99;\r\n\t\t\tvar index: number = 0;\r\n\t\t\tfor (var i: number = 0; i < BannerAD._banners.length; i++) {\r\n\t\t\t\tvar bannerData: BannerData = BannerAD._banners[i];\r\n\t\t\t\tif (!bannerData.isTouched) {\r\n\t\t\t\t\tif (bannerData.showTimes == 0)\r\n\t\t\t\t\t\treturn bannerData;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (bannerData.showTimes < minShowTimes) {\r\n\t\t\t\t\t\t\tminShowTimes = bannerData.showTimes;\r\n\t\t\t\t\t\t\tindex = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn BannerAD._banners[index];\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**创建banner */\r\n\tprivate static createBannerAd(id: string) {\r\n\t\tif (Laya.Browser.onMiniGame) {\r\n\t\t\tif (Laya.Browser.window.wx.createBannerAd) {\r\n\t\t\t\tconsole.warn('banner 创建:' + id);\r\n\t\t\t\tvar bannerAd = Laya.Browser.window.wx.createBannerAd({\r\n\t\t\t\t\tadUnitId: id,\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\twidth: 9999\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbannerAd.onError((err) => {\r\n\t\t\t\t\t// console.warn('banner 广告加载失败:' + err);\r\n\t\t\t\t\tBannerAD._hasBannerLoadError = true;\r\n\t\t\t\t\tAnalytics.sendEvent(BannerAD.BANNER_LOAD_FAIL);\r\n\t\t\t\t\tLaya.timer.once(60000, this, BannerAD.resetBannerLoadError);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tbannerAd.onLoad(() => {\r\n\t\t\t\t\t// console.warn('banner 广告加载成功: ');\r\n\t\t\t\t\tAnalytics.sendEvent(BannerAD.BANNER_LOAD_SUCCESS);\r\n\t\t\t\t});\r\n\t\t\t\tbannerAd.onResize(() => {\r\n\t\t\t\t\tif (bannerAd.style) {\r\n\t\t\t\t\t\tif (bannerAd.style.realWidth) {\r\n\t\t\t\t\t\t\tbannerAd.style.left = Utils.getSystemInfo().screenWidth - bannerAd.style.realWidth >> 1;\r\n\t\t\t\t\t\t\tbannerAd.style.top = Utils.getSystemInfo().screenHeight - bannerAd.style.realHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tbannerAd.style.left = Utils.getSystemInfo().screenWidth - 300 >> 1;\r\n\t\t\t\t\t\t\tbannerAd.style.top = Utils.getSystemInfo().screenHeight - 100;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!BannerAD.isPushed(id)) {\r\n\t\t\t\t\t\t// console.warn('banner 广告PUSH成功:');\r\n\t\t\t\t\t\tif (BannerAD.isNoBanners) {\r\n\t\t\t\t\t\t\tconsole.warn('第一个广告加载成功');\r\n\t\t\t\t\t\t\tif (BannerAD._isReloaded) {\r\n\t\t\t\t\t\t\t\tAnalytics.sendEvent(BannerAD.BANNER_RELOAD_SUCCESS);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tAnalytics.sendEvent(BannerAD.BANNER_LOAD_ONE);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tBannerAD.isNoBanners = false;\r\n\t\t\t\t\t\tvar bannerData: BannerData = new BannerData();\r\n\t\t\t\t\t\tbannerData.id = id;\r\n\t\t\t\t\t\tbannerData.banner = bannerAd;\r\n\t\t\t\t\t\tBannerAD._banners.push(bannerData);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!BannerAD._isNoAdsSend) {\r\n\t\t\t\t\tBannerAD._isNoAdsSend = true;\r\n\t\t\t\t\tvar model: string;\r\n\t\t\t\t\tif (Utils.getSystemInfo() && Utils.getSystemInfo().model)\r\n\t\t\t\t\t\tmodel = Utils.getSystemInfo().model;\r\n\t\t\t\t\tAnalytics.sendEvent(BannerAD.BANNER_NO_API, { model });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static resetBannerLoadError(): void {\r\n\t\tBannerAD._hasBannerLoadError = false;\r\n\t}\r\n\r\n\t/**\r\n\t * 显示banner广告\r\n\t */\r\n\tpublic static showBannerAd(offsetY: number = 0): any {\r\n\t\t// console.warn(\"展示banner!!!!! \");\r\n\t\tif (Laya.Browser.onMiniGame) {\r\n\t\t\t// if (BannerAD._banners && BannerAD._banners.length && !CloseBannerCtrl.instance.isCloseBanner) {\r\n\t\t\tif (BannerAD._banners && BannerAD._banners.length) {\r\n\t\t\t\tvar bannerData: BannerData = BannerAD.getBannerData();\r\n\t\t\t\tif (bannerData) {\r\n\t\t\t\t\t// console.warn(\"展示banner: \" + bannerData.id);\r\n\t\t\t\t\tif (bannerData.banner.style) {\r\n\t\t\t\t\t\tif (bannerData.banner.style.realWidth && Utils.getSystemInfo().screenWidth) {\r\n\t\t\t\t\t\t\tbannerData.banner.style.left = Utils.getSystemInfo().screenWidth - bannerData.banner.style.realWidth >> 1;\r\n\t\t\t\t\t\t\tbannerData.banner.style.top = Utils.getSystemInfo().screenHeight - bannerData.banner.style.realHeight + offsetY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tbannerData.banner.style.left = Utils.getSystemInfo().screenWidth - 300 >> 1;\r\n\t\t\t\t\t\t\tbannerData.banner.style.top = Utils.getSystemInfo().screenHeight - 100 + offsetY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbannerData.showTimes++;\r\n\t\t\t\t\tbannerData.banner.show();\r\n\t\t\t\t\tbannerData.isShow = true;\r\n\t\t\t\t\tAnalytics.sendEvent(BannerAD.BANNER_SHOW_SUCCESS);\r\n\t\t\t\t\tif (bannerData.isTouched && BannerAD._banners.length <= BannerAD._atLeastLength) {\r\n\t\t\t\t\t\tBannerAD.isAllTouched = true;\r\n\t\t\t\t\t\tconsole.log(\"isAllTouched\", \"warn\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn bannerData.banner;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tAnalytics.sendEvent(BannerAD.BANNER_SHOW_FAIL);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t// public static get bannerAd(): any {\r\n\t// \tfor (var i: number = 0; i < Banner._banners.length; i++) {\r\n\t// \t\tvar bannerData: BannerData = Banner._banners[i];\r\n\t// \t\tif (bannerData.isShow) {\r\n\t// \t\t\treturn bannerData.banner;\r\n\t// \t\t}\r\n\t// \t}\r\n\t// \treturn null;\r\n\t// }\r\n\r\n\t/**\r\n\t * 隐藏banner广告\r\n\t */\r\n\tpublic static hideBannerAd(isTouch: boolean, needCheckDestroy: boolean = false): void {\r\n\t\tif (Laya.Browser.onMiniGame) {\r\n\t\t\tif (BannerAD._banners && BannerAD._banners.length) {\r\n\t\t\t\tfor (var i: number = 0; i < BannerAD._banners.length; i++) {\r\n\t\t\t\t\tvar bannerData: BannerData = BannerAD._banners[i];\r\n\t\t\t\t\tif (bannerData.isShow) {\r\n\t\t\t\t\t\tbannerData.isShow = false;\r\n\t\t\t\t\t\tbannerData.isTouched = isTouch;\r\n\t\t\t\t\t\tbannerData.banner.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (needCheckDestroy)\r\n\t\t\t\t\tBannerAD.checkDestroy();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**检测是否有banner要销毁 每次最多销毁一个 */\r\n\tpublic static checkDestroy(): void {\r\n\t\tif (BannerAD._banners.length >= BannerAD._atLeastLength && !BannerAD._hasBannerLoadError) {\r\n\t\t\tfor (var i: number = 0; i < BannerAD._banners.length; i++) {\r\n\t\t\t\tvar bannerData: BannerData = BannerAD._banners[i];\r\n\t\t\t\tif (!bannerData.isShow && bannerData.isTouched || bannerData.showTimes >= BannerAD._showTimes) {\r\n\t\t\t\t\tbannerData.banner.destroy();\r\n\t\t\t\t\tBannerAD._banners.splice(i, 1);\r\n\t\t\t\t\tBannerAD.createBannerAd(bannerData.id);\r\n\t\t\t\t\t// console.warn('banner 广告销毁: ' + bannerData.id);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// console.warn(\"没有banner销毁1\");\r\n\t\t}\r\n\t\t// console.warn(\"没有banner销毁2\");\r\n\t}\r\n}\r\n\r\nexport class BannerData {\r\n\tconstructor() {\r\n\t\tthis.showTimes = 0;\r\n\t}\r\n\tbanner: any;\r\n\tid: string;\r\n\tshowTimes: number;\r\n\tisShow: boolean;\r\n\tisTouched: boolean;\r\n}","import { Analytics } from \"../../com.sky1231/Analytics\";\r\nimport { AnaEvent } from \"../../com.sky1231/AnaEvent\";\r\n\r\n/**\r\n* 插屏\r\n*/\r\nexport class InterstitialAD {\r\n\tprivate static interstitialAd: any = null;\r\n\tprivate static _bLoadInterstitialAdSuccess: boolean = false;\r\n\tpublic static createInterstitialAd(interstitialId: string): void {\r\n\t\tif (Laya.Browser.onMiniGame) {\r\n\t\t\tif (Laya.Browser.window.wx.createInterstitialAd) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconsole.log(\"插屏广告 创建:\" + interstitialId);\r\n\t\t\t\t\tInterstitialAD.interstitialAd = Laya.Browser.window.wx.createInterstitialAd({\r\n\t\t\t\t\t\tadUnitId: interstitialId\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tInterstitialAD.interstitialAd.onLoad(function () {\r\n\t\t\t\t\t\tconsole.log(\"插屏广告加载成功\");\r\n\t\t\t\t\t\tAnalytics.sendEvent(AnaEvent.INTERSTITIALAD_LOAD_SUCCESS);\r\n\r\n\t\t\t\t\t\tif (InterstitialAD.interstitialAd && InterstitialAD.interstitialAd.show) {\r\n\t\t\t\t\t\t\tInterstitialAD.interstitialAd.show().catch((err) => {\r\n\t\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tInterstitialAD.interstitialAd.onError(function () {\r\n\t\t\t\t\t\tconsole.log(\"插屏广告加载失败\");\r\n\t\t\t\t\t\tAnalytics.sendEvent(AnaEvent.INTERSTITIALAD_LOAD_ERROR);\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tInterstitialAD.interstitialAd.onClose(function () {\r\n\t\t\t\t\t\tif (InterstitialAD.interstitialAd && InterstitialAD.interstitialAd.destroy)\r\n\t\t\t\t\t\t\tInterstitialAD.interstitialAd.destroy();\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tAnalytics.sendEvent(AnaEvent.INTERSTITIALAD_CATCH_ERROR);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}","import Utils from \"../utils/Utils\";\r\nimport { MainLogic } from \"../MainLogic\";\r\nimport { Toast } from \"../utils/UI\";\r\nimport { RewardAD } from \"../ads/wx/RewardAD\";\r\nimport { BannerAD } from \"../ads/wx/BannerAD\";\r\nimport { ConfigAll } from \"../cfg/ConfigAll\";\r\nimport { InterstitialAD } from \"../ads/wx/InterstitialAD\";\r\nimport { Analytics } from \"../com.sky1231/Analytics\";\r\n\r\n/**\r\n * 激励（分享，视频）插件\r\n */\r\nexport class Encourage {\r\n\t/**注册时间 */\r\n\tprivate static readonly STORAGE_SIGN_DATE: string = \"encourage_sign_date\";\r\n\t/**上一次存储的广告日期 */\r\n\tprivate static readonly STORAGE_ADS_DATE: string = \"encourage_ads_date\";\r\n\t/**看广告的次数 */\r\n\tprivate static readonly STORAGE_ADS_COUNT: string = \"encourage_ads_count\";\r\n\t/**上一次存储的分享日期 */\r\n\tprivate static readonly STORAGE_SHARE_DATE: string = \"encourage_share_date\";\r\n\t/**分享的次数 */\r\n\tprivate static readonly STORAGE_SHARE_COUNT: string = \"encourage_share_count\";\r\n\t/**注册时间?有时间了排查下为什么会有两个注册时间 */\r\n\tprivate static readonly STORAGE_REGISTER_DATE: string = \"encourage_register_date\";\r\n\t/**跳转次数 */\r\n\tprivate static readonly STORAGE_JUMP_COUNT: string = \"encourage_jump_count\";\r\n\r\n\t/**---------------------------- */\r\n\r\n\t/**游戏版本号 */\r\n\tprivate static _gameVersion: string;\r\n\tpublic static get gameVersion(): string {\r\n\t\treturn Encourage._gameVersion;\r\n\t}\r\n\r\n\t/**---------------------------- */\r\n\r\n\t/**云控地址 */\r\n\tprivate static _urlCfg: string;\r\n\t/**CPA地址 */\r\n\tprivate static _urlCpa: string;\r\n\t/**更多游戏 */\r\n\tprivate static _urlMoreGame: string;\r\n\t/**悬浮窗 */\r\n\tprivate static _urlFloatGame: string;\r\n\t/**屏幕宽度 */\r\n\tprivate static _screenWidth: number;\r\n\t/**设计分辨率和屏幕分辨率的相差倍数 */\r\n\tprivate static _scale: number;\r\n\t/**是否是新玩家 */\r\n\tprivate static _isNewPlayer: boolean = false;\r\n\t/**第一次分享失败概率 */\r\n\tprivate static _firstShareRandom: number = 60;\r\n\t/**分享失败概率 */\r\n\tprivate static _moreShareRandom: number = 30;\r\n\t/**是否需要二次确认框 */\r\n\tprivate static _needShowSecondAlert: boolean = true;\r\n\t/**是否开启了分享 */\r\n\tprivate static _isOpenShare: boolean;\r\n\t/**分享次数 */\r\n\tprivate static _shareNum: number;\r\n\t/**视频次数 */\r\n\tprivate static _adsNum: number;\r\n\t/**版本号 */\r\n\tprivate static _version: string;\r\n\t/**分享文字 */\r\n\tpublic static shareLogos: Array<string>;\r\n\t/**分享图路径 */\r\n\tpublic static shareNames: Array<string>;\r\n\t/**复活类型 0是视频 1是分享*/\r\n\tpublic static reviveType: number = 0;\r\n\t/**cpa是否弹 1是弹 0是不弹*/\r\n\tpublic static cpaOpen: number = 0;\r\n\t/**是否开启更多游戏 */\r\n\tpublic static isOpenMoreGame: boolean;\r\n\t/**开启更多游戏需要的今日总局数 */\r\n\tpublic static openMoreGameDNum: number = 5;\r\n\t/**开启更多游戏需要的登录后的玩游戏局数 */\r\n\tpublic static openMoreGameLNum: number = 1;\r\n\t/**banner延迟弹出概率 */\r\n\tpublic static loginBanner: number = 100;\r\n\t/**banner延迟弹出概率 */\r\n\tpublic static jbBanner: number = 0;//@test\r\n\t/**新玩家前N局不弹视频 */\r\n\tpublic static newOpenWatchNum: number = 0;\r\n\t/**广告延迟出现时间 */\r\n\tpublic static adsDelayTime: number = 800;\r\n\tpublic static bannerTimes: Array<number> = [800, 1400, 1400, 1400];\r\n\tpublic static isCfgGet: boolean;\r\n\t/**展示几次销毁 */\r\n\tprivate static bannerShowTimes: number = 1;\r\n\t/**至少保留几个banner */\r\n\tprivate static atLeastBanners: number = 2;\r\n\r\n\r\n\tprivate static _bannerIds: Array<string> = [];// 激励视频id\r\n\tprivate static _rewardedVideoAdId: string = \"\";// 激励视频id\r\n\tprivate static _interstitialId: string = \"\";// 插屏id\r\n\tpublic static init(): void {\r\n\t\tthis.initConfig();\r\n\t\tthis.getCfg();\r\n\t\tthis.getCpaCfg();\r\n\t}\r\n\r\n\tprivate static initConfig(): void {\r\n\t\tthis._gameVersion = ConfigAll.VERSION;\r\n\t\tthis._urlCfg = ConfigAll.URL_ENCOURAGE_CFG;\r\n\t\tthis._urlCpa = ConfigAll.URL_CPA;\r\n\t\tthis._urlMoreGame = ConfigAll.URL_MORE_GAME;\r\n\t\tthis._urlFloatGame = ConfigAll.URL_FLOAT_GAME;\r\n\r\n\t\t// 广告id初始化\r\n\t\tthis._rewardedVideoAdId = ConfigAll.REWARDED_VIDEOAD_ID;\r\n\t\tthis._bannerIds = ConfigAll.BANNER_IDS;\r\n\r\n\t\tEncourage._dispatcher = new Laya.EventDispatcher();\r\n\t\tvar now: number = Utils.now;\r\n\t\tvar signDate: string = Utils.getStorageData(Encourage.STORAGE_SIGN_DATE);\r\n\t\tif (signDate) {\r\n\t\t\tif (Utils.isToday(Number(signDate)))\r\n\t\t\t\tEncourage._isNewPlayer = true;\r\n\t\t\telse\r\n\t\t\t\tEncourage._isNewPlayer = false;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsignDate = now + \"\";\r\n\t\t\tUtils.setStorageData(Encourage.STORAGE_SIGN_DATE, signDate);\r\n\t\t\tEncourage._isNewPlayer = true;\r\n\t\t}\r\n\r\n\t\tvar adsDate: string = Utils.getStorageData(Encourage.STORAGE_ADS_DATE);\r\n\t\tif (adsDate) {\r\n\t\t\tif (Utils.isToday(Number(adsDate))) {\r\n\t\t\t\tvar adsCount: string = Utils.getStorageData(Encourage.STORAGE_ADS_COUNT);\r\n\t\t\t\tif (adsCount) {\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tUtils.setStorageData(Encourage.STORAGE_ADS_COUNT, \"0\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tUtils.setStorageData(Encourage.STORAGE_ADS_DATE, now + \"\");\r\n\t\t\t\tUtils.setStorageData(Encourage.STORAGE_ADS_COUNT, \"0\");\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tUtils.setStorageData(Encourage.STORAGE_ADS_DATE, now + \"\");\r\n\t\t\tUtils.setStorageData(Encourage.STORAGE_ADS_COUNT, \"0\");\r\n\t\t}\r\n\r\n\t\tvar shareDate: string = Utils.getStorageData(Encourage.STORAGE_SHARE_DATE);\r\n\t\tif (shareDate) {\r\n\t\t\tif (Utils.isToday(Number(shareDate))) {\r\n\t\t\t\tvar shareCount: string = Utils.getStorageData(Encourage.STORAGE_SHARE_COUNT);\r\n\t\t\t\tif (shareCount) {\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tUtils.setStorageData(Encourage.STORAGE_SHARE_COUNT, \"0\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tUtils.setStorageData(Encourage.STORAGE_SHARE_DATE, now + \"\");\r\n\t\t\t\tUtils.setStorageData(Encourage.STORAGE_SHARE_COUNT, \"0\");\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tUtils.setStorageData(Encourage.STORAGE_SHARE_DATE, now + \"\");\r\n\t\t\tUtils.setStorageData(Encourage.STORAGE_SHARE_COUNT, \"0\");\r\n\t\t}\r\n\t\tEncourage._isOpenShare = true;\r\n\t\tEncourage._shareNum = 2;\r\n\t\tEncourage._adsNum = -1;\r\n\t}\r\n\r\n\t/**获取云控信息 */\r\n\tpublic static getCfg(): void {\r\n\t\tLaya.loader.create(this._urlCfg + \"?time=\" + new Date().getTime(), Laya.Handler.create(this, (obj: any) => {\r\n\t\t\tif (obj) {\r\n\t\t\t\tlet data: any;\r\n\t\t\t\tlet cfgVer = obj.ver;\r\n\t\t\t\tlet gameVer = ConfigAll.VERSION;\r\n\t\t\t\tif (Utils.compareVer(gameVer, cfgVer)) {\r\n\t\t\t\t\t// 测试版本\r\n\t\t\t\t\tdata = obj.test;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 线上版本\r\n\t\t\t\t\tdata = obj.online;\r\n\t\t\t\t}\r\n\t\t\t\tEncourage._version = data.cfgVer;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (data.bannerAds && data.bannerAds.length) {\r\n\t\t\t\t\t\tthis._bannerIds = data.bannerAds;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.rewardedVideoadId) {\r\n\t\t\t\t\t\tthis._rewardedVideoAdId = data.rewardedVideoadId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.interstitialId) {\r\n\t\t\t\t\t\tthis._interstitialId = data.interstitialId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Encourage.shareLogos = data.logos;\r\n\t\t\t\t\t// Encourage.shareNames = data.logoNames;\r\n\r\n\r\n\t\t\t\t\tEncourage._isOpenShare = data.isOpenShare == 1;\r\n\t\t\t\t\tEncourage.isOpenMoreGame = data.isOpenMoreGame == 1;\r\n\t\t\t\t\tif (data.openMoreGameDNum >= 0) {\r\n\t\t\t\t\t\tEncourage.openMoreGameDNum = data.openMoreGameDNum;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.openMoreGameLNum >= 0) {\r\n\t\t\t\t\t\tEncourage.openMoreGameLNum = data.openMoreGameLNum;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.needShowSecondAlert) {\r\n\t\t\t\t\t\tEncourage._needShowSecondAlert = data.needShowSecondAlert;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.jbBanner) {\r\n\t\t\t\t\t\tEncourage.jbBanner = data.jbBanner;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.loginBanner) {\r\n\t\t\t\t\t\tEncourage.loginBanner = data.loginBanner;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.newOpenWatchNum) {\r\n\t\t\t\t\t\tEncourage.newOpenWatchNum = data.newOpenWatchNum;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (Encourage._isNewPlayer) {\r\n\t\t\t\t\t\tEncourage._shareNum = data.newShareNum;\r\n\t\t\t\t\t\tEncourage._adsNum = data.newWatchNum;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tEncourage._shareNum = data.shareNum;\r\n\t\t\t\t\t\tEncourage._adsNum = data.watchNum;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.share1) {\r\n\t\t\t\t\t\tEncourage._firstShareRandom = data.share1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.share3) {\r\n\t\t\t\t\t\tEncourage._moreShareRandom = data.share3;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.reviveType) {\r\n\t\t\t\t\t\tEncourage.reviveType = data.reviveType;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.cpaOpen) {\r\n\t\t\t\t\t\tEncourage.cpaOpen = data.cpaOpen;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.bannerTimes) {\r\n\t\t\t\t\t\tEncourage.bannerTimes = data.bannerTimes;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.bannerShowTimes) {\r\n\t\t\t\t\t\tEncourage.bannerShowTimes = data.bannerShowTimes;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.atLeastBanners) {\r\n\t\t\t\t\t\tEncourage.atLeastBanners = data.atLeastBanners;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tRewardAD.createRewardedVideoAd(this._rewardedVideoAdId)\r\n\t\t\t\t\tBannerAD.initParam(Encourage.atLeastBanners, Encourage.bannerShowTimes);\r\n\t\t\t\t\tBannerAD.init(this._bannerIds);\r\n\r\n\t\t\t\t\tconsole.log(\"Encourage.version online:\" + Encourage._version, \"warn\");\r\n\t\t\t\t\tEncourage.isCfgGet = true;\r\n\t\t\t\t\tEncourage._dispatcher.event(\"cfg_complete\");\r\n\t\t\t\t\tconsole.log('encourageCfg -data:', data)\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(\"Encourage error\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\r\n\t/**cpa控制 */\r\n\tpublic static cpaChannel: Array<number>;\r\n\tpublic static cpaGameNum: Array<number>;\r\n\tpublic static cpaDayMaxJumpNum: Array<number>;\r\n\tpublic static mpGameNum: Array<number>;\r\n\tpublic static mpDayMaxJumpNum: Array<number>;\r\n\tpublic static cpaType: number = 1; //0 cpa 1 mp 2 七天以上\r\n\tpublic static currentDay: number = 1; //当前是注册第几天\r\n\r\n\tpublic static getCpaCfg() {\r\n\t\tif (Encourage._urlCpa) {\r\n\t\t\tLaya.loader.create(this._urlCpa + \"?time=\" + new Date().getTime(), Laya.Handler.create(this, (data: any) => {\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (data.cpaChannel) {\r\n\t\t\t\t\t\t\tEncourage.cpaChannel = [];\r\n\t\t\t\t\t\t\tvar strArr: Array<string> = data.cpaChannel.split(\",\");\r\n\t\t\t\t\t\t\tfor (var i = 0; i < strArr.length; i++) {\r\n\t\t\t\t\t\t\t\tEncourage.cpaChannel.push(Number(strArr[i]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data.cpaGameNum) {\r\n\t\t\t\t\t\t\tEncourage.cpaGameNum = [];\r\n\t\t\t\t\t\t\tvar strArr: Array<string> = data.cpaGameNum.split(\",\");\r\n\t\t\t\t\t\t\tfor (var i = 0; i < strArr.length; i++) {\r\n\t\t\t\t\t\t\t\tEncourage.cpaGameNum.push(Number(strArr[i]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data.cpaDayMaxJumpNum) {\r\n\t\t\t\t\t\t\tEncourage.cpaDayMaxJumpNum = [];\r\n\t\t\t\t\t\t\tvar strArr: Array<string> = data.cpaDayMaxJumpNum.split(\",\");\r\n\t\t\t\t\t\t\tfor (var i = 0; i < strArr.length; i++) {\r\n\t\t\t\t\t\t\t\tEncourage.cpaDayMaxJumpNum.push(Number(strArr[i]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data.mpGameNum) {\r\n\t\t\t\t\t\t\tEncourage.mpGameNum = [];\r\n\t\t\t\t\t\t\tvar strArr: Array<string> = data.mpGameNum.split(\",\");\r\n\t\t\t\t\t\t\tfor (var i = 0; i < strArr.length; i++) {\r\n\t\t\t\t\t\t\t\tEncourage.mpGameNum.push(Number(strArr[i]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data.mpDayMaxJumpNum) {\r\n\t\t\t\t\t\t\tEncourage.mpDayMaxJumpNum = [];\r\n\t\t\t\t\t\t\tvar strArr: Array<string> = data.mpDayMaxJumpNum.split(\",\");\r\n\t\t\t\t\t\t\tfor (var i = 0; i < strArr.length; i++) {\r\n\t\t\t\t\t\t\t\tEncourage.mpDayMaxJumpNum.push(Number(strArr[i]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar now: number = Utils.now;\r\n\t\t\t\t\t\tvar signDate: string = Utils.getStorageData(Encourage.STORAGE_SIGN_DATE);\r\n\t\t\t\t\t\tif (!signDate) {\r\n\t\t\t\t\t\t\tsignDate = now + \"\";\r\n\t\t\t\t\t\t\tEncourage.currentDay = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tvar dif: number = now - Number(signDate);\r\n\t\t\t\t\t\t\tEncourage.currentDay = Math.ceil(dif / (1000 * 3600 * 24));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar registerDay: number = Utils.getStorageData(Encourage.STORAGE_REGISTER_DATE);\r\n\t\t\t\t\t\tif (registerDay) {\r\n\t\t\t\t\t\t\tif (Encourage.currentDay > registerDay) {\r\n\t\t\t\t\t\t\t\tUtils.setStorageData(Encourage.STORAGE_REGISTER_DATE, Encourage.currentDay);\r\n\t\t\t\t\t\t\t\tUtils.setStorageData(Encourage.STORAGE_JUMP_COUNT, 0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tUtils.setStorageData(Encourage.STORAGE_REGISTER_DATE, Encourage.currentDay);\r\n\t\t\t\t\t\t\tUtils.setStorageData(Encourage.STORAGE_JUMP_COUNT, 0);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (MainLogic.instance.platform.getEnterChannel()) {\r\n\t\t\t\t\t\t\tvar isCpa: boolean = false;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < Encourage.cpaChannel.length; i++) {\r\n\t\t\t\t\t\t\t\tif (Number(MainLogic.instance.platform.getEnterChannel()) == Encourage.cpaChannel[i]) {\r\n\t\t\t\t\t\t\t\t\tEncourage.cpaType = 0;\r\n\t\t\t\t\t\t\t\t\tisCpa = true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (!isCpa) {\r\n\t\t\t\t\t\t\t\tEncourage.cpaType = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log(\"Encourage cpa error\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"PLAT_SWITCH - syncData:\", ConfigAll.PLAT_SWITCH);\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static readonly TYPE_NONE: number = 0;\r\n\tpublic static readonly TYPE_SHARE: number = 1;\r\n\tpublic static readonly TYPE_ADS: number = 2;\r\n\t/** 是否广告没有了 */\r\n\tpublic static isNoAds: boolean;\r\n\t/**\r\n\t * 获取当前激励类型\r\n\t */\r\n\tpublic static get type(): number {\r\n\t\tvar type: number;\r\n\t\tif (Encourage.isExaminedVersion) {\r\n\t\t\ttype = Encourage.TYPE_ADS;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (Encourage._isOpenShare) {\r\n\t\t\t\t//优先视频\r\n\t\t\t\tif (Encourage._shareNum == -1) {\r\n\t\t\t\t\t//视频没有了\r\n\t\t\t\t\tif (Encourage.isNoAds)\r\n\t\t\t\t\t\ttype = Encourage.TYPE_SHARE;\r\n\t\t\t\t\t//视频还有\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//视频次数没有到达限定次数\r\n\t\t\t\t\t\tif (Encourage.todayAds < Encourage._adsNum)\r\n\t\t\t\t\t\t\ttype = Encourage.TYPE_ADS;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttype = Encourage.TYPE_SHARE;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//优先分享\r\n\t\t\t\telse {\r\n\t\t\t\t\t//分享次数没有到达限定次数\r\n\t\t\t\t\tif (Encourage.todayShares < Encourage._shareNum) {\r\n\t\t\t\t\t\ttype = Encourage.TYPE_SHARE;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//视频没有了\r\n\t\t\t\t\t\tif (Encourage.isNoAds)\r\n\t\t\t\t\t\t\ttype = Encourage.TYPE_SHARE;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttype = Encourage.TYPE_ADS;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//分享没开\r\n\t\t\telse {\r\n\t\t\t\t//视频没有了\r\n\t\t\t\tif (Encourage.isNoAds)\r\n\t\t\t\t\ttype = Encourage.TYPE_NONE;\r\n\t\t\t\telse {\r\n\t\t\t\t\t//无限视频\r\n\t\t\t\t\tif (Encourage._adsNum == -1)\r\n\t\t\t\t\t\ttype = Encourage.TYPE_ADS;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//视频次数没有到达限定次数\r\n\t\t\t\t\t\tif (Encourage.todayAds < Encourage._adsNum)\r\n\t\t\t\t\t\t\ttype = Encourage.TYPE_ADS;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttype = Encourage.TYPE_NONE;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn type;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 播放（自动选择视频或者分享） \r\n\t * @param eventId \r\n\t * @param caller \r\n\t * @param callback \r\n\t * @param fakeShareAI \r\n\t */\r\n\tpublic static play(eventId: number, caller: any, callback: (code: { code: number }) => void, fakeShareAI: boolean = true): void {\r\n\t\tvar type: number = Encourage.type;\r\n\t\tif (type == Encourage.TYPE_ADS)\r\n\t\t\tEncourage.ads(eventId, caller, callback);\r\n\t\telse if (type == Encourage.TYPE_SHARE)\r\n\t\t\tEncourage.share(eventId, null, caller, callback, fakeShareAI);\r\n\t\telse {\r\n\t\t\tif (caller && callback)\r\n\t\t\t\tcallback.call(caller, { code: 1 });\r\n\t\t}\r\n\t}\r\n\r\n\t/** ----------------------------------------- */\r\n\t/** -----------------分享------------------ */\r\n\t/** ----------------------------------------- */\r\n\r\n\tprivate static startShareTime: number = 0;\r\n\tprivate static SHARE_RESULT: string[] = [\"分享成功啦\", \"分享失败了\", \"请分享到群\", \"要分享到不同的群哦\"];\r\n\t/**\r\n\t * 手动分享\r\n\t * @param shareInfo 分享信息\r\n\t * @param caller 调用者\r\n\t * @param callback 分享回掉\r\n\t * @param fakeShareAI 是否启用延时判断成功与否\r\n\t * @param onlyShare 简单分享，分享即为成功\r\n\t * @param count 失败时分享可重复次数\r\n\t */\r\n\tpublic static share(eventId: number, shareInfo: wx.ShareData, caller: any, callback: (code: { code: number }) => void, fakeShareAI: boolean = false, onlyShare: boolean = false, count: number = 0): void {\r\n\t\t// 发送eventId到统计平台\r\n\t\tAnalytics.sendEvent(eventId);\r\n\t\tvar isConfirm: boolean;\r\n\t\tvar shareResultCode: number = onlyShare ? 0 : Encourage.randomShareResult();\r\n\t\tif (Utils.isWXMiniGame) {\r\n\t\t\t// var tmpQuery: string = \"type=\" + shareGroupType + \"&key=\" + (weixin.WXAPI.userInfo.nickName ? weixin.WXAPI.userInfo.nickName : weixin.WXAPI.NO_NAME);\r\n\t\t\t// if (shareGroupType) {\r\n\t\t\t// \tif (query)\r\n\t\t\t// \t\tquery += \"&\" + tmpQuery;\r\n\t\t\t// \telse\r\n\t\t\t// \t\tquery = tmpQuery;\r\n\t\t\t// }\r\n\t\t\tlet aldShareInfo = shareInfo as wx.AldShareInfo;\r\n\t\t\t// aldShareInfo.ald_desc = \"分享:\" + eventId;\r\n\t\t\taldShareInfo.ald_desc = \"\" + eventId;\r\n\t\t\tconsole.log(\"aldShareInfo:\", aldShareInfo);\r\n\t\t\twx.aldShareAppMessage(aldShareInfo);\r\n\t\t\tif (shareResultCode == 0) {\r\n\t\t\t\tif (fakeShareAI) {\r\n\t\t\t\t\tEncourage.startShareTime = Utils.now;//继续判断\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//成功\r\n\t\t\t\t\tisConfirm = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//失败\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t}\r\n\t\tLaya.timer.once(1000, this, () => {\r\n\t\t\tif (isConfirm) {\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t/**用时间判断是不是假分享 */\r\n\t\t\t\tvar nowTime: number = Utils.now;\r\n\t\t\t\t// 2秒内，判定为分享失败\r\n\t\t\t\tif (nowTime - Encourage.startShareTime < 2000) {\r\n\t\t\t\t\tshareResultCode = 1;//失败\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//成功 \r\n\t\t\t\t\tshareResultCode = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tToast.show(Encourage.SHARE_RESULT[shareResultCode]);\r\n\t\t\tEncourage.doShareCallBack(shareInfo, shareResultCode, eventId, caller, callback, fakeShareAI, onlyShare, count);\r\n\t\t});\r\n\t\tEncourage.addTodayShares();\r\n\t}\r\n\r\n\t/**处理分享回调 */\r\n\tprivate static doShareCallBack(shareInfo: wx.ShareData, code: number = 0, eventId: number, caller: any, callback: (code: { code: number }) => void, fakeShareAI: boolean = false, onlyShare: boolean = false, count: number = 0): void {\r\n\t\tif (caller && callback) {\r\n\t\t\tif (code == 0) {\r\n\t\t\t\tcallback.call(caller, { code: code });\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (Encourage._needShowSecondAlert && count == 0) {\r\n\t\t\t\t\tEncourage.showModel(\"分享失败，无法获取奖励，重新分享！\", this, (response) => {\r\n\t\t\t\t\t\tif (response.code == 0)\r\n\t\t\t\t\t\t\tEncourage.share(eventId, shareInfo, caller, callback, fakeShareAI, onlyShare, 1);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tcallback.call(caller, { code: code });\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcallback.call(caller, { code: code });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static addTodayShares(): void {\r\n\t\tvar shareCount: string = Utils.getStorageData(Encourage.STORAGE_SHARE_COUNT);\r\n\t\tif (!shareCount)\r\n\t\t\tshareCount = \"0\";\r\n\t\tshareCount = (Number(shareCount) + 1) + \"\";\r\n\t\tUtils.setStorageData(Encourage.STORAGE_SHARE_COUNT, shareCount);\r\n\t}\r\n\r\n\tprivate static get todayAds(): number {\r\n\t\tvar adsCount: string = Utils.getStorageData(Encourage.STORAGE_ADS_COUNT);\r\n\t\tif (!adsCount)\r\n\t\t\tadsCount = \"0\";\r\n\t\treturn Number(adsCount);\r\n\t}\r\n\r\n\t/**微信自带二次确认弹窗 */\r\n\tpublic static showModel(msg: string, caller: any, callback: Function): void {\r\n\t\tif (wx.showModal) {\r\n\t\t\twx.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: msg,\r\n\t\t\t\tsuccess(res: any) {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t// WXAPI.log('用户点击确定')\r\n\t\t\t\t\t\tcallback.call(caller, { code: 0 });\r\n\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t// WXAPI.log('用户点击取消')\r\n\t\t\t\t\t\tcallback.call(caller, { code: 1 });\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail() {\r\n\t\t\t\t\tcallback.call(caller, { code: 1 });\r\n\t\t\t\t}\r\n\t\t\t} as any)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcallback.call(caller, { code: 1 });\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static randomShareResult(): number {\r\n\t\tvar todayShareCount: number = Encourage.todayShares;\r\n\t\tvar shareResult: number = 0;\r\n\t\t// 如果是今天第一次分享，30%概率默认失败\r\n\t\tvar randomNum: number = Math.random() * 100;\r\n\t\tif (todayShareCount == 0) {\r\n\t\t\tif (randomNum < Encourage._firstShareRandom) {\r\n\t\t\t\tshareResult = 1 + Math.floor(randomNum) % 2;\r\n\t\t\t}\r\n\t\t} else if (todayShareCount > 3) {\r\n\t\t\tif (randomNum < Encourage._moreShareRandom) {\r\n\t\t\t\tshareResult = 2 + Math.floor(randomNum) % 2;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn shareResult;\r\n\t}\r\n\r\n\tprivate static get todayShares(): number {\r\n\t\tvar shareCount: string = Utils.getStorageData(Encourage.STORAGE_SHARE_COUNT);\r\n\t\tif (!shareCount)\r\n\t\t\tshareCount = \"0\";\r\n\t\treturn Number(shareCount);\r\n\t}\r\n\r\n\t/** ----------------------------------------- */\r\n\t/** -----------------广告------------------ */\r\n\t/** ----------------------------------------- */\r\n\r\n\t// 广告宽度         在游戏中的实际宽度\r\n\t// 屏幕实际宽度     屏幕设计分辨率（720）\r\n\t// 在游戏中的实际宽度 = 广告宽度*屏幕设计分辨率（720）/屏幕实际宽度\r\n\t/**\r\n\t * 初始化（需要在微信获取到systemInfo之后执行）\r\n\t */\r\n\tpublic static setScale(): void {\r\n\t\tvar fullWidth: number = 375;\r\n\t\tif (Utils.isWXMiniGame) {\r\n\t\t\tif (Utils.getSystemInfo() && Utils.getSystemInfo().screenWidth)\r\n\t\t\t\tfullWidth = Utils.getSystemInfo().screenWidth;\r\n\t\t\telse\r\n\t\t\t\tfullWidth = 375;\r\n\t\t}\r\n\t\tEncourage._screenWidth = fullWidth;\r\n\t\tEncourage._scale = Laya.stage.width / fullWidth;\r\n\t\tconsole.log(\"fullWidth:\" + fullWidth);\r\n\t\tconsole.log(\"Encourage.scale:\" + Encourage._scale);\r\n\t}\r\n\r\n\tprivate static _dispatcher: Laya.EventDispatcher;\r\n\tpublic static get dispatcher(): Laya.EventDispatcher {\r\n\t\treturn Encourage._dispatcher;\r\n\t}\r\n\r\n\t/**\r\n\t * 重排\r\n\t * @param content 需要重新排列的组件\r\n\t * @param isFullWidthAds 是否是全宽度广告\r\n\t * @param delayShowContent 需要延迟出现的组件\r\n\t */\r\n\tpublic static reDisplay(content: Laya.View, isFullWidthAds: boolean, delayShowContent: Array<Laya.View> = null): void {\r\n\t\tif (content) {\r\n\t\t\tvar height = Encourage.getAdsHeight(isFullWidthAds);\r\n\t\t\tvar leftHeight = Laya.stage.height - height;\r\n\t\t\tvar scale = 1;\r\n\t\t\tscale = Math.min(leftHeight / content.height, 1);\r\n\t\t\t// log(\"adsheight:\" + height);\r\n\t\t\t// log(\"scale:\" + scale);\r\n\t\t\t// log(\"content.height:\" + content.height);\r\n\t\t\t// log(\"adsheight:\" + height);\r\n\t\t\tcontent.scale(scale, scale);\r\n\t\t\tcontent.y = leftHeight - content.height * scale;\r\n\t\t\tcontent.x = (Laya.stage.width - content.width * scale) * 0.5;\r\n\t\t\tif (delayShowContent) {\r\n\t\t\t\tfor (var i: number = 0; i < delayShowContent.length; i++) {\r\n\t\t\t\t\tdelayShowContent[i].visible = false;\r\n\t\t\t\t}\r\n\t\t\t\tLaya.timer.once(1200, this, () => {\r\n\t\t\t\t\tfor (var i: number = 0; i < delayShowContent.length; i++) {\r\n\t\t\t\t\t\tdelayShowContent[i].visible = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**获取IPhoneX的Y坐标偏移情况 */\r\n\tpublic static get adsOffsetY(): number {\r\n\t\tif (Utils.isWXMiniGame) {\r\n\t\t\tif (Utils.getSystemInfo() && Utils.getSystemInfo().model.indexOf(\"iPhone X\") != -1) {\r\n\t\t\t\treturn 34;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn 0;\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn 0;\r\n\t}\r\n\r\n\tpublic static getOffsetY(content: Laya.View, isFullWidthAds: boolean): number {\r\n\t\tvar srcY = content.y;\r\n\t\tvar height: number = 0;\r\n\t\tif (Utils.isWXMiniGame) {\r\n\t\t\t//容错 某些情况style拿不到\r\n\t\t\tvar banner = BannerAD.showBannerAd();\r\n\t\t\tif (banner && banner.style) {\r\n\t\t\t\tif (isFullWidthAds) {\r\n\t\t\t\t\tif (banner.style.width == 300) {\r\n\t\t\t\t\t\theight = Encourage._screenWidth * banner.style.realHeight / 300;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\theight = banner.style.realHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (banner.style.width == 300) {\r\n\t\t\t\t\t\theight = banner.style.realHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\theight = 300 * banner.style.realHeight / Encourage._screenWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theight = 100;\r\n\t\t\t}\r\n\t\t\theight += Encourage.adsOffsetY;\r\n\t\t\theight = height * Encourage._scale;\r\n\t\t}\r\n\r\n\t\tif (!height)\r\n\t\t\theight = Encourage.BANNER_NORMAL_Y;\r\n\r\n\t\tvar leftHeight = Laya.stage.height - height;\r\n\t\tvar scale = 1;\r\n\t\tscale = Math.min(leftHeight / content.height, 1);\r\n\t\tcontent.scale(scale, scale);\r\n\r\n\t\treturn srcY - (leftHeight - content.height * scale);\r\n\t}\r\n\r\n\tprivate static readonly BANNER_NORMAL_Y: number = 250.123;\r\n\tprivate static getAdsHeight(isFullWidthAds: boolean): number {\r\n\t\tvar height: number = 0;\r\n\t\tif (Utils.isWXMiniGame) {\r\n\t\t\t//容错 某些情况style拿不到\r\n\t\t\tvar banner = BannerAD.showBannerAd();\r\n\t\t\tif (banner && banner.style) {\r\n\t\t\t\tif (isFullWidthAds) {\r\n\t\t\t\t\tif (banner.style.width == 300) {\r\n\t\t\t\t\t\theight = Encourage._screenWidth * banner.style.realHeight / 300;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\theight = banner.style.realHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (banner.style.width == 300) {\r\n\t\t\t\t\t\theight = banner.style.realHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\theight = 300 * banner.style.realHeight / Encourage._screenWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theight = 100;\r\n\t\t\t}\r\n\t\t\theight += Encourage.adsOffsetY;\r\n\t\t\theight = height * Encourage._scale;\r\n\t\t}\r\n\t\telse {\r\n\t\t\theight = 150;\r\n\t\t}\r\n\t\tif (!height)\r\n\t\t\theight = Encourage.BANNER_NORMAL_Y;\r\n\t\treturn height;\r\n\t}\r\n\r\n\t/**\r\n\t * 展现banner\r\n\t */\r\n\tpublic static showBanner(): void {\r\n\t\tif (Utils.isWXMiniGame) {\r\n\t\t\tBannerAD.showBannerAd();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 隐藏banner\r\n\t */\r\n\tpublic static hideBanner(needCheckDestroy): void {\r\n\t\tif (Utils.isWXMiniGame) {\r\n\t\t\tBannerAD.hideBannerAd(false, needCheckDestroy);\r\n\t\t}\r\n\t}\r\n\r\n\t/** ----------------视频广告----------------- */\r\n\r\n\r\n\t/**\r\n\t\t * 是否是提审版本\r\n\t\t */\r\n\tpublic static get isExaminedVersion(): boolean {\r\n\t\tif (!Encourage._version || Utils.compareVer(Encourage._gameVersion, Encourage._version))\r\n\t\t\treturn true;\r\n\t\telse\r\n\t\t\treturn false;\r\n\t}\r\n\r\n\tprivate static addTodayAds(): void {\r\n\t\tvar adsCount: string = Utils.getStorageData(Encourage.STORAGE_ADS_COUNT);\r\n\t\tif (!adsCount)\r\n\t\t\tadsCount = \"0\";\r\n\t\tadsCount = (Number(adsCount) + 1) + \"\";\r\n\t\tUtils.setStorageData(Encourage.STORAGE_ADS_COUNT, adsCount);\r\n\t}\r\n\r\n\t/**手动广告 */\r\n\tpublic static ads(eventId: number, caller: any, callback: (code: { code: number }) => void, isNoAdsShare: boolean = true, count: number = 0): void {\r\n\t\tif (eventId < 99999)\r\n\t\t\teventId += 800000;\r\n\r\n\t\t// 发送事件到统计平台\r\n\t\tAnalytics.sendEvent(eventId);\r\n\t\t// var playCoutDayNum: number = tools.Utils.getStorageData(\"PlayCoutDayNum\", \"number\");\r\n\t\t// if (Encourage.isNoAds || (Encourage._isNewPlayer && playCoutDayNum < Encourage.newOpenWatchNum)) {\r\n\t\tif (Encourage.isNoAds) {\r\n\t\t\tif (isNoAdsShare) {\r\n\t\t\t\tif (Encourage._isOpenShare && !Encourage.isExaminedVersion) {\r\n\t\t\t\t\tEncourage.share(eventId, null, caller, callback, true);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tToast.show(\"无法获取视频\");\r\n\t\t\t\t\tif (caller && callback)\r\n\t\t\t\t\t\tcallback.call(caller, { code: -1 });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tToast.show(\"无法获取视频\");\r\n\t\t\t\tif (caller && callback)\r\n\t\t\t\t\tcallback.call(caller, { code: -1 });\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (Utils.isWXMiniGame) {\r\n\t\t\t\tRewardAD.showRewardedVideoAd(this, (response) => {\r\n\t\t\t\t\t// 把视频的错误id改成负数\r\n\t\t\t\t\tif (response.code > 0) {\r\n\t\t\t\t\t\tresponse.code = 0 - response.code;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (response.code == 0)\r\n\t\t\t\t\t\tEncourage.addTodayAds();\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (Encourage._needShowSecondAlert && count == 0) {\r\n\t\t\t\t\t\t\tEncourage.showModel(\"视频没有看完，无法获取奖励，再看一次！\", this, (res) => {\r\n\t\t\t\t\t\t\t\tif (res.code == 0)\r\n\t\t\t\t\t\t\t\t\tEncourage.ads(eventId, caller, callback, isNoAdsShare, 1);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tcallback.call(caller, { code: response.code });\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (caller && callback)\r\n\t\t\t\t\t\tcallback.call(caller, { code: response.code });\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tLaya.timer.once(500, this, () => {\r\n\t\t\t\t\tif (caller && callback)\r\n\t\t\t\t\t\tcallback.call(caller, { code: 0 });\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**---------------------插屏广告--------------- */\r\n\tpublic static showInterstitialAd(): void {\r\n\t\tif (this._interstitialId)\r\n\t\t\tInterstitialAD.createInterstitialAd(this._interstitialId)\r\n\t}\r\n}","import GameConfig from \"./GameConfig\";\r\nimport { ConfigAll, ControllCenter, PlatformType } from \"./cfg/ConfigAll\";\r\nimport { PlatformFactory } from \"./platform/PlatformFactory\";\r\nimport { IPlatform } from \"./platform/IPlatform\";\r\nimport Utils from \"./utils/Utils\";\r\nimport { Encourage } from \"./encourage/Encourage\";\r\nimport { Toast } from \"./utils/UI\";\r\n\r\nexport class MainLogic extends Laya.EventDispatcher {\r\n\r\n    private static _instance: MainLogic;\r\n    public static get instance(): MainLogic {\r\n        if (!MainLogic._instance)\r\n            MainLogic._instance = new MainLogic();\r\n        return MainLogic._instance;\r\n    }\r\n\r\n    /**Laya.scene.open 每次会重新new 界面 ，\r\n     * 导致接界面中的init调用多次，从而多次发送资源到子域，\r\n     * 造成子域多次创建BigRank排行榜显示重复，因此假加以下标志 */\r\n    public isSendedResToOpenData: boolean = false;\r\n\r\n    private mPlatform: IPlatform;\r\n\r\n    public get platform(): IPlatform {\r\n\r\n        return this.mPlatform;\r\n    }\r\n\r\n    public init(): void {\r\n        ControllCenter.PLATFORM_TYPE = PlatformType.DEV;\r\n        if (Utils.isWXMiniGame) {\r\n            ControllCenter.PLATFORM_TYPE = PlatformType.WX;\r\n        }\r\n        this.mPlatform = PlatformFactory.inst.getPlatform(ControllCenter.PLATFORM_TYPE);\r\n        this.mPlatform.init(() => {\r\n            window[\"Encourage\"] = Encourage;\r\n            window[\"Toast\"] = Toast;\r\n            Encourage.init();\r\n            MainLogic.instance.platform.onShare(() => {\r\n                // let shareUnit = Data.Parameters.instance.share.getUnit(1);\r\n                // return {\r\n                //     title: shareUnit.Title,\r\n                //     imageUrl: shareUnit.PicUrl1\r\n                // }\r\n                return {\r\n                    title: \"球球向上\",\r\n                    imageUrl: \"\"\r\n                }\r\n            });\r\n\r\n            // this.mPlatform.login(() => {\r\n\r\n            //     this.mInitPlatformOk = true;\r\n            //     if (this.mLoadStartResourceOk) {\r\n\r\n            //         this.initOk();\r\n            //     }\r\n            // });\r\n\r\n            this.startLoadRes();\r\n\r\n        })\r\n\r\n    }\r\n\r\n    // ------------\r\n\r\n    private onResLoad(): void {\r\n        this.expandLaya();\r\n\r\n        // ui层放到3d场景之上\r\n        Laya.Scene.root.zOrder = 1;\r\n        GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\r\n\r\n    }\r\n\r\n    private startLoadRes(): void {\r\n        var urlUI: Array<any> = [\r\n            { url: ConfigAll.URL_BG0, type: Laya.Loader.IMAGE },\r\n            { url: ConfigAll.URL_COMP, type: Laya.Loader.ATLAS },\r\n        ]\r\n\r\n        let urls = [].concat(urlUI);\r\n\r\n        Laya.loader.create(urls, Laya.Handler.create(this, this.onResLoad));\r\n\r\n\r\n    }\r\n\r\n    public onlyShare(): void {\r\n        MainLogic.instance.platform.appShare(ControllCenter.ShareInfo.title, ControllCenter.ShareInfo.imageUrl);\r\n    }\r\n\r\n    private expandLaya(): void {\r\n        Laya.Label.prototype[\"num\"] = function (value: number, time: number, postfix?: string, startValue: number = 0, prefix?: string, cb?: Function) {\r\n            // console.log(\"test value\" + String(value));\r\n\r\n            let interval = ((value - startValue) / time);\r\n            let tempValue = startValue;\r\n            let timer = new Laya.Timer();\r\n            let startTime = timer.currTimer;\r\n            timer.loop(50, this, () => {\r\n                tempValue += interval * 50;\r\n                // console.log(\"current value : \" + String(Math.round(tempValue)));\r\n\r\n                let pre = prefix ? prefix : \"\";\r\n                let post = postfix ? postfix : \"\";\r\n\r\n                this.text = pre + String(Math.round(tempValue)) + post;\r\n\r\n                let endTime = timer.currTimer;\r\n                if ((endTime - startTime) >= time) {\r\n                    timer.clearAll(this);\r\n                    this.text = pre + String(value) + post;\r\n                    if (cb) cb();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}","import { ui } from \"../ui/layaMaxUI\";\nimport { GameCtrl } from \"../game/GameCtrl\";\nimport GameConfig from \"../GameConfig\";\nimport { UserDataCtrl } from \"../game/UserDataCtrl\";\nimport Utils from \"../utils/Utils\";\nimport LevelUpScene from \"./LevelUpScene\";\nimport { MainLogic } from \"../MainLogic\";\nimport RecoverScene from \"./RecoverScene\";\nimport { ConfigAll } from \"../cfg/ConfigAll\";\nimport { Encourage } from \"../encourage/Encourage\";\n/**\n * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联\n * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果\n * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。\n */\nexport default class FriendRankScene extends ui.FriendRankSceneUI {\n    public static LOCAL: string = 'view/FriendRankScene.ts';\n    public static SCENE: string = 'FriendRankScene.scene';\n\n    private _preScene: any;\n\n    constructor() {\n        super();\n\n        this.init();\n    }\n\n    onEnable(): void {\n        Laya.Tween.from(this, { alpha: 0.2 }, 300, null, Laya.Handler.create(this, () => {\n\n        }));\n\n        if (Laya.Browser.onMiniGame) {\n            if (!MainLogic.instance.isSendedResToOpenData) {\n                //加载完成\n                //使用接口将图集透传到子域\n                Laya.MiniAdpter.sendAtlasToOpenDataContext(\"res/atlas/comp.atlas\");\n                //使用接口将json投促函到子域\n                // Laya.MiniAdpter.sendJsonDataToDataContext(\"json/reward.json\");\n\n                MainLogic.instance.isSendedResToOpenData = true;\n            } else {\n                wx.postMessage({ cmd: \"REFRESH_RANK\" });\n            }\n        }\n    }\n\n    onOpened(preScene: any): void {\n        console.log(\"FriendRankScene onOpened\");\n        this._preScene = preScene;\n        this.openDataCanvas.visible = true;\n\n        if (ConfigAll.PLAT_SWITCH.SHOW_BANNER_AD_FRIEND_RANKSCENE) {\n            Encourage.showBanner();\n        }\n\n    }\n\n    onClosed(): void {\n        console.log(\"FriendRankScene onClosed\");\n        Encourage.hideBanner(true);\n        this.openDataCanvas.visible = false;\n    }\n\n    private init(): void {\n        this.btnBack.on(Laya.Event.CLICK, this, this.onBtnBack)\n    }\n\n    private onBtnBack(): void {\n        console.log(\"onBtnBack\");\n        Laya.Scene.close(FriendRankScene.SCENE);\n        Laya.Scene.open(this._preScene.SCENE, false);\n    }\n}","/*\n* 事件类\n*/\n// module controller {\n    export class EventCenter extends Laya.EventDispatcher {\n\n        private static mInstance: EventCenter;\n\n        on(type: any, caller: any, listener: Function, args?: Array<any>): Laya.EventDispatcher {\n            return super.on(String(type), caller, listener, args);\n        }\n\n        once(type: any, caller: any, listener: Function, args?: Array<any>): Laya.EventDispatcher {\n            return super.once(String(type), caller, listener, args);\n        }\n\n        off(type: any, caller: any, listener: Function, onceOnly?: boolean): Laya.EventDispatcher {\n            return super.off(String(type), caller, listener, onceOnly);\n        }\n\n        event(type: any, data?: any): boolean {\n            return super.event(String(type), data);\n        }\n\n        public static get instance(): EventCenter {\n\n            if (!EventCenter.mInstance) {\n\n                EventCenter.mInstance = new EventCenter();\n            }\n\n            return EventCenter.mInstance;\n        }\n    }\n// }","/*\n* 事件类\n*/\n// module controller {\nexport class EventType extends Laya.EventDispatcher {\n\n    // 游戏结束\n    public static readonly GAME_STATE: string = \"GAME_STATE\";\n\n    // 更新关卡数据\n    public static readonly UPDATE_LEVEL: string = \"UPDATE_LEVEL\";\n    public static readonly UPDATE_CHILD_LEVEL: string = \"UPDATE_CHILD_LEVEL\";\n\n    /** 一层圆柱完成 */\n    public static readonly CYLINDER_COMPLETE: string = \"CYLINDER_COMPLETE\";\n\n    public static readonly ON_CREATE_PLAYER: string = \"ON_CREATE_PLAYER\";\n\n    public static readonly UPDATE_GEM_NUM: string = \"UPDATE_GEM_NUM\";\n    public static readonly UPDATE_SCORE: string = \"UPDATE_SCORE\";\n\n    public static readonly ON_BALL_SHOOT: string = \"ON_BALL_SHOOT\";\n    public static readonly ON_RECOVER: string = \"ON_RECOVER\";\n}\n// }","import { GameCtrl, GameState } from \"./GameCtrl\";\nimport { ConfigAll } from \"../cfg/ConfigAll\";\nimport LevelCtrl from \"./LevelCtrl\";\n\nexport default class EnemyGroupCtrl extends Laya.Script3D {\n    private _gameObject: Laya.Sprite3D;\n    private _player: Laya.Sprite3D;\n    private _speed: number;//速度\n    private readonly speedRange = [0.001, 0.0025];\n    private _a: number;//加速度\n    private _tween: Laya.Tween;\n\n    onAwake(): void {\n        console.log(\"EnemyGroupCtrl onStart\");\n        let obj = this.owner as Laya.Sprite3D;\n        this._gameObject = obj;\n\n        this._tween = new Laya.Tween();\n        this.resetSpeed();\n    }\n\n    onUpdate(): void {\n        if (GameCtrl.instance.gameState != GameState.Playing) return;\n\n        // console.log(\"this._speed = \", this._speed)\n        // this._speed = 0.003;\n        this._gameObject.transform.rotate(new Laya.Vector3(0, this._speed * Laya.timer.delta, 0), true)\n    }\n\n    public reset(): void {\n        this.resetSpeed();\n    }\n\n    private resetSpeed(): void {\n        this._tween.clear();\n        this._speed = this.speedRange[1];\n\n        if (LevelCtrl.instance.curChildLevel > 1) this.dealSpeed();\n    }\n\n    private dealSpeed(delay: number = null): void {\n        if (delay == null) delay = Math.random() * 300;\n\n        this._tween.to(this, { _speed: 0 }, 3000, null, Laya.Handler.create(this, () => {\n            let aimSpeed = this.speedRange[1];\n            if (Math.random() >= 0.5) aimSpeed *= -1;\n            this._tween.to(this, { _speed: aimSpeed }, 3000, null, Laya.Handler.create(this, () => {\n                this.dealSpeed();\n            }))\n        }), delay)\n    }\n\n\n}","type Vector3 = Laya.Vector3;\n\nexport class Vector3Util {\n\n    public static back = new Laya.Vector3(0, 0, -1);\n    public static down = new Laya.Vector3(0, -1, 0);\n    public static forward = new Laya.Vector3(0, 0, 1);\n    public static left = new Laya.Vector3(-1, 0, 0);\n    public static one = new Laya.Vector3(1, 1, 1);\n    public static right = new Laya.Vector3(1, 0, 0);\n    public static up = new Laya.Vector3(0, 1, 0);\n    public static zero = new Laya.Vector3(0, 0, 0);\n\n\n    /**\n     * 深拷贝\n     * @param v1 \n     */\n    public static copy(v1: Vector3): Vector3 {\n        return new Laya.Vector3(v1.x, v1.y, v1.z);\n    }\n\n    /**\n     * 加\n     * @param v1 \n     * @param v2 \n     */\n    public static add(v1: Vector3, v2: Vector3): Vector3 {\n        return new Laya.Vector3(v1.x + v2.x, v1.y + v2.y, v1.z + v2.z);\n    }\n\n    /**\n     * 加\n     * @param params \n     */\n    public static addMore(...params: Vector3[]): Vector3 {\n        if (!(params instanceof Array)) {\n            params = [];\n        }\n        let ret = new Laya.Vector3();\n        for (let ele of params) {\n            ret.x += ele.x;\n            ret.y += ele.y;\n            ret.z += ele.z;\n        }\n        return ret;\n    }\n\n    /**\n     * 减\n     * @param v1 \n     * @param v2 \n     */\n    public static sub(v1: Vector3, v2: Vector3): Vector3 {\n        return new Laya.Vector3(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z);\n    }\n\n    //乘 除\n    public static mulNum(v: Vector3, num: number): Vector3 {\n        return new Laya.Vector3(v.x * num, v.y * num, v.z * num);\n    }\n\n    /**\n     * 负向量\n     * @param v\n     */\n    public static negative(v: Vector3): Vector3 {\n        return new Laya.Vector3(-v.x, -v.y, -v.z);\n    }\n\n\n    public static normalize(v: Vector3): Laya.Vector3 {\n        let ret = new Laya.Vector3();\n        Laya.Vector3.normalize(v, ret)\n        return ret;\n    }\n\n    /**\n     * 平方根\n     * @param v\n     */\n    public static sqrt(v: Vector3): number {\n        return Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n    }\n\n    /**\n     * Catmull-Rom 曲线插值\n     * @param v0 \n     * @param v1 \n     * @param v2 \n     * @param v3 \n     * @param t \n     */\n    public static catmullRom(v0: Vector3, v1: Vector3, v2: Vector3, v3: Vector3, t: number): Vector3 {\n\n        let factor: number = 0.5;\n        let c0: Vector3 = v1;\n        let c1: Vector3 = Vector3Util.mulNum(Vector3Util.sub(v2, v0), factor);\n\n        let c2_temp1 = Vector3Util.mulNum(Vector3Util.sub(v2, v1), 3);\n        let c2_temp2 = Vector3Util.mulNum(Vector3Util.sub(v3, v1), factor);\n        let c2_temp3 = Vector3Util.mulNum(Vector3Util.sub(v2, v0), 2 * factor);\n        let c2: Vector3 = Vector3Util.sub(Vector3Util.sub(c2_temp1, c2_temp2), c2_temp3)\n\n        let c3_temp1 = Vector3Util.mulNum(Vector3Util.sub(v2, v1), -2);\n        let c3_temp2 = Vector3Util.mulNum(Vector3Util.sub(v3, v1), factor);\n        let c3_temp3 = Vector3Util.mulNum(Vector3Util.sub(v2, v0), factor);\n        let c3: Vector3 = Vector3Util.addMore(c3_temp1, c3_temp2, c3_temp3);\n\n        let temp1 = Vector3Util.mulNum(c3, (t * t * t));\n        let temp2 = Vector3Util.mulNum(c2, (t * t));\n        let temp3 = Vector3Util.mulNum(c1, t);\n        let temp4 = c0\n        let curve = Vector3Util.addMore(temp1, temp2, temp3, temp4);\n\n        return curve;\n    }\n}\n","import { SoundCtrl } from \"./SoundCtrl\";\r\nimport { UserDataCtrl } from \"../../game/UserDataCtrl\";\r\nimport Utils from \"../../utils/Utils\";\r\nimport { MainLogic } from \"../../MainLogic\";\r\nimport { WXPlatform } from \"../../platform/WXPlatform\";\r\nimport { UserDataEvent } from \"../../game/UserDataEvent\";\r\n\r\nexport class SoundHelp {\r\n\tprivate static _instance: SoundHelp;\r\n\tpublic static get instance(): SoundHelp {\r\n\t\tif (!this._instance) {\r\n\t\t\tthis._instance = new SoundHelp();\r\n\t\t}\r\n\t\treturn this._instance;\r\n\t}\r\n\t/**格式化 */\r\n\tprivate soundFormat(url: string): string {\r\n\t\turl = \"res/audio/\" + url;\r\n\t\treturn url + \".mp3\";\r\n\t}\r\n\r\n\t/**播放背景音乐 */\r\n\tpublic playBgm(): void {\r\n\t\tif (UserDataCtrl.instance.music)\r\n\t\t\tSoundCtrl.instance.playMusic(this.soundFormat(\"bgm\"));\r\n\t}\r\n\r\n\t/**球击中成功 */\r\n\tpublic playHit(): void {\r\n\t\tthis.play(\"se_balhit\");\r\n\t}\r\n\r\n\t/**球撞击死亡 */\r\n\tpublic playHitDie(): void {\r\n\t\tthis.play(\"se_ballhitdie\");\r\n\t}\r\n\r\n\t/**大关卡升级 */\r\n\tpublic playLevelUp(): void {\r\n\t\tthis.play(\"se_levelup\");\r\n\t}\r\n\r\n\t/**一层圆柱完成 */\r\n\tpublic playCircleLayerFinish(): void {\r\n\t\tthis.play(\"se_stagefinish\");\r\n\t}\r\n\r\n\tprivate _lastTime: number;\r\n\tprivate _lastUrl: string;\r\n\t/**播放音效 */\r\n\tprivate play(url: string, needDua: boolean = false, loop: number = 1): void {\r\n\t\tif (UserDataCtrl.instance.sound) {\r\n\t\t\tif (needDua && this._lastUrl == url) {\r\n\t\t\t\tvar now: number = Utils.now;\r\n\t\t\t\tif (this._lastTime) {\r\n\t\t\t\t\tif ((now - this._lastTime) > 100) {\r\n\t\t\t\t\t\tSoundCtrl.instance.playSound(this.soundFormat(url), loop);\r\n\t\t\t\t\t\tthis._lastTime = now;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._lastTime = now;\r\n\t\t\t\t\tSoundCtrl.instance.playSound(this.soundFormat(url), loop);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tSoundCtrl.instance.playSound(this.soundFormat(url), loop);\r\n\t\t\tthis._lastUrl = url;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic vibrate(): void {\r\n\t\tif (UserDataCtrl.instance.vibrate) {\r\n\t\t\tif (Utils.isWXMiniGame)\r\n\t\t\t\t(MainLogic.instance.platform as WXPlatform).vibrateShort();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { GameCtrl, SectionStatus, GameState } from \"./GameCtrl\";\nimport { ConfigAll } from \"../cfg/ConfigAll\";\nimport { Vector3Util } from \"../utils/Vector3Util\";\nimport LevelCtrl from \"./LevelCtrl\";\nimport GameConfig from \"../GameConfig\";\nimport { UserDataCtrl } from \"./UserDataCtrl\";\nimport { EventCenter } from \"../event/EventCenter\";\nimport { EventType } from \"../event/EventType\";\nimport { SoundHelp } from \"../controller/sound/SoundHelp\";\nimport FriendRankScene from \"../view/FriendRankScene\";\n\nexport default class PlayerCtrl extends Laya.Script3D {\n    private _gameObject: Laya.Sprite3D;\n    private _player: Laya.Sprite3D;\n    private _rig: Laya.Rigidbody3D;\n    private _sphere: Laya.Sprite3D;\n    private _target: Laya.Sprite3D;\n    private _dir: Laya.Vector3;\n    private _canShoot: boolean;\n    private _isTriggerEntered: boolean;\n    private _startPos: Laya.Vector3;\n\n    onEnable(): void {\n        console.log(\"PlayerCtrl onStart\");\n        let obj = this.owner as Laya.Sprite3D;\n        this._gameObject = obj;\n        // this._sphere = obj.getChildByName(\"Player\") as Laya.Sprite3D;\n        this._sphere = obj;\n        this._rig = this._sphere.getComponent(Laya.Rigidbody3D)\n        // this._target = obj.getChildByName(\"Target\") as Laya.Sprite3D;\n        this._target = GameCtrl.instance.playerTargetPoint;\n        this._startPos = Vector3Util.copy(this._gameObject.transform.position);\n        this._dir = Vector3Util.normalize(Vector3Util.sub(this._target.transform.position, this._sphere.transform.position));\n\n        window[\"player\"] = this._gameObject;\n        window[\"rig\"] = this._rig;\n        this.addListener();\n        this.showStepInAni();\n\n        GameCtrl.instance.temoCount++;\n    }\n\n    private static tCount: number = 0;\n    private showStepInAni(): void {\n        PlayerCtrl.tCount++;\n        this._canShoot = false;\n        let trail = this._gameObject.getChildByName(\"Trail\") as Laya.Sprite3D;\n        trail.active = false;\n        let localPY = this._gameObject.transform.localPositionY;\n        console.log(\"t1111--\" + PlayerCtrl.tCount + \"this._gameObject.transform.position - pre:\", this._gameObject.transform.position)\n        Laya.Tween.from(this._gameObject.transform, { localPositionY: localPY - 3 }, 30, null, Laya.Handler.create(this, () => {\n            console.log(\"t1111--\" + PlayerCtrl.tCount + \"t1111--this._gameObject.transform.position - aft:\", this._gameObject.transform.position)\n            // 通过上面日志发现通过Laya.Tween以后z坐标有时会变为0，导致球会击中圆柱对边，故用以下代码重置初始位置\n            this._gameObject.transform.position = this._startPos;\n            this._canShoot = true;\n            trail.active = true;\n        }));\n    }\n\n    onUpdate(): void {\n        // console.log(\"PlayerCtrl update: temoCount = \", GameCtrl.instance.temoCount);\n    }\n\n    onDestroy(): void {\n        console.log(\"PlayerCtrl onDestroy: temoCount = \", GameCtrl.instance.temoCount);\n        this.removeListener();\n    }\n\n    private tempT: number = 0;\n    /* onCollisionEnter(collision: Laya.Collision): void {\n        console.log(\"onCollisionEnter\");\n        console.log(\"onCollisionEnter tempT: \", this.tempT++);\n        console.log(collision);\n\n        if (GameCtrl.instance.gameState != GameState.Playing) return;\n\n        // 震动敌方\n        GameCtrl.instance.shakeEnemyGroup();\n\n        let hitPoint: Laya.Vector3;\n\n        if (collision.other.owner.name === \"AfterPaint\") {\n            // 碰到已染色扇形：死亡\n            console.log(\"碰到已染色扇形：死亡\")\n            console.log(\"===\", collision.contacts)\n            if (collision.contacts.length > 0) {\n                SoundHelp.instance.playHitDie();\n                hitPoint = collision.contacts[0].positionOnB;\n                // 扇区变为血红色\n                GameCtrl.instance.setSectionStatus((collision.other.owner as Laya.Sprite3D).parent as Laya.Sprite3D, SectionStatus.Dead);\n                this.dealDead();\n\n                return; // 不再进行后续判断\n            }\n        }\n\n        // if (collision.other.owner.name === \"sector\") {\n        if (collision.other.owner.name === \"BeforePaint\") {\n            // 碰到环形圆柱：进行染色\n            console.log(\"碰到环形圆柱：染色\")\n            console.log(\"===\", collision.contacts)\n            if (collision.contacts.length > 0) {\n                SoundHelp.instance.playHit();\n                hitPoint = collision.contacts[0].positionOnB;\n\n                let sector = (collision.other.owner as Laya.Sprite3D).parent as Laya.Sprite3D;\n                // 染色\n                GameCtrl.instance.setSectionStatus(sector, SectionStatus.Paint);\n\n                // 炸开效果\n                // let ballBombEffect = window[\"ballBombEffect\"].clone() as Laya.Sprite3D;\n                // ballBombEffect.transform.position = this._gameObject.transform.position;\n                // GameCtrl.instance.scene.addChild(ballBombEffect);\n\n                // 销毁player\n                this.owner.destroy();\n\n                // 处理扇区上宝石逻辑\n                let gem = sector.getChildByName(\"Gem\") as Laya.Sprite3D;\n                if (gem.active) {\n                    // 宝石数量+1\n                    let oldGemNum = UserDataCtrl.instance.gemNum;\n                    let newGemNum = oldGemNum + 1;\n                    UserDataCtrl.instance.recordGemNum(newGemNum);\n                    EventCenter.instance.event(EventType.UPDATE_GEM_NUM, [true, oldGemNum]);\n                    // 销毁宝石\n                    gem.destroy();\n                }\n            }\n        }\n\n        // if (collision.other.owner.name === \"Gem\") {\n        //     // 碰到宝石\n        //     console.log(\"碰到宝石：宝石数量增加\")\n        //     console.log(\"===\", collision.contacts)\n        //     if (collision.contacts.length > 0) {\n        //         hitPoint = collision.contacts[0].positionOnB;\n        //         // 增加宝石\n        //     }\n        // }\n\n    } */\n\n    onTriggerEnter(other: Laya.PhysicsComponent): void {\n        if (this._isTriggerEntered) return;\n        this._isTriggerEntered = true;\n        console.log(\"onTriggerEnter\");\n        console.log(\"onTriggerEnter other \", other);\n        if (GameCtrl.instance.gameState != GameState.Playing) return;\n\n        // 震动敌方\n        GameCtrl.instance.shakeEnemyGroup();\n\n        let hitPoint: Laya.Vector3;\n\n        if (other.owner.name === \"AfterPaint\") {\n            // 碰到已染色扇形：死亡\n            console.log(\"碰到已染色扇形：死亡\")\n            SoundHelp.instance.playHitDie();\n            // 扇区变为血红色\n            GameCtrl.instance.setSectionStatus((other.owner as Laya.Sprite3D).parent as Laya.Sprite3D, SectionStatus.Dead);\n            this.dealDead();\n\n            return; // 不再进行后续判断\n        }\n\n        // if (collision.other.owner.name === \"sector\") {\n        if (other.owner.name === \"BeforePaint\") {\n            // 碰到环形圆柱：进行染色\n            console.log(\"碰到环形圆柱：染色\")\n            SoundHelp.instance.playHit();\n\n            let sector = (other.owner as Laya.Sprite3D).parent as Laya.Sprite3D;\n            // 染色\n            GameCtrl.instance.setSectionStatus(sector, SectionStatus.Paint);\n\n            // 炸开效果\n            // let ballBombEffect = window[\"ballBombEffect\"].clone() as Laya.Sprite3D;\n            // ballBombEffect.transform.position = this._gameObject.transform.position;\n            // GameCtrl.instance.scene.addChild(ballBombEffect);\n\n            // 销毁player\n            this.owner.destroy();\n\n            // 处理扇区上宝石逻辑\n            let gem = sector.getChildByName(\"Gem\") as Laya.Sprite3D;\n            if (gem.active) {\n                // 宝石数量+1\n                let oldGemNum = UserDataCtrl.instance.gemNum;\n                let newGemNum = oldGemNum + 1;\n                UserDataCtrl.instance.recordGemNum(newGemNum);\n                EventCenter.instance.event(EventType.UPDATE_GEM_NUM, [true, oldGemNum]);\n                // 销毁宝石\n                gem.destroy();\n            }\n        }\n\n        // if (collision.other.owner.name === \"Gem\") {\n        //     // 碰到宝石\n        //     console.log(\"碰到宝石：宝石数量增加\")\n        //     console.log(\"===\", collision.contacts)\n        //     if (collision.contacts.length > 0) {\n        //         hitPoint = collision.contacts[0].positionOnB;\n        //         // 增加宝石\n        //     }\n        // }\n    }\n    onTriggerStay(): void {\n        // console.log(\"onTriggerStay\");\n    }\n\n    private shootBall(): void {\n        if (GameCtrl.instance.gameState != GameState.Playing) return;\n        if (!this._canShoot) return;\n        this._canShoot = false;\n        this.removeListener();\n\n        /**方法一：使用刚体 */\n        let speed = 30;\n        this._rig.linearVelocity = Vector3Util.mulNum(this._dir, speed);\n        console.log(\"shootBall --this._rig.linearVelocity\", this._rig.linearVelocity)\n\n        /**方法二：使用缓动 */\n        // Laya.Tween.to(this._gameObject.transform, {\n        //     localPositionX: this._target.transform.localPositionX,\n        //     localPositionY: this._target.transform.localPositionY,\n        //     localPositionZ: this._target.transform.localPositionZ,\n        // }, 100)\n\n        // this._gameObject.transform.position = this._target.transform.position;\n\n        EventCenter.instance.event(EventType.ON_BALL_SHOOT);\n    }\n\n    private dealDead(): void {\n        GameCtrl.instance.gameState = GameState.Fail;\n        this.removeListener();\n\n        // this._rig.linearVelocity = new Laya.Vector3(15, -13, 0);\n        this._rig.linearVelocity = new Laya.Vector3(12, 1, 0);\n        this._rig.overrideGravity = true;\n        this._rig.gravity = new Laya.Vector3(0, -25, 0);\n        // this._rig.applyForce(new Laya.Vector3(20, -500, 0));\n        Laya.timer.once(5000, this, () => {\n            this._gameObject.destroy();\n        })\n    }\n\n    /* --------------------------------- 鼠标移动 ----------------------------------*/\n\n    private addListener(): void {\n        Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.onMouseEvent);\n        Laya.stage.on(Laya.Event.MOUSE_UP, this, this.onMouseEvent);\n        Laya.stage.on(Laya.Event.MOUSE_MOVE, this, this.onMouseEvent);\n        Laya.stage.on(Laya.Event.MOUSE_OUT, this, this.onMouseEvent);\n    }\n\n    private removeListener(): void {\n        Laya.stage.off(Laya.Event.MOUSE_DOWN, this, this.onMouseEvent);\n        Laya.stage.off(Laya.Event.MOUSE_UP, this, this.onMouseEvent);\n        Laya.stage.off(Laya.Event.MOUSE_MOVE, this, this.onMouseEvent);\n        Laya.stage.off(Laya.Event.MOUSE_OUT, this, this.onMouseEvent);\n    }\n\n    private touchTempX: number;\n    private touchTempY: number;\n    private onMouseEvent(e: Laya.Event): void {\n        // console.log(\"e.type\", e.type)\n        switch (e.type) {\n            case Laya.Event.MOUSE_DOWN:\n                this.touchTempX = e.stageX;\n                this.touchTempY = e.stageY;\n\n                // 发球\n                this.shootBall();\n\n                break;\n            case Laya.Event.MOUSE_MOVE:\n                let deltaX = e.stageX - this.touchTempX;\n                let deltaY = e.stageY - this.touchTempY;\n\n                break\n            case Laya.Event.MOUSE_UP:\n\n                break;\n        }\n    }\n}","import { ui } from \"../ui/layaMaxUI\";\nimport { GameCtrl } from \"../game/GameCtrl\";\nimport GameConfig from \"../GameConfig\";\nimport { ConfigAll, ControllCenter } from \"../cfg/ConfigAll\";\nimport { UserDataCtrl } from \"../game/UserDataCtrl\";\nimport Utils from \"../utils/Utils\";\nimport { MainLogic } from \"../MainLogic\";\nimport { Encourage } from \"../encourage/Encourage\";\nimport { EventCenter } from \"../event/EventCenter\";\nimport { EventType } from \"../event/EventType\";\nimport FriendRankScene from \"./FriendRankScene\";\nimport { AnaEvent } from \"../com.sky1231/AnaEvent\";\nimport { Analytics } from \"../com.sky1231/Analytics\";\nimport { Toast } from \"../utils/UI\";\n/**\n * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联\n * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果\n * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。\n */\nexport default class RecoverScene extends ui.RecoverSceneUI {\n    public static LOCAL: string = 'view/RecoverScene.ts';\n    public static SCENE: string = 'RecoverScene.scene';\n\n    private _recoverType: RecoverType;\n\n    constructor() {\n        super();\n\n        this.init();\n\n    }\n\n    onEnable(): void {\n        console.log(\"RecoverScene onEnable\");\n        Laya.Tween.from(this, { alpha: 0.2 }, 300, null, Laya.Handler.create(this, () => {\n        }));\n\n        this.dealBtnRecoverStatus();\n    }\n\n    onOpened(): void {\n        // 至少过一关才显示排行榜按钮\n        this.btnRank.visible = UserDataCtrl.instance.levelIndex > 1;\n\n        if (ConfigAll.PLAT_SWITCH.SHOW_BANNER_AD_RECOVERSCENE) {\n            Encourage.showBanner();\n        }\n\n    }\n\n    onClosed(): void {\n        Encourage.hideBanner(true);\n    }\n\n    private dealBtnRecoverStatus(): void {\n        if (ConfigAll.RECOVER_REQ_GEM_NUM <= UserDataCtrl.instance.gemNum) {\n            // 可用宝石复活\n            this._recoverType = RecoverType.GEM;\n        } else if (Utils.isWXMiniGame) {\n            // let isShare = 1 >= 0.5;\n            let isShare = Math.random() >= 0.5;\n            this._recoverType = isShare ? RecoverType.SHARE : RecoverType.VIDEO;\n            if (!ConfigAll.PLAT_SWITCH.USE_VIDEO_TO_REVIVE) {\n                //  如果使用视频复活开关关闭则强制使用分享）\n                this._recoverType = RecoverType.SHARE;\n            }\n        } else {\n            // 无分享或视频广告平台\n            this._recoverType = RecoverType.NONE;\n        }\n\n        // this._recoverType = 0;// TODO 微信调试方便强行改为 NONE\n\n\n        this.imgGem.visible = this._recoverType == RecoverType.GEM;\n        this.imgShare.visible = this._recoverType == RecoverType.SHARE;\n        this.imgVideo.visible = this._recoverType == RecoverType.VIDEO;\n\n        if (Utils.isWXMiniGame && Encourage.isExaminedVersion) {\n            // 在未有视频广告id前，提交测试版本强制隐藏复活按钮\n            if (Encourage.isExaminedVersion) {\n                this.btnRecover.visible = false;\n            }\n        } else {\n            this.btnRecover.visible = true;\n        }\n    }\n\n    private init(): void {\n        this.btnRecover.on(Laya.Event.CLICK, this, this.onBtnRecover)\n        this.btnRestart.on(Laya.Event.CLICK, this, this.onBtnRestart)\n        this.btnRank.on(Laya.Event.CLICK, this, this.onBtnRank)\n        this.btnRank.visible = false;\n    }\n\n    private onBtnRecover(): void {\n        console.log(\"onBtnRecover\");\n        switch (this._recoverType) {\n            case RecoverType.NONE:\n                GameCtrl.instance.recoverCurChildLevel();\n                Laya.Scene.close(RecoverScene.SCENE);\n                break;\n            case RecoverType.GEM:\n                // 扣除宝石\n                Analytics.sendEvent(AnaEvent.BTN_REVIVE_GEM);\n                let newGemNum = UserDataCtrl.instance.gemNum - ConfigAll.RECOVER_REQ_GEM_NUM;\n                UserDataCtrl.instance.recordGemNum(newGemNum);\n                EventCenter.instance.event(EventType.UPDATE_GEM_NUM);\n\n                GameCtrl.instance.recoverCurChildLevel();\n                Laya.Scene.close(RecoverScene.SCENE);\n                Toast.fixedDisplay(\"复活成功\");\n                break;\n            case RecoverType.SHARE:\n                Analytics.sendEvent(AnaEvent.BTN_REVIVE_SHARE);\n                Encourage.share(AnaEvent.SHARE_FOR_REVIVE, ControllCenter.ShareInfo, this, (data: { code: number }) => {\n                    if (data && data.code == 0) {\n                        GameCtrl.instance.recoverCurChildLevel();\n                        Laya.Scene.close(RecoverScene.SCENE);\n                        Analytics.sendEvent(AnaEvent.REVIVE_FROM_SHARE);\n                        // Toast.fixedDisplay(\"复活成功啦\");\n                    } else {\n                        // Toast.fixedDisplay(\"复活失败了\");\n                    }\n\n                }, true);\n                break;\n            case RecoverType.VIDEO:\n                Analytics.sendEvent(AnaEvent.BTN_REVIVE_VIDEO);\n                Encourage.ads(AnaEvent.VIDEO_FOR_REVIVE, this, (data: { code: number }) => {\n                    if (data && data.code == 0) {\n                        GameCtrl.instance.recoverCurChildLevel();\n                        Laya.Scene.close(RecoverScene.SCENE);\n                        Analytics.sendEvent(AnaEvent.REVIVE_FROM_VIDEO);\n                        Toast.fixedDisplay(\"复活成功\");\n                    } else {\n                        Toast.fixedDisplay(\"复活失败了\");\n                    }\n\n                }, true)\n                break;\n        }\n    }\n\n    private onBtnRestart(): void {\n        console.log(\"onBtnRestart\");\n        Analytics.sendEvent(AnaEvent.BTN_RESTART);\n\n        GameCtrl.instance.resetCurLevel();\n        Laya.Scene.close(RecoverScene.SCENE);\n    }\n\n    private onBtnRank(): void {\n        console.log(\"onBtnRank\");\n        Analytics.sendEvent(AnaEvent.BTN_RANK_OF_RECOVER_SCENE);\n        // if (Utils.isWXMiniGame) {\n        Laya.Scene.open(FriendRankScene.SCENE, false, RecoverScene);\n        Laya.Scene.close(RecoverScene.SCENE);\n        // } else {\n        //     Toast.show(\"此平台无排行榜\");\n        // }\n    }\n}\n\nenum RecoverType {\n    NONE,\n    GEM,\n    SHARE,\n    VIDEO\n}","import { ui } from \"../ui/layaMaxUI\";\nimport { GameCtrl } from \"../game/GameCtrl\";\nimport GameConfig from \"../GameConfig\";\nimport { UserDataCtrl } from \"../game/UserDataCtrl\";\nimport FriendRankScene from \"./FriendRankScene\";\nimport Utils from \"../utils/Utils\";\nimport { Toast } from \"../utils/UI\";\nimport { Analytics } from \"../com.sky1231/Analytics\";\nimport { AnaEvent } from \"../com.sky1231/AnaEvent\";\nimport { ConfigAll } from \"../cfg/ConfigAll\";\nimport { Encourage } from \"../encourage/Encourage\";\nimport { MainLogic } from \"../MainLogic\";\n/**\n * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联\n * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果\n * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。\n */\nexport default class LevelUpScene extends ui.LevelUpSceneUI {\n    public static LOCAL: string = 'view/LevelUpScene.ts';\n    public static SCENE: string = 'LevelUpScene.scene';\n\n    constructor() {\n        super();\n\n        this.init();\n\n    }\n\n    onEnable(): void {\n\n    }\n\n    onOpened(isNeedAddScore: boolean = false): void {\n        Laya.Tween.from(this, { alpha: 0.2 }, 300, null, Laya.Handler.create(this, () => {\n\n        }));\n\n        this.setScore();\n        this.setTotalScore();\n        this.dealUserInfo();\n\n        if (isNeedAddScore) {\n            this.btnRank.visible = false;\n            this.setTotalScoreWithProcess();\n        }\n\n        if (ConfigAll.PLAT_SWITCH.SHOW_BANNER_AD_LEVEL_UP_SCENESCENE) {\n            Encourage.showBanner();\n        }\n\n        if (ConfigAll.PLAT_SWITCH.SHOW_INS_AD_LEVEL_UPSCENE) {\n            if (Math.random() < ConfigAll.PLAT_SWITCH.SHOW_INS_AD_LEVEL_UPSCENE_RATE) {\n                Encourage.showInterstitialAd();\n            }\n\n        }\n\n    }\n\n    onClosed(): void {\n        Encourage.hideBanner(true);\n    }\n\n    private dealUserInfo(): void {\n        if (Utils.isWXMiniGame) {\n            if (ConfigAll.PLAT_SWITCH.IS_CREATE_USERINFO_BUTTON) {\n                if (UserDataCtrl.instance.levelIndex == 2 || (UserDataCtrl.instance.levelIndex % 5 == 0)) {\n                    wx.getSetting({\n                        success: (res: any) => {\n                            if (!res.authSetting[\"scope.userInfo\"]) {\n                                // 未曾授权，创建授权按钮\n                                console.log(\"未曾授权，创建授权按钮\");\n                                MainLogic.instance.platform.getUserInfo((userInfo: wx.UserInfo) => {\n                                    console.log(\"userInfo:\", userInfo)\n                                    if (userInfo) {\n                                        // 如果授权成功 直接接入下一关\n                                        this.onBtnNextLvl();\n                                    }\n                                })\n                            }\n                        }\n                    } as any)\n\n                }\n            }\n\n        }\n    }\n\n    private init(): void {\n        this.btnNextLvl.on(Laya.Event.CLICK, this, this.onBtnNextLvl)\n        this.btnRank.on(Laya.Event.CLICK, this, this.onBtnRank)\n    }\n\n    private setScore(): void {\n        this.txtScore.text = \"本次得分：{0}\".format(UserDataCtrl.instance.noCacheData.readyAddScore);\n    }\n\n    private setTotalScore(): void {\n        this.txtTotalScore.text = \"游戏总分：{0}\".format(UserDataCtrl.instance.score);\n    }\n    private setStaticTotalScore(): void {\n        UserDataCtrl.instance.recordScoreAndLevels(UserDataCtrl.instance.score + UserDataCtrl.instance.noCacheData.readyAddScore, UserDataCtrl.instance.levelIndex - 1);\n        this.txtTotalScore.text = \"游戏总分：{0}\".format(UserDataCtrl.instance.score);\n    }\n\n    private setTotalScoreWithProcess(): void {\n        let oldTotalScore = UserDataCtrl.instance.score;\n        this.txtTotalScore.text = \"游戏总分：{0}\".format(oldTotalScore);\n        Laya.timer.once(500, this, () => {\n            UserDataCtrl.instance.recordScoreAndLevels(oldTotalScore + UserDataCtrl.instance.noCacheData.readyAddScore, UserDataCtrl.instance.levelIndex - 1);\n            // [\"num\"] = function (value: number, time: number, postfix?: string, startValue: number = 0, prefix?: string, cb?: Function) {\n            this.txtTotalScore[\"num\"](UserDataCtrl.instance.score, 300, null, oldTotalScore, \"游戏总分：\", () => {\n                this.btnRank.visible = true;\n            });\n        })\n\n\n    }\n\n    private onBtnNextLvl(): void {\n        console.log(\"onBtnNextLvl\");\n        Analytics.sendEvent(AnaEvent.BTN_NEXTLVL);\n        GameCtrl.instance.goToNextLevel();\n        Laya.Scene.close(LevelUpScene.SCENE);\n    }\n\n    private onBtnRank(): void {\n        console.log(\"onBtnRank\");\n        Analytics.sendEvent(AnaEvent.BTN_RANK_OF_LEVL_UP_SCENE);\n        // if (Utils.isWXMiniGame) {\n        Laya.Scene.open(FriendRankScene.SCENE, false, LevelUpScene);\n        Laya.Scene.close(LevelUpScene.SCENE);\n        // } else {\n        //     Toast.show(\"此平台无排行榜\");\n        // }\n    }\n}","import { ConfigAll } from \"../cfg/ConfigAll\";\nimport CameraCtrl from \"./CameraCtrl\";\nimport EnemyGroupCtrl from \"./EnemyGroupCtrl\";\nimport PlayerCtrl from \"./PlayerCtrl\";\nimport { Vector3Util } from \"../utils/Vector3Util\";\nimport { EventType } from \"../event/EventType\";\nimport { EventCenter } from \"../event/EventCenter\";\nimport Levels, { LevelUnit } from \"../model/parameters/level/Levels\";\nimport ChildLevelUnit from \"../model/parameters/level/ChildLevelUnit\";\nimport LevelCtrl from \"./LevelCtrl\";\nimport RecoverScene from \"../view/RecoverScene\";\nimport LevelUpScene from \"../view/LevelUpScene\";\nimport { UserDataCtrl } from \"./UserDataCtrl\";\nimport { SoundHelp } from \"../controller/sound/SoundHelp\";\nimport Utils from \"../utils/Utils\";\nimport { MainLogic } from \"../MainLogic\";\nimport { Analytics } from \"../com.sky1231/Analytics\";\nimport { AnaEvent } from \"../com.sky1231/AnaEvent\";\n\nexport enum Mats {\n    Gray,\n    Blue,\n    Dead\n}\n\nexport enum SectionStatus {\n    BeforePaint,\n    AfterPaint,\n    Paint,\n    Dead\n}\n\nexport enum GameState {\n    Prepare,\n    LevelInterval,\n    Playing,\n    Fail,\n    ChildLevelUp,\n    LevelUp,\n    AllLevelUp\n}\n\nexport class GameCtrl {\n    private static _instance: GameCtrl;\n    public static get instance(): GameCtrl {\n        if (!GameCtrl._instance)\n            GameCtrl._instance = new GameCtrl();\n        return GameCtrl._instance;\n    }\n\n    public temoCount: number = 0;\n\n    private _gameState: GameState;\n\n    private _camera: Laya.Sprite3D;\n    private _cylinder: Laya.Sprite3D;\n    private _sector: Laya.Sprite3D;\n    private _ball: Laya.Sprite3D;\n    private _player: Laya.Sprite3D;\n\n    private _enemyGroupCtrl: EnemyGroupCtrl;\n\n    public materialMap = new Object();\n    public hitMaterials: Laya.Material[] = [];\n    public bossHitMaterials1: Laya.Material[] = [];\n    public bossHitMaterials2: Laya.Material[] = [];\n    public bossHitMaterials3: Laya.Material[] = [];\n\n\n    public playerTargetPoint: Laya.Sprite3D;\n    public enemyGroup: Laya.Sprite3D;\n    public curCylinderRoot: Laya.Sprite3D;\n\n    public scene: Laya.Scene3D;\n    public catmumRowPoints: Array<Laya.Sprite3D>;\n\n    get gameState(): GameState {\n        return this._gameState\n    }\n\n    set gameState(value: GameState) {\n        this._gameState = value;\n        let _gameState = this._gameState;\n        EventCenter.instance.event(EventType.GAME_STATE, [this._gameState]);\n\n        switch (_gameState) {\n            case GameState.Prepare:\n                console.log(\"GameState.Prepare\")\n\n                break;\n            case GameState.Playing:\n                console.log(\"GameState.PreparPlayinge\")\n\n                break;\n            case GameState.Fail:\n                console.log(\"GameState.GameOver\")\n                break;\n            case GameState.ChildLevelUp:\n                console.log(\"GameState.ChildLevelUp\")\n                break;\n            case GameState.LevelUp:\n                console.log(\"GameState.LevelUp\")\n                break;\n            case GameState.AllLevelUp:\n                console.log(\"GameState.AllLevelUp\")\n                break;\n        }\n    }\n\n    private _callBack: () => void;\n    init(cb?: () => void): void {\n        this._callBack = cb;\n        window[\"gameCtrl\"] = this;\n\n        var urlModels: Array<any> = [\n            { url: ConfigAll.URL_3D_SCENE, type: Laya.Loader.HIERARCHY },\n            { url: ConfigAll.URL_3D_MAT, type: Laya.Loader.HIERARCHY },\n            { url: ConfigAll.URL_3D_Cylinder, type: Laya.Loader.HIERARCHY },\n            { url: ConfigAll.URL_3D_Sector, type: Laya.Loader.HIERARCHY },\n            { url: ConfigAll.URL_3D_Ball, type: Laya.Loader.HIERARCHY },\n            { url: ConfigAll.URL_3D_Ball, type: Laya.Loader.HIERARCHY },\n        ];\n\n        let urls = [].concat(urlModels);\n        urls.push({ url: ConfigAll.URL_LEVEL, type: Laya.Loader.JSON });\n        Laya.loader.create(urls, Laya.Handler.create(this, this.onLoadCompleted));\n\n\n        this.initData();\n        window[\"gameCtrl\"] = this;\n        window[\"MainLogic\"] = MainLogic;\n        window[\"Utils\"] = Utils;\n        window[\"GameCtrl\"] = GameCtrl;\n        window[\"LevelCtrl\"] = LevelCtrl;\n    }\n\n    private initData(): void {\n\n    }\n\n    private onLoadCompleted(data: any): void {\n        // console.log(\"onLoadCompleted\");\n\n        UserDataCtrl.instance.init();\n        window[\"UserDataCtrl\"] = UserDataCtrl;\n        Levels.instance.init();\n        window[\"Levels\"] = Levels;\n\n        // this._cube = Laya.Loader.getRes(ConfigAll.URL_3D_PLAYER) as Laya.Sprite3D;\n\n        GameCtrl.instance.gameState = GameState.Prepare;\n        this.initMaterials();// 初始化材质\n        // this.initBG();// 初始化背景 // 改为使用天空盒子\n        this.initScene3D();// 添加场景\n        this.initCamera();// 初始化相机\n        this.initEnemyGroup();// 初始敌人\n        this._callBack && this._callBack();\n    }\n\n    private initMaterials(): void {\n        let matModel = Laya.Loader.getRes(ConfigAll.URL_3D_MAT);\n        this.materialMap[Mats.Gray] = (matModel.getChildByName(\"Gray\") as Laya.MeshSprite3D).meshRenderer.material;\n        this.materialMap[Mats.Blue] = (matModel.getChildByName(\"Blue\") as Laya.MeshSprite3D).meshRenderer.material;\n        this.materialMap[Mats.Dead] = (matModel.getChildByName(\"Dead\") as Laya.MeshSprite3D).meshRenderer.material;\n\n        for (let i = 0; i < 8; i++) {\n            this.hitMaterials.push((matModel.getChildByName(\"Hit\" + (i + 1)) as Laya.MeshSprite3D).meshRenderer.material)\n            this.bossHitMaterials1.push((matModel.getChildByName(\"BossHit1-\" + (i + 1)) as Laya.MeshSprite3D).meshRenderer.material)\n            this.bossHitMaterials2.push((matModel.getChildByName(\"BossHit2-\" + (i + 1)) as Laya.MeshSprite3D).meshRenderer.material)\n            this.bossHitMaterials3.push((matModel.getChildByName(\"BossHit3-\" + (i + 1)) as Laya.MeshSprite3D).meshRenderer.material)\n        }\n\n    }\n\n    private initBG(): void {\n        let bg = new Laya.Image(ConfigAll.URL_BG0);\n        bg.top = bg.right = bg.bottom = bg.left = 0;\n        Laya.stage.addChild(bg);\n    }\n\n    private initScene3D(): void {\n        let scene = Laya.Loader.getRes(ConfigAll.URL_3D_SCENE) as Laya.Scene3D;\n        scene.skyRenderer.mesh = null;\n        this.scene = scene;\n        Laya.stage.addChild(scene);\n        window[\"scene\"] = this.scene;\n\n        this._cylinder = Laya.Loader.getRes(ConfigAll.URL_3D_Cylinder);\n        this._sector = Laya.Loader.getRes(ConfigAll.URL_3D_Sector);\n        this._ball = Laya.Loader.getRes(ConfigAll.URL_3D_Ball);\n        this._player = this._ball.getChildByName(\"Player\") as Laya.Sprite3D;\n        this.playerTargetPoint = this._ball.getChildByName(\"Target\") as Laya.Sprite3D;\n\n        window[\"sector\"] = this._sector;\n        // let player = scene.getChildByName(\"Player\");\n        // player.addComponent(PlayerCtrl);\n\n        // let catmumRowPoints = scene.getChildByName(\"Path\").getChildByName(\"Curvy Spline\")[\"_children\"] as Array<Laya.Sprite3D>\n        // this.catmumRowPoints = catmumRowPoints\n\n\n        let cylinder = Laya.Loader.getRes(ConfigAll.URL_3D_Cylinder);\n        window[\"cylinder\"] = cylinder\n        let ballBombEffect = cylinder.getChildByName(\"BallBombEffect\") as Laya.Sprite3D;\n        window[\"ballBombEffect\"] = ballBombEffect;\n        // let gem = cylinder.getChildByName(\"Gem\") as Laya.Sprite3D;\n        // window[\"gem\"] = gem;\n        let cylinderRoot = cylinder.getChildByName(\"CylinderRoot\") as Laya.Sprite3D;\n        window[\"cylinderRoot\"] = cylinderRoot;\n        let cylinderComplete = cylinderRoot.getChildByName(\"cylinderComplete\") as Laya.MeshSprite3D;\n        let dividers = cylinderRoot.getChildByName(\"Dividers\") as Laya.Sprite3D;\n        // let fX_cylinderGlow = cylinderRoot.getChildByName(\"FX_cylinder glow\") as Laya.Sprite3D;\n        // let fX_LevelComplete = cylinderRoot.getChildByName(\"FX_LevelComplete\") as Laya.Sprite3D;\n        let ringWaveRoot = cylinderRoot.getChildByName(\"RingWaveRoot\") as Laya.Sprite3D;\n\n\n        cylinderComplete.active = false;\n        dividers.active = false;\n        // fX_cylinderGlow.active = false;\n        // fX_LevelComplete.active = false;\n        ringWaveRoot.active = false;\n\n        window[\"cylinderComplete\"] = cylinderComplete;\n        window[\"dividers\"] = dividers;\n        // window[\"fX_cylinderGlow\"] = fX_cylinderGlow;\n        // window[\"fX_LevelComplete\"] = fX_LevelComplete;\n        window[\"ringWaveRoot\"] = ringWaveRoot;\n\n\n        let cylinderSection = cylinder.getChildByName(\"cylinderSection\") as Laya.Sprite3D;\n        window[\"cylinderSection\"] = cylinderSection;\n        let gem = cylinderSection.getChildByName(\"Gem\") as Laya.Sprite3D;\n        gem.active = false;\n\n    }\n\n    private initCamera(): void {\n        // this._camera = this.scene.getChildByName(\"Main Camera\") as Laya.Sprite3D;\n        // this._camera.addComponent(CameraCtrl)\n    }\n\n    public createPlayer(): void {\n        let player = this._player.clone() as Laya.MeshSprite3D;\n        player.meshRenderer.material = LevelCtrl.instance.curChildLvlInfo.colorMat.hit;\n        this.scene.addChild(player);\n        player.addComponent(PlayerCtrl);\n\n        GameCtrl.instance.gameState = GameState.Playing;\n\n    }\n\n    private initEnemyGroup(): void {\n        let eGroup = new Laya.Sprite3D();\n        this.enemyGroup = eGroup;\n        this.scene.addChild(eGroup);\n        eGroup.addComponent(EnemyGroupCtrl);\n        this._enemyGroupCtrl = eGroup.getComponent(EnemyGroupCtrl) as EnemyGroupCtrl;\n\n        // this.childLevelUp();\n        // Laya.timer.once(3000, this, () => {\n        //     this.childLevelUp();\n        // })\n        // Laya.timer.once(6000, this, () => {\n        //     this.childLevelUp();\n        // })\n\n        this.initLvl();\n\n    }\n\n    /**\n     * 设置子关卡\n     */\n    private setChildLvl(): void {\n\n        // 更新子关卡数据\n        LevelCtrl.instance.childLevelUp();\n\n        let cylinderRoot = window[\"cylinderRoot\"].clone();\n        this.curCylinderRoot = cylinderRoot;\n        this.enemyGroup.addChild(cylinderRoot);\n\n        let cylinder = new Laya.Sprite3D();\n        cylinder.name = \"dividersCylinder\";\n        cylinderRoot.addChild(cylinder);\n\n\n        let dividers = window[\"dividers\"] as Laya.Sprite3D;\n        let sectionNum = dividers.numChildren;\n        // 获取需要显示的已染色数量\n        let paintedNum = LevelCtrl.instance.curChildLvlInfo.PaintedNumim;\n        let paintedInterval: number = null;\n        if (paintedNum > 0) paintedInterval = Math.floor(sectionNum / paintedNum);\n        // 获取需要显示的宝石数量\n        let gemNum = LevelCtrl.instance.curChildLvlInfo.GemNum;\n        let gemNumInterval: number = null;\n        if (gemNum > 0) gemNumInterval = Math.floor(sectionNum / gemNum);\n\n        let sectorArray: Array<Laya.Sprite3D> = [];\n        console.log('sectionNum : ', sectionNum)\n        for (let i = 0; i < sectionNum; i++) {\n            let sector = window[\"cylinderSection\"].clone() as Laya.Sprite3D;\n            sectorArray.push(sector);\n            this.setSectionStatus(sector, SectionStatus.BeforePaint);\n            sector.transform.rotation = (dividers.getChildAt(i) as Laya.Sprite3D).transform.rotation\n            cylinder.addChild(sector);\n        }\n\n        // 设置已染扇区 和宝石\n        switch (LevelCtrl.instance.curChildLvlInfo.DistributeType) {\n            case 1:// 等间隔分布\n                for (let i = 0; i < sectorArray.length; i++) {\n                    let sector = sectorArray[i]\n                    // 设置已染扇区\n                    if ((paintedInterval > 0) && (i % paintedInterval == 0)) {\n                        this.setSectionStatus(sector, SectionStatus.AfterPaint)\n                    }\n                    // 设置宝石\n                    if ((gemNumInterval > 0) && ((sectionNum - i - 1) % gemNumInterval == 0)) {\n                        // let gem = window[\"gem\"].clone() as Laya.Sprite3D;\n                        // let gemSpawnPoint = sector.getChildByName(\"GemSpawnPoint\") as Laya.Sprite3D;\n                        // gem.transform.position = gemSpawnPoint.transform.position;\n                        let gem = sector.getChildByName(\"Gem\") as Laya.Sprite3D;\n                        gem.active = true;\n                    }\n                }\n                break;\n            case 2:// 随机分布\n                let temp = Utils.getRandomArrayElements(sectorArray, paintedNum + gemNum)\n                for (let i = 0; i < temp.length; i++) {\n                    let sector = temp[i]\n                    // 设置已染扇区\n                    if (paintedNum > 0) {\n                        this.setSectionStatus(sector, SectionStatus.AfterPaint);\n                        paintedNum--\n                    } else {\n                        // 设置宝石\n                        if (gemNum > 0) {\n                            let gem = sector.getChildByName(\"Gem\") as Laya.Sprite3D;\n                            gem.active = true;\n                            gemNum--\n                        }\n                    }\n\n                }\n                break;\n            case 3:// 连续分布\n                for (let i = 0; i < sectorArray.length; i++) {\n                    let sector = sectorArray[i]\n                    // 设置已染扇区\n                    if (paintedNum > 0) {\n                        this.setSectionStatus(sector, SectionStatus.AfterPaint);\n                        paintedNum--\n                    } else {\n                        // 设置宝石\n                        if (gemNum > 0) {\n                            let gem = sector.getChildByName(\"Gem\") as Laya.Sprite3D;\n                            gem.active = true;\n                            gemNum--\n                        }\n                    }\n\n                }\n                break;\n        }\n\n        let transform = cylinder.transform;\n        let cylinderComplete = cylinderRoot.getChildByName(\"cylinderComplete\") as Laya.MeshSprite3D;\n        let singleHeight = cylinderComplete.meshRenderer.bounds.getMax().y - cylinderComplete.meshRenderer.bounds.getMin().y;\n        window[\"singleHeight\"] = singleHeight;\n        window[\"temp\"] = transform;\n\n        transform.localPositionY = 0.03;\n        let pos = transform.position;\n        GameCtrl.instance.gameState = GameState.Playing;\n        this._enemyGroupCtrl.reset()\n        Laya.Tween.to(transform, { localPositionY: singleHeight / 200 }, 1000, null, Laya.Handler.create(this, () => {\n            // 显示水波动画\n            if (LevelCtrl.instance.curChildLevel > 1) {\n                let ringWaveRoot = cylinderRoot.getChildByName(\"RingWaveRoot\") as Laya.Sprite3D;\n                ringWaveRoot.active = true;\n            }\n\n            let easeFunc = Laya.Ease.backOut;\n            let duration = 350;\n\n            Laya.Tween.to(transform, { localPositionY: 0 }, duration, easeFunc, Laya.Handler.create(this, () => {\n                this.createPlayer();// 初始玩家/球\n            }));\n\n            for (let i = 0; i < this.enemyGroup.numChildren - 1; i++) {\n                let otherEnemyCylinder = this.enemyGroup.getChildAt(i) as Laya.Sprite3D;\n                let transform = otherEnemyCylinder.transform;\n                Laya.Tween.to(transform, { localPositionY: transform.localPositionY - singleHeight }, duration, easeFunc, Laya.Handler.create(this, () => {\n\n                }));\n            }\n\n        }))\n    }\n\n    /**\n     * 初始化关卡，首次进入调用\n     */\n    private initLvl(): void {\n        // 初始化关卡数据\n        LevelCtrl.instance.init();\n        this.resetCurLevel();\n        SoundHelp.instance.playBgm();\n        Analytics.sendEvent(AnaEvent.INIT_FINISH);\n    }\n\n    /**\n     * 重置当前关卡\n     */\n    public resetCurLevel(): void {\n        // 配置新关卡中国呢的子关卡\n        LevelCtrl.instance.curChildLevel = 0;\n        this.enemyGroup.destroyChildren();\n        this.setChildLvl();\n        console.log(\"resetCurLevel curLevel = \", LevelCtrl.instance.curLevel);\n    }\n\n    /**\n     * 复活当前关卡\n     */\n    public recoverCurChildLevel(): void {\n        this.setSectionStatus(this._lastChangedSection, SectionStatus.AfterPaint);\n        this.createPlayer();\n\n        EventCenter.instance.event(EventType.ON_RECOVER);\n    }\n\n    /**\n     *进入下一关\n     */\n    public goToNextLevel(): void {\n        // 更新关卡数据\n        this.resetCurLevel();\n        EventCenter.instance.event(EventType.UPDATE_LEVEL);\n    }\n\n    /**\n     * 处理升级\n     */\n    private dealLevelUp(): void {\n\n        Laya.timer.once(1300, this, () => {\n            Laya.Scene.open(LevelUpScene.SCENE, false, true);\n            SoundHelp.instance.playLevelUp();\n        })\n        LevelCtrl.instance.levelUp();\n\n    }\n\n    private checkLevelUp(): void {\n        if (LevelCtrl.instance.checkChildLevelPass()) {\n            GameCtrl.instance.gameState = GameState.Prepare;\n\n            let isLastChildPass = LevelCtrl.instance.curChildLvlInfo.isLast;\n            this.dealCylinder2Compl(() => {\n                if (isLastChildPass) {\n                    this.dealLevelUp();\n                } else {\n                    this.setChildLvl();\n                }\n            });\n        }\n    }\n\n\n    /**\n     * 设置圆柱动画颜色 测试不行\n     * (2个问题：\n     * 1.AnimationClip 中的_nodesMap不生效 猜测我动画播放时异步赋值（看到动画播放时再获取才得到对的值）\n     * 2.material中albedoColor获取到的值rgba都为1，猜测材质生效时异步赋值 （看到材质变化时再获取才得到对的值）\n     * ）\n     * @param animatorL \n     * @param material \n     */\n    /*private setCylinderCompleteAniEndColor2(animator: Laya.Animator, material: Laya.Material): void {\n        let clip = animator.getDefaultState().clip;\n        let keyFrameNodes: any[] = clip[\"_nodesMap\"][\"\"];// 动画播放前获取后元素中的data不存在\n\n        console.log('keyFrameNodes- keyFrameNodes[0].data -1:', keyFrameNodes[0].data)\n        // material[\"albedoColor\"]\n        // 以下方式2遍获取值都时不对的，但是肉眼看到变化时再获取又是对的，此法不可取\n        keyFrameNodes[0].data = material[\"albedoColorR\"];\n        keyFrameNodes[1].data = material[\"albedoColorG\"];\n        keyFrameNodes[2].data = material[\"albedoColorB\"];\n        keyFrameNodes[3].data = material[\"albedoColorA\"];\n\n        console.log('keyFrameNodes- material[\"albedoColorR\"];', material[\"albedoColorR\"])\n        console.log('keyFrameNodes- keyFrameNodes[0].data -2:', keyFrameNodes[0].data)\n        console.log(\"keyFrameNodes:\", keyFrameNodes)\n    }\n    */\n\n    /**\n    * 设置圆柱动画颜色\n    * @param animatorL \n    * @param material \n    */\n    private setCylinderCompleteAniEndColor(animator: Laya.Animator, material: Laya.Material): void {\n        let clip = animator.getDefaultState().clip;\n        // console.log('keyFrameNodes- material._shaderValues._data[23]', material._shaderValues[\"_data\"][23])\n        // 材质颜色\n        let materialColor = material._shaderValues[\"_data\"][23] as Laya.Vector4;\n\n        // 动画帧信息获取\n        let keyFrameNodes: any[] = clip[\"_nodes\"][\"_nodes\"];\n        let keyframes_r = keyFrameNodes[0]._keyFrames as Array<Laya.FloatKeyframe>;\n        let keyframes_g = keyFrameNodes[1]._keyFrames as Array<Laya.FloatKeyframe>;\n        let keyframes_b = keyFrameNodes[2]._keyFrames as Array<Laya.FloatKeyframe>;\n        let keyframes_a = keyFrameNodes[3]._keyFrames as Array<Laya.FloatKeyframe>;\n\n        // 动画最后一帧颜色修改\n        keyframes_r[keyframes_r.length - 1].value = materialColor.x;\n        keyframes_g[keyframes_g.length - 1].value = materialColor.y;\n        keyframes_b[keyframes_b.length - 1].value = materialColor.z;\n        keyframes_a[keyframes_a.length - 1].value = materialColor.w;\n\n        // console.log(\"keyFrameNodes:\", keyFrameNodes)\n    }\n\n    private dealCylinder2Compl(cb: () => void): void {\n        SoundHelp.instance.playCircleLayerFinish();\n        // 更改空心圆柱状态：\n        //  1.移除内部section\n        this.curCylinderRoot.getChildByName(\"dividersCylinder\").destroy();\n\n        //  2.过度动画\n        let cylinderComplete = this.curCylinderRoot.getChildByName(\"cylinderComplete\") as Laya.MeshSprite3D;\n\n        // console.log(\"cylinderComplete.meshRenderer.material\", cylinderComplete.meshRenderer.material);\n        let animator = cylinderComplete.getComponent(Laya.Animator) as Laya.Animator;\n        let hitMaterial = LevelCtrl.instance.curChildLvlInfo.colorMat.hit;\n        this.setCylinderCompleteAniEndColor(\n            animator,\n            hitMaterial\n        )\n        cylinderComplete.active = true;\n\n        // 监听动画播放完成 \n        // 方法一：https://ask.layabox.com/question/39622\n        // animator.getCurrentAnimatorPlayState().animatorState.addScript(\"定义继承自 Laya.AnimatorStateScript的类\")\n        // 方法二（偷懒）\n        let durationAni = animator.getDefaultState().clip.duration() * 1000;// 毫秒\n        Laya.timer.once(durationAni, this, () => {\n            // console.log(\"cylinderComplete animation played finish\");\n            animator.enabled = false;\n            if (cylinderComplete.meshRenderer) cylinderComplete.meshRenderer.material = hitMaterial;\n\n        })\n        cylinderComplete.active = true;\n        EventCenter.instance.event(EventType.CYLINDER_COMPLETE);\n\n        //  3.将完整的空心圆柱显示\n\n        // Laya.timer.once(durationAni * (1.5 / 3), this, () => {\n        cb()\n        // })\n\n\n    }\n\n    private dealPaint(): void {\n        // 判断关卡是否升级\n        this.checkLevelUp();\n    }\n\n    private dealDead(): void {\n        console.log(\"GameCtrl.instance.dealDead\");\n        Laya.Scene.open(RecoverScene.SCENE, false);\n    }\n\n    private _lastChangedSection: Laya.Sprite3D\n    /**\n     * 设置扇区状态（染色）\n     */\n    public setSectionStatus(cylinderSection: Laya.Sprite3D, sectionStatus: SectionStatus): void {\n        this._lastChangedSection = cylinderSection;\n        let beforePaint = cylinderSection.getChildByName(\"BeforePaint\") as Laya.MeshSprite3D;\n        let afterPaint = cylinderSection.getChildByName(\"AfterPaint\") as Laya.MeshSprite3D;\n        let Splat = cylinderSection.getChildByName(\"Splat\") as Laya.MeshSprite3D;\n\n        let hitMaterial = LevelCtrl.instance.curChildLvlInfo.colorMat.hit;\n        switch (sectionStatus) {\n            case SectionStatus.BeforePaint:\n                beforePaint.active = true\n                afterPaint.active = false;\n                Splat.active = false;\n                break;\n            case SectionStatus.Paint:\n                LevelCtrl.instance.curHitCount++\n                // 显示游油漆污渍\n                (Splat.getChildByName(\"SplatQuad\") as Laya.MeshSprite3D).meshRenderer.material[\"albedoColor\"] = hitMaterial._shaderValues[\"_data\"][23] as Laya.Vector4;\n                Splat.active = true;\n                // 一段时间后扇区被染色\n                Laya.timer.once(100, this, () => {\n                    beforePaint.active = false\n                    afterPaint.active = true;\n                    Splat.active = false;\n\n                    afterPaint.meshRenderer.material = hitMaterial;\n                    this.dealPaint();\n                })\n\n                if (!LevelCtrl.instance.checkChildLevelPass()) {\n                    // 子关卡未过关\n                    // 创建player\n                    GameCtrl.instance.createPlayer();\n                }\n\n                break;\n            case SectionStatus.AfterPaint:\n                beforePaint.active = false\n                afterPaint.active = true;\n                Splat.active = false;\n\n                afterPaint.meshRenderer.material = LevelCtrl.instance.curChildLvlInfo.colorMat.hit;\n                break;\n            case SectionStatus.Dead:\n                beforePaint.active = false\n                afterPaint.active = true;\n                Splat.active = false;\n\n                afterPaint.meshRenderer.material = LevelCtrl.instance.curChildLvlInfo.colorMat.dead;\n\n                this.dealDead();\n                break;\n        }\n    }\n\n    /**\n     * 震动空心圆柱组\n     */\n    public shakeEnemyGroup(): void {\n        let transform = this.enemyGroup.transform;\n        let pos = transform.position;\n        Laya.Tween.to(transform, { localPositionY: pos.y + 0.15 }, 15, Laya.Ease.circIn, Laya.Handler.create(this, () => {\n            Laya.Tween.to(transform, { localPositionY: pos.y }, 15, null, Laya.Handler.create(this, () => {\n\n            }))\n        }))\n    }\n\n}\n\n\nexport class ColorMat {\n    hit: Laya.Material = GameCtrl.instance.materialMap[Mats.Blue];\n    dead: Laya.Material = GameCtrl.instance.materialMap[Mats.Dead];\n    normal: Laya.Material = GameCtrl.instance.materialMap[Mats.Gray];\n    constructor(hit?: Laya.Material, dead?: Laya.Material, normal?: Laya.Material) {\n        if (hit) this.hit = hit\n        if (dead) this.dead = dead;\n        if (normal) this.normal = normal;\n    }\n}","import { ColorMat, GameCtrl, Mats } from \"../../../game/GameCtrl\";\n\nexport default class ChildLevelUnit {\n    obj: any;\n\n    constructor(obj: any) {\n        this.obj = obj;\n\n    }\n\n    // 序列\n    get Idx(): number {\n        return <number>this.obj[0];\n    }\n\n    // 关卡-子关卡\n    get Lvl_ChildLvl(): string {\n        return <string>this.obj[1];\n    }\n\n    // 关卡\n    get Level(): number {\n        return <number>this.obj[2];\n    }\n\n    // 子关卡\n    get ChildLvl(): number {\n        return <number>this.obj[3];\n    }\n\n    // 是否最后一个子关卡\n    get IsLastChildLvl(): boolean {\n        return <boolean>this.obj[4];\n    }\n\n    // 染色材质--hit：常规阶梯色；boss-hit-1~n boss关卡材质（暂定5的整数倍关卡配置）\n    get MatType(): string {\n        return <string>this.obj[5];\n    }\n\n    // 目标/子弹数\n    get Aim(): number {\n        return <number>this.obj[6];\n    }\n\n    // 已染数量\n    get PaintedNumim(): number {\n        return <number>this.obj[7];\n    }\n\n    // 宝石数量\n    get GemNum(): number {\n        return <number>this.obj[8];\n    }\n\n    // 已染扇区和宝石的分布类型--1：等间隔分布；22：随机分布；3：连续分布\n    get DistributeType(): number {\n        return <number>this.obj[9];\n    }\n\n    // -------------------------\n\n    public isLast: boolean = false;\n\n    private _colorMat: ColorMat;\n    public get colorMat(): ColorMat {\n        if (!this._colorMat) {\n            let hitMat: Laya.Material;\n            switch (this.MatType) {\n                case \"hit\":\n                    hitMat = GameCtrl.instance.hitMaterials[this.ChildLvl - 1];\n                    break;\n                case \"boss-hit-1\":\n                    hitMat = GameCtrl.instance.bossHitMaterials1[this.ChildLvl - 1];\n                    break;\n                case \"boss-hit-2\":\n                    hitMat = GameCtrl.instance.bossHitMaterials2[this.ChildLvl - 1];\n                    break;\n                case \"boss-hit-3\":\n                    hitMat = GameCtrl.instance.bossHitMaterials3[this.ChildLvl - 1];\n                    break;\n            }\n            this._colorMat = new ColorMat(\n                hitMat\n            )\n        }\n        return this._colorMat;\n    }\n}","import ChildLevelUnit from \"./ChildLevelUnit\";\nimport { ConfigAll } from \"../../../cfg/ConfigAll\";\n\nexport default class Levels {\n    private static _instance: Levels;\n\n    private _maxLevel: number = 0;\n\n    public static get instance(): Levels {\n        if (!Levels._instance)\n            Levels._instance = new Levels();\n        return Levels._instance;\n    }\n    public dataMap: Map<string, ChildLevelUnit>;\n\n    constructor() {\n\n    }\n\n    public init(): void {\n\n        let obj = Laya.loader.getRes(ConfigAll.URL_LEVEL);\n        // console.log(obj);\n        if (!obj) {\n\n            console.log(\"关卡数据配置 获取失败\");\n            return;\n        }\n        this.dataMap = new Map<string, ChildLevelUnit>();\n        for (let id in obj) {\n            let unit = new ChildLevelUnit(obj[id]);\n            this.dataMap.set(id, unit)\n        }\n\n\n\n    }\n\n    public getUnit(id: number): ChildLevelUnit {\n        return this.dataMap.get(String(id));\n    }\n\n    /**\n     * 通过大关卡获取对应的子关卡数组\n     * @param level 大关卡\n     */\n    public getLevelUnitInfoByLevel(level: number): LevelUnit {\n        if (level <= 0 || level > this.maxLevel) return null;\n        let ret = new LevelUnit();\n        let itr = this.dataMap.values();\n        for (let i = 0; i < this.dataMap.size; i++) {\n            let value = itr.next().value;\n            if (value.Level == level) {\n                ret.childLevels.push(value);\n                ret.childLevels.sort(function (a, b) { return a.ChildLvl - b.ChildLvl })\n            }\n        }\n\n        ret.sortChildLevel();\n        ret.childLevelsNum = ret.childLevels.length;\n        ret.level = level;\n\n        return ret;\n    }\n\n    public get maxLevel(): number {\n        if (this._maxLevel > 0) return this._maxLevel;\n        let itr = this.dataMap.values();\n        for (let i = 0; i < this.dataMap.size; i++) {\n            let value = itr.next().value;\n            if (value.Level > this._maxLevel) {\n                this._maxLevel = value.Level;\n            }\n        }\n\n        return this._maxLevel;\n    }\n\n\n}\n\nexport class LevelUnit {\n    public childLevels: ChildLevelUnit[] = [];\n\n    public childLevelsNum: number = 0;\n\n    public level: number = 0;\n\n    public get isLast(): boolean {\n        return this.level == Levels.instance.maxLevel;\n    }\n\n    public sortChildLevel(): void {\n        this.childLevels.sort(function (a, b) { return a.ChildLvl - b.ChildLvl });\n        this.childLevels[this.childLevels.length - 1].isLast = true;\n    }\n\n    /**\n     * 根据子关卡序号获取子关卡信息\n     * @param childIndx 1-当前关卡的子关卡数量\n     */\n    public getChildLevelUnit(childIndx: number): ChildLevelUnit {\n        if (childIndx <= 0 || childIndx > this.childLevelsNum) return null;\n        return this.childLevels[childIndx - 1]\n    }\n};\n","import Levels, { LevelUnit } from \"../model/parameters/level/Levels\";\nimport ChildLevelUnit from \"../model/parameters/level/ChildLevelUnit\";\nimport { GameCtrl, Mats } from \"./GameCtrl\";\nimport { EventCenter } from \"../event/EventCenter\";\nimport { EventType } from \"../event/EventType\";\nimport { UserDataCtrl } from \"./UserDataCtrl\";\n\nexport default class LevelCtrl {\n    private static _instance: LevelCtrl;\n    public static get instance(): LevelCtrl {\n        if (!LevelCtrl._instance)\n            LevelCtrl._instance = new LevelCtrl();\n        return LevelCtrl._instance;\n    }\n\n    /**\n     * 关卡初始化（注意： 需要在UserDataCtrl init方法调用后方可调用）\n     */\n    public init() {\n        this.curLevel = UserDataCtrl.instance.levelIndex;\n    }\n\n    // 当前击中目标数\n    private _curHitCount: number;\n    public get curHitCount(): number {\n        return this._curHitCount;\n    }\n    public set curHitCount(value: number) {\n        this._curHitCount = value;\n    }\n\n    private _curChildLevel: number;\n    public get curChildLevel(): number {\n        return this._curChildLevel;\n    }\n    public set curChildLevel(value: number) {\n        this._curChildLevel = value;\n    }\n\n    private _curLevel: number;\n    public get curLevel(): number {\n        return this._curLevel;\n    }\n    public set curLevel(value: number) {\n        this._curLevel = value;\n    }\n\n    private resetData(): void {\n        this.curHitCount = 0;\n    }\n\n    /**\n    * 获取当前关卡信息\n    */\n    public get curLvlInfo(): LevelUnit {\n        // let info = Levels.instance.getLevelUnitInfoByLevel(this.curLevel);\n        // return info;\n\n        /**无限关卡 */\n        let cfgLvl = this.curLevel;\n        if (cfgLvl > Levels.instance.maxLevel) {\n            // let offset = 2; // 表示大于后续从2～ Levels.instance.maxLevel取配置\n            // cfgLvl = (cfgLvl % (Levels.instance.maxLevel - offset + 1)) + offset;\n\n            cfgLvl = (cfgLvl % Levels.instance.maxLevel);// 表示大于后续从1～ Levels.instance.maxLevel取配置\n            if (cfgLvl == 0) cfgLvl = Levels.instance.maxLevel;\n        }\n        let info = Levels.instance.getLevelUnitInfoByLevel(cfgLvl);\n        return info;\n    }\n\n    /**\n     * 获取当前子关卡信息\n     */\n    public get curChildLvlInfo(): ChildLevelUnit {\n        let lvlInfo = this.curLvlInfo;\n        let info = lvlInfo.getChildLevelUnit(this.curChildLevel);\n        return info;\n    }\n\n    /**\n     * 检测子关卡是过关\n     */\n    public checkChildLevelPass(): boolean {\n        return this.curHitCount >= this.curChildLvlInfo.Aim;\n    }\n\n    /**\n     * 子关卡升级\n     */\n    public childLevelUp(): void {\n        if (this.curChildLevel && this.curChildLevel > 0) {\n            this.curChildLevel += 1;\n        } else {\n            this.curChildLevel = 1;\n        }\n        LevelCtrl.instance.curHitCount = 0;\n        EventCenter.instance.event(EventType.UPDATE_CHILD_LEVEL);\n\n        // console.log(\"LevelCtrl.childLevelUp --curChildLevel\", this.curChildLvlInfo);\n    }\n    /**\n     * 关卡升级\n     */\n    public levelUp(): void {\n        if (LevelCtrl.instance.curLevel && LevelCtrl.instance.curLevel > 0) {\n            LevelCtrl.instance.curLevel += 1;\n        } else {\n            LevelCtrl.instance.curLevel = 1;\n        }\n        UserDataCtrl.instance.recordLevelIndex(LevelCtrl.instance.curLevel);\n\n        // console.log(\"LevelCtrl.levelUp --curLevel\", this.curLevel);\n    }\n}","import { ui } from \"../ui/layaMaxUI\";\nimport { GameCtrl } from \"../game/GameCtrl\";\nimport GameConfig from \"../GameConfig\";\nimport { EventCenter } from \"../event/EventCenter\";\nimport { EventType } from \"../event/EventType\";\nimport Levels from \"../model/parameters/level/Levels\";\nimport LevelCtrl from \"../game/LevelCtrl\";\nimport { UserDataCtrl } from \"../game/UserDataCtrl\";\nimport { ConfigAll } from \"../cfg/ConfigAll\";\nimport { MainLogic } from \"../MainLogic\";\nimport { Encourage } from \"../encourage/Encourage\";\n/**\n * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联\n * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果\n * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。\n */\nexport default class GameScene extends ui.GameSceneUI {\n\n    public static LOCAL: string = 'view/GameScene.ts';\n    public static SCENE: string = 'GameScene.scene';\n\n    private _ballIcons: BallIcon[] = [];\n    private _lastHideBall: BallIcon;\n    private _oldScore: number;\n\n    constructor() {\n        super();\n        this.init();\n\n    }\n\n    private init(): void {\n        this.initView();\n        this.rigister();\n        this.resetBallIcons();\n    }\n\n    private initView(): void {\n        // 微信小游戏端 根据 菜单按钮（右上角胶囊按钮）的布局位置信息 调整宝石位置\n        let rect = MainLogic.instance.platform.getMenuButtonBoundingClientRect();\n        if (rect) {\n            if (rect.top >= 100) {\n                this.boxGem.y = 27;\n            } else {\n                this.boxGem.y = rect.top + rect.height + 8;\n            }\n        }\n\n        this.setLevelData();\n        this.setChildLevelData();\n        this.setGemNumData();\n        this.setScoreWithProcess(0);\n\n        this.dealGuide();\n        this.dealAni();\n    }\n\n    private rigister(): void {\n        EventCenter.instance.on(EventType.UPDATE_LEVEL, this, this.onLevelUpdated);\n        EventCenter.instance.on(EventType.UPDATE_CHILD_LEVEL, this, this.onChildLevelUpdated);\n\n        EventCenter.instance.on(EventType.CYLINDER_COMPLETE, this, this.onCylinderComplete);\n\n        EventCenter.instance.on(EventType.UPDATE_GEM_NUM, this, this.onGemNumUpdated);\n\n        EventCenter.instance.on(EventType.ON_BALL_SHOOT, this, this.onBallShoot);\n        EventCenter.instance.on(EventType.ON_RECOVER, this, this.onRecover);\n    }\n\n    private dealGuide(): void {\n        this.boxHandAni.visible = false;\n        if (UserDataCtrl.instance.isFirstPlay) {\n            this.showGameHandAni();\n        }\n    }\n\n    /**\n     * 显示手势动画\n     */\n    private showGameHandAni(): void {\n        let target = this.boxHandAni;\n        this.boxHandAni.visible = true;\n        if (!target.getChildByName('handAni_1')) {\n\n            let handAni_1 = new Laya.Skeleton();\n            handAni_1.name = \"handAni_1\";\n            handAni_1.load(\"res/animation/common/guide.sk\", Laya.Handler.create(this, () => {\n                handAni_1.play(\"animation1\", true);\n            }));\n            let scale1 = 1;\n            handAni_1.zOrder = 10;\n            handAni_1.scaleX = scale1;\n            handAni_1.scaleY = scale1;\n            handAni_1.pos(target.width / 2, target.height / 2);\n            target.addChild(handAni_1);\n\n            //\n            let handAni_2 = new Laya.Skeleton();\n            handAni_2.zOrder = 11;\n            handAni_2.name = \"handAni_2\";\n            handAni_2.load(\"res/animation/common/guide.sk\", Laya.Handler.create(this, () => {\n                handAni_2.play(\"animation2\", true);\n            }));\n            let scale2 = 1;\n            handAni_2.scaleX = scale2;\n            handAni_2.scaleY = scale2;\n            handAni_2.pos(target.width / 2, target.height / 2);\n            target.addChild(handAni_2);\n        }\n    }\n\n    private hideGameHandAni(): void {\n\n        if (this.boxHandAni.visible) {\n            UserDataCtrl.instance.setIsirstPlay2False();\n            this.boxHandAni.visible = false;\n        }\n    }\n\n    private dealAni(): void {\n        // 宝石图标旋转动画\n        let tween = new Laya.Tween();\n        let func = () => {\n            tween.to(this.imgGem, { rotation: 360 }, 3500, null, Laya.Handler.create(this, () => {\n                this.imgGem.rotation = 0;\n                func();\n            }));\n        }\n        func();\n    }\n\n    private setLevelData(): void {\n        this.txtLevel.text = \"关卡：{0}\".format(LevelCtrl.instance.curLevel);\n        this.setScoreDataZero();\n\n    }\n    private setChildLevelData(): void {\n        this.txtChildLevel.text = \"{0}/{1}\".format(LevelCtrl.instance.curChildLevel, LevelCtrl.instance.curLvlInfo.childLevelsNum);\n\n        this.resetBallIcons();\n    }\n    private setScoreDataZero(): void {\n        this.txtScore.text = \"预计得分：{0}\".format(0);\n        this._oldScore = 0;\n        UserDataCtrl.instance.noCacheData.readyAddScore = 0;\n    }\n    private setGemNumData(): void {\n        this.txtGemNum.text = \"x{0}\".format(UserDataCtrl.instance.gemNum);\n    }\n\n    /**\n     * 有过程的增加分数\n     * @param addNum \n     */\n    private setScoreWithProcess(addNum: number): void {\n        // this.txtScore.text = \"预计得分：{0}\".format(score);\n        // function (value: number, time: number, postfix?: string, startValue: number = 0, prefix?: string) {\n        let newScore = this._oldScore + addNum;\n        UserDataCtrl.instance.noCacheData.readyAddScore = newScore;\n        this.txtScore[\"num\"](newScore, 300, null, this._oldScore, \"预计得分：\", () => {\n            this._oldScore = newScore;\n        });\n    }\n\n    /**\n     * 有过程的增加宝石\n     * @param addNum \n     */\n    private setGemWithProcess(oldGemNum: number): void {\n        let newGemNum = UserDataCtrl.instance.gemNum;\n        this.txtGemNum[\"num\"](newGemNum, 300, null, oldGemNum, \"x\", () => {\n            UserDataCtrl.instance.recordGemNum(newGemNum);\n        });\n    }\n\n    /**\n     * 展示本次预计分数增加\n     */\n    private showScoreAdd(isAddByGem: boolean): void {\n        let score: number = Math.min(LevelCtrl.instance.curLevel, ConfigAll.CYINLINDER_ADD_SCORE_LIMIT);\n        let txt = \"+ {0}\".format(score);;\n        // txt = (\"+ {0} X\" + ConfigAll.HIT_GEM_DOUBLE_SCORE).format(score)\n        // if (isAddByGem) {\n        //     score *= ConfigAll.HIT_GEM_DOUBLE_SCORE;\n        //     txt = (\"+ {0} X\" + ConfigAll.HIT_GEM_DOUBLE_SCORE).format(Math.floor(score / 2));\n        // }\n\n        let bg = new Laya.Image();\n        this.boxScoreAdd.addChild(bg)\n\n        let toastMsg: Laya.Label;\n\n        toastMsg = new Laya.Label(\"x\");\n        toastMsg.text = txt;\n        toastMsg.fontSize = 41;\n        // toastMsg.color = \"#ff2e2a\";\n        toastMsg.color = \"#FFFFFF\";\n        toastMsg.bold = false;\n        toastMsg.stroke = 4;\n        // toastMsg.strokeColor = \"#ffffff\";\n        toastMsg.strokeColor = \"#e8e6a3\";\n        bg.addChild(toastMsg);\n\n        let delay: number = 0;\n        Laya.timer.once(delay, this, () => {\n            let tween = new Laya.Tween();\n            let duration = 800;\n            tween.to(bg, { y: bg.y - 70, alpha: 0 }, duration, null, Laya.Handler.create(this, () => {\n                bg.destroy();\n\n                this.setScoreWithProcess(score);\n            }));\n        });\n    }\n\n    /**\n     * 展示宝石增加\n     */\n    private showGemUmAdd(oldGemNum: number): void {\n        let gemAddNum: number = UserDataCtrl.instance.gemNum - oldGemNum;\n\n        let bg = new Laya.Image();\n        this.boxGemAdd.addChild(bg)\n\n        let toastMsg: Laya.Label;\n\n        toastMsg = new Laya.Label(\"x\");\n        toastMsg.text = \"+ {0}\".format(gemAddNum);\n        toastMsg.fontSize = 41;\n        // toastMsg.color = \"#ff2e2a\";\n        toastMsg.color = \"#FF0000\";\n        toastMsg.bold = false;\n        toastMsg.stroke = 4;\n        toastMsg.strokeColor = \"#ffffff\";\n        bg.addChild(toastMsg);\n\n        let delay: number = 0;\n        Laya.timer.once(delay, this, () => {\n            let tween = new Laya.Tween();\n            let duration = 800;\n            tween.to(bg, { y: bg.y - 70, alpha: 0 }, duration, null, Laya.Handler.create(this, () => {\n                bg.destroy();\n\n                this.setGemWithProcess(oldGemNum);\n            }));\n        });\n    }\n\n    private onLevelUpdated(): void {\n        this.setLevelData();\n    }\n\n    private onChildLevelUpdated(): void {\n        this.setChildLevelData();\n    }\n\n    private onCylinderComplete(): void {\n        this.showScoreAdd(false);\n\n        if (ConfigAll.PLAT_SWITCH.SHOW_BANNER_AD_GAMESCENE) {\n            if (Math.random() < ConfigAll.PLAT_SWITCH.SHOW_BANNER_AD_GAMESCENE_RATE) {\n                Encourage.showBanner();\n            } else {\n                Encourage.hideBanner(true);\n            }\n\n        }\n    }\n\n    /**\n     * 更新宝石数量\n     */\n    private onGemNumUpdated(isAdd?: boolean, oldGemNum?: number): void {\n\n        if (isAdd) {\n            this.showGemUmAdd(oldGemNum);\n        } else {\n            this.setGemNumData();\n        }\n\n    }\n\n    /**\n     * 球发射以后事件\n     */\n    private onBallShoot(): void {\n        let topBallIcon = this._ballIcons[this._ballIcons.length - 1 - LevelCtrl.instance.curHitCount];\n        this._lastHideBall = topBallIcon;\n        topBallIcon.isBallShow = false;\n\n        this.hideGameHandAni();\n    }\n\n    /**\n     * 复活事件\n     */\n    private onRecover(): void {\n        this._lastHideBall && (this._lastHideBall.isBallShow = true);\n    }\n\n    private resetBallIcons(): void {\n        for (let ele of this._ballIcons) {\n            ele.removeSelf();\n            Laya.Pool.recover(\"BALL_ICON\", ele);\n        }\n        this._ballIcons.length = 0;\n\n        let aim = LevelCtrl.instance.curChildLvlInfo.Aim;\n        let gap = 50;\n        for (let i = 0; i < aim; i++) {\n            let ballIcon = Laya.Pool.getItemByClass(\"BALL_ICON\", BallIcon) as BallIcon;\n            this._ballIcons[i] = ballIcon;\n            ballIcon.scale(0.8, 0.8);\n            ballIcon.isBallShow = true;\n            ballIcon.bottom = i * gap;\n            this.boxBall.addChild(ballIcon);\n        }\n    }\n\n}\n\n// --------------------------------\n\nclass BallIcon extends Laya.Image {\n    private _circle: Laya.Image;\n    private _ball: Laya.Image;\n    constructor() {\n        super();\n        this._circle = this.createRing();\n        this._ball = this.createBall();\n\n        this._circle.alpha = 0.7;\n        this.addChild(this._circle);\n        this.addChild(this._ball);\n    }\n\n    public set isBallShow(value: boolean) {\n        this._ball.visible = value;\n        if (value) {\n            this.setImageFilter(this._ball);\n        }\n    }\n    private createBall(): Laya.Image {\n        let url = \"comp/img_white_circle.png\";\n        let image = new Laya.Image();\n        image.texture = Laya.loader.getRes(url);\n        return image;\n    }\n\n    private setImageFilter(image: Laya.Image): void {\n        let colorMatrix: any =\n            [\n                1, 0, 0, 0, 0, //R\n                0, 0, 0, 0, 0, //G\n                0, 0, 0, 0, 0, //B\n                0, 0, 0, 1, 0, //A\n            ];\n        let mat = LevelCtrl.instance.curChildLvlInfo.colorMat.hit;\n        let colorV4 = mat._shaderValues[\"_data\"][23] as Laya.Vector4;\n        colorMatrix[0] = colorV4.x;\n        colorMatrix[5] = colorV4.y;\n        colorMatrix[10] = colorV4.z;\n        colorMatrix[15] = colorV4.w;\n\n        let colorFilter = new Laya.ColorFilter(colorMatrix);\n\n        // 添加滤镜\n        image.filters = [colorFilter];\n    }\n\n    private createRing(): Laya.Image {\n        let url = \"comp/img_ball_ring.png\";\n        let ballIcon = new Laya.Image(url);\n        return ballIcon;\n    }\n\n}","import { ui } from \"../ui/layaMaxUI\";\nimport { GameCtrl } from \"../game/GameCtrl\";\nimport GameConfig from \"../GameConfig\";\nimport GameScene from \"./GameScene\";\nimport RecoverScene from \"./RecoverScene\";\nimport LevelUpScene from \"./LevelUpScene\";\nimport { ConfigAll } from \"../cfg/ConfigAll\";\nimport Utils from \"../utils/Utils\";\n/**\n * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联\n * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果\n * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。\n */\nexport default class StartScene extends ui.StartSceneUI {\n\n    constructor() {\n        super();\n        this.init();\n        GameCtrl.instance.init(() => {\n            // Laya.Scene.close(GameConfig.startScene);\n            Laya.Scene.open(GameScene.SCENE);\n        });\n\n        this.getPlatSwitch();\n    }\n\n    private init() {\n        // var reg: Function = Laya.ClassUtils.regClass;\n        // reg(\"view/StartScene.ts\", StartScene);\n        // reg(GameScene.LOCAL, GameScene);\n        // reg(RecoverScene.LOCAL, RecoverScene);\n        // reg(LevelUpScene.LOCAL, LevelUpScene);\n    }\n\n    private getPlatSwitch(): void {\n        // if (!Utils.isWXMiniGame) return;\n        Laya.loader.create(\"https://itdevtools.gitee.io/games/paint_hit/game_cfg.json?time=\" + new Date().getTime(), Laya.Handler.create(this, (obj: any) => {\n            if (obj) {\n                let data: Object;\n                let cfgVer = obj.ver;\n                let gameVer = ConfigAll.VERSION;\n                if (Utils.compareVer(gameVer, cfgVer)) {\n                    // 测试版本\n                    data = obj.test;\n                } else {\n                    // 线上版本\n                    data = obj.online;\n                }\n                for (let key in ConfigAll.PLAT_SWITCH) {\n                    let value = data[key];\n                    if (value == null) continue;\n                    ConfigAll.PLAT_SWITCH[key] = value;\n                }\n                console.log(\"game_cfg\", data)\n            }\n            console.log(\"PLAT_SWITCH - syncData:\", ConfigAll.PLAT_SWITCH);\n        }));\n    }\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\r\nimport FriendRankScene from \"./view/FriendRankScene\"\nimport GameScene from \"./view/GameScene\"\nimport LevelUpScene from \"./view/LevelUpScene\"\nimport RecoverScene from \"./view/RecoverScene\"\nimport StartScene from \"./view/StartScene\"\r\n/*\r\n* 游戏初始化配置;\r\n*/\r\nexport default class GameConfig{\r\n    static width:number=720;\r\n    static height:number=1280;\r\n    static scaleMode:string=\"fixedwidth\";\r\n    static screenMode:string=\"none\";\r\n    static alignV:string=\"top\";\r\n    static alignH:string=\"left\";\r\n    static startScene:any=\"StartScene.scene\";\r\n    static sceneRoot:string=\"\";\r\n    static debug:boolean=false;\r\n    static stat:boolean=false;\r\n    static physicsDebug:boolean=false;\r\n    static exportSceneToJson:boolean=true;\r\n    constructor(){}\r\n    static init(){\r\n        var reg: Function = Laya.ClassUtils.regClass;\r\n        reg(\"view/FriendRankScene.ts\",FriendRankScene);\n        reg(\"view/GameScene.ts\",GameScene);\n        reg(\"view/LevelUpScene.ts\",LevelUpScene);\n        reg(\"view/RecoverScene.ts\",RecoverScene);\n        reg(\"view/StartScene.ts\",StartScene);\r\n    }\r\n}\r\nGameConfig.init();","// add format method to String\n/*\nif (!String.prototype[\"format\"]) {\n    String.prototype[\"format\"] = function() {\n        let str = this.toString();\n        if (!arguments.length)\n            return str;\n        let argType = typeof arguments[0];\n        let args = ((\"string\" == argType || \"number\" == argType) ? arguments : arguments[0]);\n        for (let arg in args)\n            str = str.replace(RegExp(\"\\\\{\" + arg + \"\\\\}\", \"gi\"), args[arg]);\n        return str;\n    }\n}\n*/\n\nexport default function JsPatch() {\n    if (!String.prototype[\"format\"]) {\n        String.prototype[\"format\"] = function () {\n            let str = this.toString();\n            if (!arguments.length)\n                return str;\n            let argType = typeof arguments[0];\n            let args = ((\"string\" == argType || \"number\" == argType) ? arguments : arguments[0]);\n            for (let arg in args)\n                str = str.replace(RegExp(\"\\\\{\" + arg + \"\\\\}\", \"gi\"), args[arg]);\n            return str;\n        }\n    }\n}","import GameConfig from \"./GameConfig\";\r\nimport { MainLogic } from \"./MainLogic\";\r\nimport { AnaEvent } from \"./com.sky1231/AnaEvent\";\r\nimport { Analytics } from \"./com.sky1231/Analytics\";\r\nimport { ConfigAll } from \"./cfg/ConfigAll\";\r\nimport JsPatch from \"./utils/JsPatch\";\r\nclass Main {\r\n\tconstructor() {\r\n\t\t//根据IDE设置初始化引擎\t\t\r\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\r\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\r\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\r\n\t\tLaya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\r\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\r\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\r\n\t\tLaya.stage.alignV = GameConfig.alignV;\r\n\t\tLaya.stage.alignH = GameConfig.alignH;\r\n\t\t//兼容微信不支持加载scene后缀场景\r\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\r\n\r\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\r\n\t\tif (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\r\n\t\tif (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\r\n\t\tif (GameConfig.stat) Laya.Stat.show();\r\n\t\tLaya.alertGlobalError = true;\r\n\r\n\t\tJsPatch();\r\n\t\tAnalytics.sendEvent(AnaEvent.GAME_VER, { ver: ConfigAll.VERSION });\r\n\t\tAnalytics.sendEvent(AnaEvent.CODE_START);\r\n\t\t//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\r\n\t\tLaya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\r\n\t}\r\n\r\n\tonVersionLoaded(): void {\r\n\t\t//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\r\n\t\tLaya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\r\n\t}\r\n\r\n\tonConfigLoaded(): void {\r\n\t\t//加载IDE指定的场景\r\n\t\t// GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\r\n\t\t// Laya.Scene.root.zOrder = 1;\r\n\t\t// Laya.stage.frameRate = \"slow\"; //如果使用slow 30帧会导致iphone6 p画面卡断（即使在只有一个简单的ui界面下）\r\n\t\tMainLogic.instance.init();\r\n\t}\r\n}\r\n//激活启动类\r\nnew Main();\r\n"],"names":[],"mappings":"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"}